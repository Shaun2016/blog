<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>python-data-process</title>
      <link href="/2018/02/26/python-data-process/"/>
      <url>/2018/02/26/python-data-process/</url>
      <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css"><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><blockquote><p>Python 科学计算中用到的数据处理，图像绘制的方法记录。好多不知道啥意思，先背住吧，用到的时候再找…Python 做科学计算东西挺多的，现在还不能自己掌握，得不断积累</p></blockquote><a id="more"></a><h1 id="随机生成正态分布的数据"><a href="#随机生成正态分布的数据" class="headerlink" title="随机生成正态分布的数据"></a>随机生成正态分布的数据</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line">__author__ = <span class="string">'ZJM'</span></div><div class="line">__time__ = <span class="string">'2018/2/26 15:22'</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><span class="keyword">from</span> numpy.linalg <span class="keyword">import</span> cholesky</div><div class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</div><div class="line"><span class="keyword">import</span> matplotlib.mlab <span class="keyword">as</span> mlab</div><div class="line"><span class="keyword">from</span> scipy.stats <span class="keyword">import</span> multivariate_normal</div><div class="line"><span class="keyword">from</span> sklearn.mixture <span class="keyword">import</span> GaussianMixture</div><div class="line"><span class="keyword">from</span> mpl_toolkits.mplot3d <span class="keyword">import</span> Axes3D</div><div class="line"></div><div class="line">sampleNo = <span class="number">1000</span></div><div class="line"><span class="comment"># 一维正太分布</span></div><div class="line">mu = <span class="number">3</span></div><div class="line">sigma = <span class="number">15</span></div><div class="line">np.random.seed(<span class="number">0</span>)</div><div class="line">s = np.random.normal(mu, sigma, sampleNo)</div><div class="line">plt.subplot(<span class="number">221</span>)</div><div class="line">n, bins, patches = plt.hist(s, <span class="number">50</span>, normed=<span class="number">1</span>)</div><div class="line"><span class="comment"># add a best fit line</span></div><div class="line">line = mlab.normpdf(bins, mu, sigma)</div><div class="line">plt.plot(bins, line, <span class="string">'r--'</span>)</div><div class="line">plt.xlabel(<span class="string">'x'</span>)</div><div class="line">plt.ylabel(<span class="string">'y'</span>)</div><div class="line">plt.title(<span class="string">r'$\mu='</span> + str(mu) + <span class="string">'$, $\sigma='</span> + str(sigma) + <span class="string">'$'</span>)</div><div class="line"></div><div class="line"><span class="comment"># 二维正态分布</span></div><div class="line">mu = np.array([<span class="number">1</span>, <span class="number">5</span>])</div><div class="line">sigma = np.array([[<span class="number">1</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">1.5</span>]])</div><div class="line">R = cholesky(sigma)</div><div class="line">s = np.dot(np.random.randn(sampleNo, <span class="number">2</span>), R) + mu</div><div class="line">plt.subplot(<span class="number">222</span>)</div><div class="line">plt.plot(s[:, <span class="number">0</span>], s[:, <span class="number">1</span>], <span class="string">'+'</span>)</div><div class="line"></div><div class="line"><span class="comment"># 三维正太分布</span></div><div class="line">mu = np.array([<span class="number">0</span>] * <span class="number">3</span>)</div><div class="line"><span class="comment"># sigma = np.array([[1, 1, 3], [1, 2, 1], [0, 0, 1]])</span></div><div class="line">sigma = np.diag((<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>))</div><div class="line">data = np.random.multivariate_normal(mu, sigma, <span class="number">500</span>)</div><div class="line">norm = multivariate_normal(mu, sigma)</div><div class="line">tau = norm.pdf(data)</div><div class="line">fig = plt.figure(figsize=(<span class="number">13</span>, <span class="number">7</span>), facecolor=<span class="string">'w'</span>)</div><div class="line">ax = fig.add_subplot(<span class="number">223</span>, projection=<span class="string">'3d'</span>)</div><div class="line">ax.scatter(data[:, <span class="number">0</span>], data[:, <span class="number">1</span>], data[:, <span class="number">2</span>], c=<span class="string">'b'</span>, s=<span class="number">30</span>, marker=<span class="string">'o'</span>, depthshade=<span class="keyword">True</span>)</div><div class="line">ax.set_xlabel(<span class="string">'X'</span>)</div><div class="line">ax.set_ylabel(<span class="string">'Y'</span>)</div><div class="line">plt.tight_layout()</div><div class="line">plt.show()</div></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Scientific Computation </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>math basic</title>
      <link href="/2018/02/24/math-basic/"/>
      <url>/2018/02/24/math-basic/</url>
      <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css"><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><blockquote><p>数学功底太差，概率论与数理统计、线性代数，大量概念理解不够，之前的强化记忆都为了应付考试，记题型、背步骤，现在用到数据处理和公式推导时发现都不会了。下面把一些用到的概念记录下，主要是看到的通俗的解释，直观形象的描述。尽量使概念活起来。<em>^ - ^</em></p></blockquote><a id="more"></a><h1 id="线代"><a href="#线代" class="headerlink" title="线代"></a>线代</h1><h2 id="最小二乘法"><a href="#最小二乘法" class="headerlink" title="最小二乘法"></a>最小二乘法</h2><h2 id="正交阵"><a href="#正交阵" class="headerlink" title="正交阵"></a>正交阵</h2><blockquote><p>n阶矩阵A，满足A<sup>T</sup>A=E，则A为正交阵</p><p>A=(a1,a2,…,an), A为正交阵，有：</p><p>ai<sup>T</sup>ai=1, ai<sup>T</sup>aj=0(i≠j)</p><p>即A的行(列)向量都是单位向量，且两两正交</p><p>单位向量保证A<sup>T</sup>A 对角线都是1，正交使得其他元素都是0</p><p>A, B 都是n阶正交阵，则A×B是正交阵</p></blockquote><h2 id="对称阵"><a href="#对称阵" class="headerlink" title="对称阵"></a>对称阵</h2><blockquote><p>协方差矩阵，二次型矩阵，无向图邻接矩阵都是对称阵</p><p>实对称阵不同特征值的特征向量正交</p><p>设A为n阶对称阵，则必有正交阵P，使得P<sup>-1</sup>AP = P<sup>T</sup>AP = Λ</p><p>其中P为A的特征向量组成的矩阵，Λ对角线上是A的特征值，即A为对称阵，做合同变换，特征值不变，A与Λ互为合同矩阵</p></blockquote><h2 id="正定阵"><a href="#正定阵" class="headerlink" title="正定阵"></a>正定阵</h2><blockquote><p>直观上：正定阵是一种实对称阵</p><p>对于n阶方阵A，若任意n阶非零向量x，都有x<sup>T</sup>Ax&gt;0，则称A是正定阵。</p><p>给定任意m×n的矩阵A，A<sup>T</sup>A一定是半正定对称方阵</p><p>对称阵A是正定阵，A特征值都为正，A的顺序主子式都为正</p></blockquote><h2 id="向量的导数"><a href="#向量的导数" class="headerlink" title="向量的导数"></a>向量的导数</h2><blockquote><p>问题：A为m×n的矩阵，<strong>x</strong>为n×1的列向量，则A<strong>x</strong>为m×1的列向量，记<strong>y</strong>=A<strong>x</strong>，<strong>y</strong>对<strong>x</strong>的偏导为A<sup>T</sup></p><p><img src="/images/math/v1.PNG" alt="向量偏导"></p><p><img src="/images/math/v2.PNG" alt="v2"></p></blockquote><h1 id="概率"><a href="#概率" class="headerlink" title="概率"></a>概率</h1><h2 id="期望"><a href="#期望" class="headerlink" title="期望"></a>期望</h2><blockquote><p>平均数的扩展</p><p>小学的时候，考语数外，三科一样重要，期末成绩三科求和除以3即可得到平均分。大学了，每科都有学分，学分大的更重要，在所有科目中占的比重就大。求平均分时就要带着权重啦。x<sub>k</sub> 的概率p<sub>k</sub> 就相当于它的权重。期望反应数据的平均水平。</p><p>离散型：</p><p><img src="https://gss3.bdstatic.com/-Po3dSag_xI4khGkpoWK1HF6hhy/baike/s%3D111/sign=cdc6e7624ded2e73f8e9822db603a16d/08f790529822720ef74fea1c7ccb0a46f31fab57.jpg" alt="期望"></p><p>连续型：</p><p><img src="https://gss2.bdstatic.com/-fo3dSag_xI4khGkpoWK1HF6hhy/baike/s%3D149/sign=14ad9bc8afd3fd1f3209a63e094f25ce/dcc451da81cb39db20db6fb0d7160924ab183038.jpg" alt="期望"></p></blockquote><h2 id="方差"><a href="#方差" class="headerlink" title="方差"></a>方差</h2><blockquote><p>衡量随机变量或一组数据时离散程度</p><p>在统计描述中：</p><p><img src="https://gss2.bdstatic.com/9fo3dSag_xI4khGkpoWK1HF6hhy/baike/s%3D113/sign=c388d5738013632711edc632a28ea056/023b5bb5c9ea15cee484a9a6bc003af33a87b233.jpg" alt="方差"></p><p>在概率分布中：</p><p>离散型：</p><p><img src="https://gss1.bdstatic.com/9vo3dSag_xI4khGkpoWK1HF6hhy/baike/s%3D162/sign=c013f07cb51bb0518b24b72e047bda77/54fbb2fb43166d22262ee9ca402309f79052d217.jpg" alt=""></p><p>​    展开后：</p><p><img src="https://gss1.bdstatic.com/9vo3dSag_xI4khGkpoWK1HF6hhy/baike/s%3D164/sign=025082edd758ccbf1fbcb13c2dd9bcd4/7c1ed21b0ef41bd51ce0c3ab57da81cb39db3d39.jpg" alt=""></p><p>连续型：</p><p><img src="https://gss1.bdstatic.com/9vo3dSag_xI4khGkpoWK1HF6hhy/baike/s%3D308/sign=3501fe127ccb0a4681228d395361f63e/b17eca8065380cd7a8d1be05a644ad345882810e.jpg" alt=""></p></blockquote><h2 id="协方差Cov"><a href="#协方差Cov" class="headerlink" title="协方差Cov"></a>协方差Cov</h2><blockquote><p>描述两个变量在变化过程中同向还是反向，及其程度。</p><p>你大我也大，同向，协方差为正</p><p>你大我小，反向，协方差为负</p><p>协方差数值绝对值越大则程度越强</p><p><img src="https://www.zhihu.com/equation?tex=Cov%28X%2CY%29%3DE%5B%28X-%5Cmu+_%7Bx%7D%29%28Y-%5Cmu+_%7By%7D%29%5D" alt="协方差公式"></p></blockquote><h2 id="相关系数ρ"><a href="#相关系数ρ" class="headerlink" title="相关系数ρ"></a>相关系数ρ</h2><blockquote><p><img src="https://ss2.baidu.com/6ONYsjip0QIZ8tyhnq/it/u=4253573177,2792087979&amp;fm=58" alt="img"></p><p>也可以反映两个变量变化时是同向还是反向，如果同向变化就为正，反向变化就为负。</p><p>由于除以了两个变量的标准差，消除了变化幅度的影响，只考虑变化率的相似程度</p></blockquote><h2 id="似然函数-Likehood-function"><a href="#似然函数-Likehood-function" class="headerlink" title="似然函数 Likehood function"></a>似然函数 Likehood function</h2><blockquote><p><strong>似然函数 </strong>是关于统计模型中的<strong>参数</strong>的函数</p><p>给定输出 <strong>x</strong> 时，关于参数θ的似然函数L(θ|x)=P(X=x|θ)</p><p>概率描述了已知参数时的随机变量的输出结果；似然描述已知随机变量输出结果时，未知参数的可能取值</p></blockquote><ul><li><p>离散型</p><p>L(θ|x) = P(X=x|θ) 或 P(X=x;θ)</p></li><li><p>连续型</p><p>L(θ|x) = f(x|θ)</p></li></ul><h2 id="求极大似然函数"><a href="#求极大似然函数" class="headerlink" title="求极大似然函数"></a>求极大似然函数</h2><blockquote><ol><li>写出似然函数</li><li>对似然函数取对数</li><li>求导数</li><li>解似然方程</li></ol></blockquote>]]></content>
      
      <categories>
          
          <category> mechine learning </category>
          
      </categories>
      
      
        <tags>
            
            <tag> statistic </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>backtracking questions</title>
      <link href="/2018/02/23/backtracking-questions/"/>
      <url>/2018/02/23/backtracking-questions/</url>
      <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css"><h1 id="回溯法求幂集、排列组合、回文区分"><a href="#回溯法求幂集、排列组合、回文区分" class="headerlink" title="回溯法求幂集、排列组合、回文区分"></a>回溯法求幂集、排列组合、回文区分</h1><h2 id="幂集"><a href="#幂集" class="headerlink" title="幂集"></a>幂集</h2><h3 id="无重复元素发幂集"><a href="#无重复元素发幂集" class="headerlink" title="无重复元素发幂集"></a>无重复元素发幂集</h3><blockquote><p>Given a set of <strong>distinct</strong> integers, <em>nums</em>, return all possible subsets (the power set).</p><p><strong>Note:</strong> The solution set must not contain duplicate subsets.</p><p>For example,<br>If <strong>nums</strong> = <code>[1,2,3]</code>, a solution is:<code>[[3], [1], [2], [1,2,3], [1,3], [2,3], [1,2], []]</code></p></blockquote><a id="more"></a><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">subsets</span><span class="params">(self, nums)</span>:</span></div><div class="line">    <span class="string">"""</span></div><div class="line"><span class="string">    :type nums: List[int]</span></div><div class="line"><span class="string">    :rtype: List[List[int]]</span></div><div class="line"><span class="string">    """</span></div><div class="line">    ans = []</div><div class="line">    l = len(nums)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">backtrack</span><span class="params">(tempList, start)</span>:</span></div><div class="line">        ans.append(tempList)</div><div class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(start, l):</div><div class="line">            tempList.append(nums[i])</div><div class="line">            backtrack(tempList[:], i+<span class="number">1</span>)</div><div class="line">            tempList.pop()</div><div class="line"></div><div class="line">    backtrack([], <span class="number">0</span>)</div><div class="line">    <span class="keyword">return</span> ans</div></pre></td></tr></table></figure><h3 id="存在重复元素的幂集"><a href="#存在重复元素的幂集" class="headerlink" title="存在重复元素的幂集"></a>存在重复元素的幂集</h3><blockquote><p>Given a collection of integers that might contain duplicates, <strong>nums</strong>, return all possible subsets (the power set).</p><p><strong>Note:</strong> The solution set must not contain duplicate subsets.</p><p>or example,<br>If <strong>nums</strong> = <code>[1,2,2]</code>, a solution is: <code>[[2], [1], [1,2,2], [2,2], [1,2], []]</code></p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">subsetWithDup</span><span class="params">(self, nums)</span>:</span></div><div class="line">    <span class="string">"""</span></div><div class="line"><span class="string">    :type nums: List[int]</span></div><div class="line"><span class="string">    :rtype: List[List[int]]</span></div><div class="line"><span class="string">    """</span></div><div class="line">    l = len(nums)</div><div class="line">    ans = []</div><div class="line">    nums = sorted(nums)</div><div class="line">    tempList = []</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">backtrack</span><span class="params">(start)</span>:</span></div><div class="line">        ans.append(tempList[:])</div><div class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(start, l):</div><div class="line">            <span class="keyword">if</span> i &gt; start <span class="keyword">and</span> nums[i] == nums[i<span class="number">-1</span>]: <span class="comment"># skip duplicates</span></div><div class="line">                <span class="keyword">continue</span></div><div class="line">            tempList.append(nums[i])</div><div class="line">            backtrack(i+<span class="number">1</span>)</div><div class="line">            tempList.pop()</div><div class="line"></div><div class="line">    backtrack(<span class="number">0</span>)</div><div class="line">    <span class="keyword">return</span> ans</div></pre></td></tr></table></figure><h2 id="全排列问题"><a href="#全排列问题" class="headerlink" title="全排列问题"></a>全排列问题</h2><h3 id="无重复元素的全排列"><a href="#无重复元素的全排列" class="headerlink" title="无重复元素的全排列"></a>无重复元素的全排列</h3><blockquote><p>Given a collection of <strong>distinct</strong> numbers, return all possible permutations.</p><p>For example,<br><code>[1,2,3]</code> have the following permutations:</p><p><code>[[1,2,3], [1,3,2], [2,1,3], [2,3,1], [3,1,2], [3,2,1]]</code></p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">permute</span><span class="params">(self, nums)</span>:</span></div><div class="line"><span class="string">"""</span></div><div class="line"><span class="string">    :type nums: List[int]</span></div><div class="line"><span class="string">    :rtype: List[List[int]]</span></div><div class="line"><span class="string">    """</span></div><div class="line">    l = len(nums)</div><div class="line">    ans = []</div><div class="line">    tempList = []</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">backtrack</span><span class="params">()</span>:</span></div><div class="line">        <span class="keyword">if</span> len(tempList) == l:</div><div class="line">            ans.append(tempList[:])</div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(l):</div><div class="line">                <span class="keyword">if</span> nums[i] <span class="keyword">in</span> tempList:</div><div class="line">                    <span class="keyword">continue</span></div><div class="line">                tempList.append(nums[i])</div><div class="line">                backtrack()</div><div class="line">                tempList.pop()</div><div class="line"></div><div class="line">    backtrack()</div><div class="line">    <span class="keyword">return</span> ans</div></pre></td></tr></table></figure><h3 id="存在重复元素的全排列"><a href="#存在重复元素的全排列" class="headerlink" title="存在重复元素的全排列"></a>存在重复元素的全排列</h3><blockquote><p>Given a collection of numbers that might contain duplicates, return all possible unique permutations.</p><p>For example,<br><code>[1,1,2]</code> have the following unique permutations: <code>[[1,1,2], [1,2,1], [2,1,1]]</code></p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">permuteWithUnique</span><span class="params">(self, nums)</span>:</span></div><div class="line">    <span class="string">"""</span></div><div class="line"><span class="string">    :type nums: List[int]</span></div><div class="line"><span class="string">    :rtype: List[List[int]]</span></div><div class="line"><span class="string">    """</span></div><div class="line">    nums = sorted(nums)</div><div class="line">    l = len(nums)</div><div class="line">    ans = []</div><div class="line">    tempList = []</div><div class="line">    used = [<span class="keyword">False</span>] * l</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">backtrack</span><span class="params">()</span>:</span></div><div class="line">        <span class="keyword">if</span> len(tempList) == l:</div><div class="line">            ans.append(tempList[:])</div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(l):</div><div class="line">                <span class="keyword">if</span> used[i] <span class="keyword">or</span> i &gt; <span class="number">0</span> <span class="keyword">and</span> nums[i] == nums[i<span class="number">-1</span>] <span class="keyword">and</span> <span class="keyword">not</span> used[i<span class="number">-1</span>]:</div><div class="line">                    <span class="keyword">continue</span></div><div class="line">                used[i] = <span class="keyword">True</span></div><div class="line">                tempList.append(nums[i])</div><div class="line">                backtrack()</div><div class="line">                used[i] = <span class="keyword">False</span></div><div class="line">                tempList.pop()</div><div class="line"></div><div class="line">    backtrack()</div><div class="line">    <span class="keyword">return</span> ans</div></pre></td></tr></table></figure><blockquote><p>Input:  <code>[3, 3, 0, 3]</code></p><p>Output: <code>[[0, 3, 3, 3], [3, 0, 3, 3], [3, 3, 0, 3], [3, 3, 3, 0]]</code></p></blockquote><h2 id="组合问题"><a href="#组合问题" class="headerlink" title="组合问题"></a>组合问题</h2><h3 id="元素可以用多次"><a href="#元素可以用多次" class="headerlink" title="元素可以用多次"></a>元素可以用多次</h3><blockquote><p>Given a <strong>set</strong> of candidate numbers (<strong>C</strong>) <strong>(without duplicates)</strong> and a target number (<strong>T</strong>), find all unique combinations in <strong>C</strong> where the candidate numbers sums to <strong>T</strong>.</p><p>For example, given candidate set <code>[2, 3, 6, 7]</code> and target <code>7</code>,<br>A solution set is:  <code>[ [7], [2, 2, 3] ]</code></p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">combinationSum</span><span class="params">(self, candidates, target)</span>:</span></div><div class="line">       <span class="string">"""</span></div><div class="line"><span class="string">       :type candidates: List[int]</span></div><div class="line"><span class="string">       :type target: int</span></div><div class="line"><span class="string">       :rtype: List[List[int]]</span></div><div class="line"><span class="string">       """</span></div><div class="line">       ans = []</div><div class="line">       l = len(candidates)</div><div class="line">       tempList = []</div><div class="line">       candidates = sorted(candidates)</div><div class="line"></div><div class="line">       <span class="function"><span class="keyword">def</span> <span class="title">backtrack</span><span class="params">(remain, start)</span>:</span></div><div class="line">           <span class="keyword">if</span> remain &lt; <span class="number">0</span>:</div><div class="line">               <span class="keyword">return</span></div><div class="line">           <span class="keyword">if</span> remain == <span class="number">0</span>:</div><div class="line">               ans.append(tempList[:])</div><div class="line">           <span class="keyword">else</span>:</div><div class="line">               <span class="keyword">for</span> i <span class="keyword">in</span> range(start, l):</div><div class="line">                   tempList.append(candidates[i])</div><div class="line">                   backtrack(remain-candidates[i], i)</div><div class="line">                   tempList.pop()</div><div class="line"></div><div class="line">       backtrack(target, <span class="number">0</span>)</div><div class="line">       <span class="keyword">return</span> ans</div></pre></td></tr></table></figure><h3 id="元素只能用一次"><a href="#元素只能用一次" class="headerlink" title="元素只能用一次"></a>元素只能用一次</h3><blockquote><p>Given a collection of candidate numbers (<strong>C</strong>) and a target number (<strong>T</strong>), find all unique combinations in <strong>C</strong> where the candidate numbers sums to <strong>T</strong>.</p><p>Each number in <strong>C</strong> may only be used <strong>once</strong> in the combination.</p><p>For example, given candidate set <code>[10, 1, 2, 7, 6, 1, 5]</code> and target <code>8</code>,<br>A solution set is: </p><p><code>[[1, 7], [1, 2, 5], [2, 6], [1, 1, 6]]</code></p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">combinationSum2</span><span class="params">(self, candidates, target)</span>:</span></div><div class="line">    <span class="string">"""</span></div><div class="line"><span class="string">    :type candidates: List[int]</span></div><div class="line"><span class="string">    :type target: int</span></div><div class="line"><span class="string">    :rtype: List[List[int]]</span></div><div class="line"><span class="string">    """</span></div><div class="line">    l = len(candidates)</div><div class="line">    ans = []</div><div class="line">    templist = []</div><div class="line">    candidates = sorted(candidates)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">backtrack</span><span class="params">(remain, start)</span>:</span></div><div class="line">        <span class="keyword">if</span> remain &lt; <span class="number">0</span>:</div><div class="line">            <span class="keyword">return</span></div><div class="line">        <span class="keyword">if</span> remain == <span class="number">0</span>:</div><div class="line">            ans.append(templist[:])</div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(start, l):</div><div class="line">                <span class="keyword">if</span> i &gt; start <span class="keyword">and</span> candidates[i] == candidates[i<span class="number">-1</span>]:</div><div class="line">                    <span class="keyword">continue</span></div><div class="line">                templist.append(candidates[i])</div><div class="line">                backtrack(remain - candidates[i], i+<span class="number">1</span>)</div><div class="line">                templist.pop()</div><div class="line"></div><div class="line">    backtrack(target, <span class="number">0</span>)</div><div class="line">    <span class="keyword">return</span> ans</div></pre></td></tr></table></figure><h2 id="找回文子集"><a href="#找回文子集" class="headerlink" title="找回文子集"></a>找回文子集</h2><blockquote><p>Given a string <em>s</em>, partition <em>s</em> such that every substring of the partition is a palindrome.</p><p>Return all possible palindrome partitioning of <em>s</em>.</p><p>For example, given <em>s</em> = <code>&quot;aab&quot;</code>,<br>Return <code>[[&quot;aa&quot;,&quot;b&quot;], [&quot;a&quot;,&quot;a&quot;,&quot;b&quot;]]</code></p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">partition</span><span class="params">(self, s)</span>:</span></div><div class="line">    <span class="string">"""</span></div><div class="line"><span class="string">    :type s: str</span></div><div class="line"><span class="string">    :rtype: List[List[str]]</span></div><div class="line"><span class="string">    """</span></div><div class="line">    l = len(s)</div><div class="line">    ans = []</div><div class="line">    tempList = []</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">isPalindrome</span><span class="params">(low, high)</span>:</span></div><div class="line">        <span class="keyword">while</span> low &lt; high:</div><div class="line">            <span class="keyword">if</span> s[low] != s[high]:</div><div class="line">                <span class="keyword">return</span> <span class="keyword">False</span></div><div class="line">            low += <span class="number">1</span></div><div class="line">            high -= <span class="number">1</span></div><div class="line">        <span class="keyword">return</span> <span class="keyword">True</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">backtrack</span><span class="params">(start)</span>:</span></div><div class="line">        <span class="keyword">if</span> start == l:</div><div class="line">            ans.append(tempList[:])</div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(start, l):</div><div class="line">                <span class="keyword">if</span> isPalindrome(start, i):</div><div class="line">                    tempList.append(s[start: i+<span class="number">1</span>])</div><div class="line">                    backtrack(i+<span class="number">1</span>)</div><div class="line">                    tempList.pop()</div><div class="line"></div><div class="line">    backtrack(<span class="number">0</span>)</div><div class="line">    <span class="keyword">return</span> ans</div></pre></td></tr></table></figure><p><em>summary:</em></p><blockquote><p>我还没看懂… 以后再更新 -_-|||</p></blockquote><p><em>Copy from</em>：<a href="https://leetcode.com/problems/subsets/discuss/27281/A-general-approach-to-backtracking-questions-in-Java-(Subsets-Permutations-Combination-Sum-Palindrome-Partitioning" target="_blank" rel="external">https://leetcode.com/problems/subsets/discuss/27281/A-general-approach-to-backtracking-questions-in-Java-(Subsets-Permutations-Combination-Sum-Palindrome-Partitioning</a>)</p>]]></content>
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>java map-reduce</title>
      <link href="/2018/02/11/java-map-reduce/"/>
      <url>/2018/02/11/java-map-reduce/</url>
      <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css"><h1 id="Java开发Map-Reduce程序"><a href="#Java开发Map-Reduce程序" class="headerlink" title="Java开发Map/Reduce程序"></a>Java开发Map/Reduce程序</h1><h2 id="MR程序执行方式："><a href="#MR程序执行方式：" class="headerlink" title="MR程序执行方式："></a>MR程序执行方式：</h2><ul><li>在本地运行，输入输出都在本地，用于调试程序</li><li>把远程数据拉到本地运行，输出传回远程，只适合数据量小</li><li>在远程运行，输入输出都在远程</li></ul><a id="more"></a><p>##Java程序在服务器上运行 </p><ul><li><p>配置系统环境变量HADOOP_HOME，指向hadoop安装目录（如果你不想招惹不必要的麻烦，不要在目录中包含空格或者中文字符）</p><p>把HADOOP_HOME/bin加到PATH环境变量（非必要，只是为了方便）</p></li><li><p>如果是在windows下开发，需要添加windows的库文件</p><ul><li>把盘中共享的bin目录覆盖HADOOP_HOME/bin</li><li>如果还是不行，把其中的hadoop.dll复制到c:\windows\system32目录下，可能需要重启机器</li></ul></li></ul><h3 id="maven引入依赖"><a href="#maven引入依赖" class="headerlink" title="maven引入依赖"></a>maven引入依赖</h3><blockquote><p>新建项目，引入hadoop 所需要的jar文件</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">project.build.sourceencoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceencoding</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">hadoop.version</span>&gt;</span>2.7.3<span class="tag">&lt;/<span class="name">hadoop.version</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span></span></div><div class="line">    &lt;/dependency&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.hadoop<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hadoop-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;hadoop.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.hadoop<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hadoop-common<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;hadoop.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.hadoop<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hadoop-hdfs<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;hadoop.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></div></pre></td></tr></table></figure><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><h4 id="WordMapper-java"><a href="#WordMapper-java" class="headerlink" title="WordMapper.java"></a>WordMapper.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.zjm;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.apache.hadoop.io.IntWritable;</div><div class="line"><span class="keyword">import</span> org.apache.hadoop.io.LongWritable;</div><div class="line"><span class="keyword">import</span> org.apache.hadoop.io.Text;</div><div class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Mapper;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WordMapper</span> <span class="keyword">extends</span> <span class="title">Mapper</span>&lt;<span class="title">LongWritable</span>, <span class="title">Text</span>, <span class="title">Text</span>, <span class="title">IntWritable</span>&gt;</span>&#123;</div><div class="line"></div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">map</span><span class="params">(LongWritable key, Text value, Mapper&lt;LongWritable, Text, Text, IntWritable&gt;.Context context)</span></span></div><div class="line"><span class="function"><span class="keyword">throws</span> IOException, InterruptedException </span>&#123;</div><div class="line"><span class="keyword">final</span> IntWritable ONE = <span class="keyword">new</span> IntWritable(<span class="number">1</span>);</div><div class="line">String s = value.toString();</div><div class="line">String[] words = s.split(<span class="string">" "</span>);</div><div class="line"><span class="keyword">for</span>(String word: words) &#123;</div><div class="line">context.write(<span class="keyword">new</span> Text(word), ONE);</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure><h4 id="WordReduce-java"><a href="#WordReduce-java" class="headerlink" title="WordReduce.java"></a>WordReduce.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.zjm;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.apache.hadoop.io.IntWritable;</div><div class="line"><span class="keyword">import</span> org.apache.hadoop.io.LongWritable;</div><div class="line"><span class="keyword">import</span> org.apache.hadoop.io.Text;</div><div class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Reducer;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WordReducer</span> <span class="keyword">extends</span> <span class="title">Reducer</span>&lt;<span class="title">Text</span>, <span class="title">IntWritable</span>, <span class="title">Text</span>, <span class="title">LongWritable</span>&gt;</span>&#123;</div><div class="line"></div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">reduce</span><span class="params">(Text key, Iterable&lt;IntWritable&gt; values,</span></span></div><div class="line"><span class="function"><span class="params">Reducer&lt;Text, IntWritable, Text, LongWritable&gt;.Context context)</span> <span class="keyword">throws</span> IOException, InterruptedException </span>&#123;</div><div class="line"><span class="keyword">long</span> count = <span class="number">0</span>;</div><div class="line"><span class="keyword">for</span>(IntWritable v: values) &#123;</div><div class="line">count += v.get();</div><div class="line">&#125;</div><div class="line">context.write(key, <span class="keyword">new</span> LongWritable(count));</div><div class="line">&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure><h4 id="main函数"><a href="#main函数" class="headerlink" title="main函数"></a>main函数</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.zjm;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.apache.hadoop.conf.Configuration;</div><div class="line"><span class="keyword">import</span> org.apache.hadoop.fs.Path;</div><div class="line"><span class="keyword">import</span> org.apache.hadoop.io.IntWritable;</div><div class="line"><span class="keyword">import</span> org.apache.hadoop.io.LongWritable;</div><div class="line"><span class="keyword">import</span> org.apache.hadoop.io.Text;</div><div class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Job;</div><div class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.lib.input.FileInputFormat;</div><div class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;</div><div class="line">Configuration conf = <span class="keyword">new</span> Configuration();</div><div class="line">        conf.set(<span class="string">"fs.defaultFS"</span>, <span class="string">"hdfs://master:9000/"</span>);</div><div class="line">        <span class="comment">// 将项目打包到项目跟目录下</span></div><div class="line">        conf.set(<span class="string">"mapreduce.job.jar"</span>, <span class="string">"wc.jar"</span>);</div><div class="line">conf.set(<span class="string">"mapreduce.framework.name"</span>, <span class="string">"yarn"</span>);</div><div class="line">conf.set(<span class="string">"yarn.resourcemanager.hostname"</span>, <span class="string">"master"</span>);</div><div class="line">conf.set(<span class="string">"mapreduce.app-submission.cross-platform"</span>,<span class="string">"true"</span>);</div><div class="line">        Job job = Job.getInstance(conf);</div><div class="line">         </div><div class="line">        job.setMapperClass(WordMapper.class);</div><div class="line">        job.setReducerClass(WordReducer.class);</div><div class="line">        job.setMapOutputKeyClass(Text.class);</div><div class="line">        job.setMapOutputValueClass(IntWritable.class);</div><div class="line">        <span class="comment">// Reduce 的输出类型</span></div><div class="line">        job.setOutputKeyClass(Text.class);</div><div class="line">        job.setOutputValueClass(LongWritable.class);</div><div class="line">         </div><div class="line">        FileInputFormat.setInputPaths(job, <span class="string">"/input/"</span>);</div><div class="line">        FileOutputFormat.setOutputPath(job, <span class="keyword">new</span> Path(<span class="string">"/output"</span>));</div><div class="line">         </div><div class="line">        job.waitForCompletion(<span class="keyword">true</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure><p><strong>注：</strong></p><blockquote><p>win系统的hosts文件添加虚拟机的IP和主机名</p><p>配置hadoop在win系统的环境变量</p><p>Run as —— Run Configurations —— Arguments —— VM arguments: <code>-DHADOOP_USER_NAME=root</code></p></blockquote>]]></content>
      
      <categories>
          
          <category> Big Data </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hadoop </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Yarn&amp;Map/Reduce</title>
      <link href="/2018/02/09/Yarn-Map-Reduce/"/>
      <url>/2018/02/09/Yarn-Map-Reduce/</url>
      <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css"><h1 id="分布式计算"><a href="#分布式计算" class="headerlink" title="分布式计算"></a>分布式计算</h1><blockquote><p>设计原则：移动计算，不移动数据</p></blockquote><h2 id="Yarn"><a href="#Yarn" class="headerlink" title="Yarn"></a>Yarn</h2><blockquote><p>Yarn: 资源调度</p><p>主从结构：ResourceManager 和 NodeManager</p><p>ResourceManager 将任务分配给空闲的机器(slave)工作，NodeManager在slave中做具体的资源利用，RM管理NM</p></blockquote><a id="more"></a><h3 id="yarn-site-xml的配置"><a href="#yarn-site-xml的配置" class="headerlink" title="yarn-site.xml的配置"></a>yarn-site.xml的配置</h3><blockquote><p>修改ResourceManager和NodeManager的<code>vim hadoop/etc/hadoop/yarn-site.xml</code></p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.hostname<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>master<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"> </div><div class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span>  </div><div class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span>  </div><div class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span>  </div><div class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span>  </div><div class="line"> </div><div class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.auxservices.mapreduce.shuffle.class<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>org.apache.hadoop.mapred.ShuffleHandler<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div></pre></td></tr></table></figure><p>###启动yarn集群</p><p><code>start-yarn.sh</code></p><blockquote><p>访问8088端口</p></blockquote><h2 id="Map-Reduce"><a href="#Map-Reduce" class="headerlink" title="Map/Reduce"></a>Map/Reduce</h2><blockquote><p>在 ResourceManager上配置mapred-site.xml</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.framework.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>yarn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div></pre></td></tr></table></figure><blockquote><p>执行示例程序</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hadoop jar /usr/local/hadoop/share/hadoop/mapreduce/hadoop-mapreduce-examples-2.7.3.jar wordcount /input/input.txt /output</div></pre></td></tr></table></figure><blockquote><p>查看运行结果</p><p><code>hadoop fs -text /output/part-r-00000</code></p></blockquote><h3 id="Map-Reduce-流程"><a href="#Map-Reduce-流程" class="headerlink" title="Map/Reduce 流程"></a>Map/Reduce 流程</h3><ul><li>input</li><li>split 拆分（一行一行）</li><li>map 映射（键值对）</li><li>shuffle 派发（键值对派发到一个nodeManager）</li><li>reduce 缩减（按键统计值的和）</li><li>output</li></ul>]]></content>
      
      <categories>
          
          <category> Big Data </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hadoop </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>java hdfs</title>
      <link href="/2018/02/08/java-hdfs/"/>
      <url>/2018/02/08/java-hdfs/</url>
      <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css"><h1 id="Java程序访问HDFS"><a href="#Java程序访问HDFS" class="headerlink" title="Java程序访问HDFS"></a>Java程序访问HDFS</h1><p>导入所需的jar文件</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.hadoop/hadoop-common --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.hadoop<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hadoop-common<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.hadoop/hadoop-hdfs --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.hadoop<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hadoop-hdfs<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div></pre></td></tr></table></figure><a id="more"></a><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> dbfs;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.FileInputStream;</div><div class="line"><span class="keyword">import</span> java.math.BigDecimal;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.apache.hadoop.conf.Configuration;</div><div class="line"><span class="keyword">import</span> org.apache.hadoop.fs.FSDataOutputStream;</div><div class="line"><span class="keyword">import</span> org.apache.hadoop.fs.FileStatus;</div><div class="line"><span class="keyword">import</span> org.apache.hadoop.fs.FileSystem;</div><div class="line"><span class="keyword">import</span> org.apache.hadoop.fs.Path;</div><div class="line"><span class="keyword">import</span> org.apache.hadoop.io.IOUtils;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloHDFS</span> </span>&#123;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line"><span class="comment">//URL.setURLStreamHandlerFactory(new FsUrlStreamHandlerFactory());</span></div><div class="line"><span class="comment">//URL url = new URL("hdfs://192.168.137.100:9000/hello.txt");</span></div><div class="line"><span class="comment">//InputStream in = url.openStream();</span></div><div class="line"><span class="comment">//IOUtils.copyBytes(in, System.out, 4096, true);</span></div><div class="line"></div><div class="line">Configuration conf = <span class="keyword">new</span> Configuration();</div><div class="line">conf.set(<span class="string">"fs.defaultFS"</span>, <span class="string">"hdfs://192.168.137.100:9000"</span>);</div><div class="line">      <span class="comment">// 修改hdfs配置参数值</span></div><div class="line">conf.set(<span class="string">"dfs.replication"</span>, <span class="string">"5"</span>);</div><div class="line">FileSystem fileSystem = FileSystem.get(conf);</div><div class="line"><span class="comment">// 判断路径是否存在</span></div><div class="line"><span class="keyword">boolean</span> success = fileSystem.exists(<span class="keyword">new</span> Path(<span class="string">"/zjm"</span>));</div><div class="line">System.out.println(success);</div><div class="line"><span class="comment">// 新建路径，注意如果已经存在同名目录会覆盖原目录x_x</span></div><div class="line">success = fileSystem.mkdirs(<span class="keyword">new</span> Path(<span class="string">"/zjm"</span>));</div><div class="line">System.out.println(success);</div><div class="line"><span class="comment">// 删除</span></div><div class="line">success = fileSystem.delete(<span class="keyword">new</span> Path(<span class="string">"/zjm"</span>), <span class="keyword">true</span>);</div><div class="line">System.out.println(success);</div><div class="line"><span class="comment">// 上传文件</span></div><div class="line">FSDataOutputStream out = fileSystem.create(<span class="keyword">new</span> Path(<span class="string">"/test.data"</span>));</div><div class="line">FileInputStream fis = <span class="keyword">new</span> FileInputStream(<span class="string">"F:learn/mashibing/hadoop/马士兵hadoop2.7入门_03.mp4"</span>);</div><div class="line">IOUtils.copyBytes(fis, out, <span class="number">4096</span>, <span class="keyword">true</span>);</div><div class="line">fileSystem.delete(<span class="keyword">new</span> Path(<span class="string">"/video"</span>), <span class="keyword">true</span>);</div><div class="line">      <span class="comment">// 上传文件：IO流可计算上传进度</span></div><div class="line">FSDataOutputStream out = fileSystem.create(<span class="keyword">new</span> Path(<span class="string">"/video"</span>));</div><div class="line">FileInputStream in = <span class="keyword">new</span> FileInputStream(<span class="string">"F:learn/mashibing/hadoop/马士兵hadoop2.7入门_03.mp4"</span>);</div><div class="line"><span class="keyword">int</span> total = in.available();</div><div class="line"><span class="keyword">byte</span>[] buf = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">4096</span>];</div><div class="line"><span class="keyword">int</span> len = in.read(buf);</div><div class="line"><span class="keyword">int</span> now = len;</div><div class="line"><span class="keyword">while</span>(len != -<span class="number">1</span>) &#123;</div><div class="line"><span class="comment">// 上传百分比，保留小数点后两位</span></div><div class="line">System.out.println(<span class="keyword">new</span> BigDecimal((<span class="keyword">float</span>)now/total*<span class="number">100</span>).setScale(<span class="number">2</span>, BigDecimal.ROUND_HALF_UP).doubleValue());</div><div class="line">out.write(buf, <span class="number">0</span>, len);</div><div class="line">len = in.read(buf);</div><div class="line">now += len;</div><div class="line">&#125;</div><div class="line">in.close();</div><div class="line">out.close();</div><div class="line"><span class="comment">// 查看文件结构</span></div><div class="line">FileStatus[] statuses = fileSystem.listStatus(<span class="keyword">new</span> Path(<span class="string">"/"</span>));</div><div class="line"><span class="keyword">for</span>(FileStatus status: statuses) &#123;</div><div class="line">System.out.println(status.getPath());</div><div class="line">System.out.println(status.getPermission());</div><div class="line">System.out.println(status.getReplication());</div><div class="line">&#125;</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p><strong>注：</strong>需要关闭权限检查，向<code>hdfs-site.xml</code>中添加并重启hdfs</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.permissions.enabled<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>false<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div></pre></td></tr></table></figure><p><em>description:</em></p><blockquote><p>If “true”, enable permission checking in HDFS. If “false”, permission checking is turned off, but all other behavior is unchanged. Switching from one parameter value to the other does not change the mode, owner or group of files or directories.</p></blockquote>]]></content>
      
      <categories>
          
          <category> Big Data </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hadoop </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>hadoop hdfs</title>
      <link href="/2018/02/06/hadoop-hdfs/"/>
      <url>/2018/02/06/hadoop-hdfs/</url>
      <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css"><h1 id="在多台服务器上配置Hadoop"><a href="#在多台服务器上配置Hadoop" class="headerlink" title="在多台服务器上配置Hadoop"></a>在多台服务器上配置Hadoop</h1><ul><li>启动namenode和datanode</li></ul><blockquote><p><code>hadoop-daemon.sh start namenode(datanode)</code></p></blockquote><ul><li>在master上检测datanode</li></ul><blockquote><p><code>hdfs dfsadmin -report | more</code></p></blockquote><ul><li>在web页面观察hadoop集群情况</li></ul><blockquote><p><code>192.168.137.100:50070</code></p></blockquote><a id="more"></a><h1 id="集中管理Slaves"><a href="#集中管理Slaves" class="headerlink" title="集中管理Slaves"></a>集中管理Slaves</h1><blockquote><p>在<code>/usr/local/hadoop/etc/hadoop</code>下的slaves文件中添加slaves的主机名，在master中就可以管理其中的所有slaves，如：</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">slave1</div><div class="line">slave2</div><div class="line">slave3</div></pre></td></tr></table></figure><blockquote><p>执行：<code>start-dfs.sh</code>，输入master, slave, secondaryNameNode的密码</p><p>为了避免输入多次的密码，在 <code>/.ssh</code> 下执行 <code>ssh-keygen -t rsa</code></p><p>回车三次，发现.ssh下生成两个文件：<code>id_ras</code> （私钥）和 <code>id_ras.pub</code>（公钥）</p><p>从master发送公钥到master, slave1, slave2, slave3：<code>ssh-copy-id master</code>, <code>ssh-copy-id slave1</code>, <code>ssh-copy-id slave2</code>, <code>ssh-copy-id slave3</code> 以后<code>ssh IP</code> 就不用再输入密码了，再执行<code>start-dfs.sh</code>时就不用再次输入密码了</p></blockquote><h1 id="hdfs文件系统"><a href="#hdfs文件系统" class="headerlink" title="hdfs文件系统"></a>hdfs文件系统</h1><h2 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h2><blockquote><p><code>hadoop fs -ls</code>或<code>hdfs dfs -ls</code></p><p>放置一个文件到hdfs中：<code>hadoop fs -put file /</code></p><p>通过网页观察现象：<code>http://192.168.137.100:50070/explorer.html#/</code></p><p>指令：</p><p><code>hadoop fs -mkdir /dirname</code></p><p><code>hadoop fs -text /filename</code> 查看文本文件内容</p><p><code>hadoop fs -rm /filename</code></p></blockquote><h2 id="配置参数"><a href="#配置参数" class="headerlink" title="配置参数"></a>配置参数</h2><blockquote><p>编写/hadoop/etc/hadoop/hdfs-site.xml</p><p><em>eg:</em> 修改复制的个数为2份（默认为3份）：</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.replication<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>2<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> Big Data </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hadoop </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>hadoop配置环境及启动</title>
      <link href="/2018/02/05/hadoop-day1/"/>
      <url>/2018/02/05/hadoop-day1/</url>
      <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css"><ul><li>VirtualBox启动虚拟机</li><li>host-only方式连接虚拟机</li><li>安装Hadoop</li></ul><h1 id="连接虚拟机"><a href="#连接虚拟机" class="headerlink" title="连接虚拟机"></a>连接虚拟机</h1><ul><li>查看虚拟网卡的IP地址(assume:192.168.137.1)，VM设置网卡类型为host-only</li></ul><ul><li><p>设置ipv4地址</p><blockquote><p><code>vim /etc/sysconfig/network-scripts/ifcfg-enp03</code></p><p><code>IPADDR=192.168.137.100</code></p><p><code>NETMASK=255.255.255.0</code></p></blockquote></li><li><p>设置网关地址</p><blockquote><p><code>vim /etc/sysconfig/network</code></p><p><code>NETWORKING=yes</code></p><p><code>GATEWAY=192.168.137.1</code></p></blockquote><a id="more"></a></li><li><p>修改主机名</p><blockquote><p><code>hostnamectl set-hostname master</code></p></blockquote></li><li><p>重启network服务</p><blockquote><p><code>service network restart</code></p></blockquote></li><li><p>互相ping</p><blockquote><p>虚拟机：<code>ping 192.168.137.1</code></p><p>电脑：<code>ping 192.168.137.100</code></p></blockquote></li></ul><h1 id="安装Hadoop"><a href="#安装Hadoop" class="headerlink" title="安装Hadoop"></a>安装Hadoop</h1><blockquote><p>打开Xftp上传jdk，hadoop安装文件至<code>/usr/local</code>目录下</p></blockquote><h2 id="安装jdk"><a href="#安装jdk" class="headerlink" title="安装jdk"></a>安装jdk</h2><blockquote><p><code>rpm -ivh jdk-8u91-linux-x64.rpm</code></p></blockquote><h2 id="解压hadoop"><a href="#解压hadoop" class="headerlink" title="解压hadoop"></a>解压hadoop</h2><blockquote><p><code>cd local</code></p><p><code>tar -xvf hadoop-2.7.3.tar.gz</code></p><p>发现local目录下多了hadoop-2.7.3的目录(改名为了方便：mv hadoop-2.7.3 haddop)</p></blockquote><h2 id="配置Hadoop-JDK路径"><a href="#配置Hadoop-JDK路径" class="headerlink" title="配置Hadoop JDK路径"></a>配置Hadoop JDK路径</h2><blockquote><p><code>cd hadoop/etc/hadoop</code></p><p><code>vim hadoop-env.sh</code></p><p><code>export JAVA_HOME=/usr/java/default</code></p></blockquote><h2 id="将hadoop执行命令添加到path环境变量里"><a href="#将hadoop执行命令添加到path环境变量里" class="headerlink" title="将hadoop执行命令添加到path环境变量里"></a>将hadoop执行命令添加到path环境变量里</h2><blockquote><p><code>vim /etc/profile</code></p><p>添加：<code>export PATH=$PATH:/usr/local/hadoop/bin:/usr/local/hadoop/sbin</code></p><p>执行： <code>source /etc/profile</code></p></blockquote><p><strong>以这台虚拟机做master，复制出三台虚拟机做slaver，配置IP和网关，改主机名分别为slave1, slave2, slave3</strong></p><h1 id="启动Hadoop"><a href="#启动Hadoop" class="headerlink" title="启动Hadoop"></a>启动Hadoop</h1><h2 id="配置所有虚拟机"><a href="#配置所有虚拟机" class="headerlink" title="配置所有虚拟机"></a>配置所有虚拟机</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">cd /usr/local/hadoop/etc/hadoop</div><div class="line">vim core-site.xml # master管理结点，slave知道master</div><div class="line"><span class="comment">&lt;!-- 在&lt;configuration&gt;内添加：--&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.defaultFS<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://master:9000<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div></pre></td></tr></table></figure><blockquote><p>修改所有虚拟机的host文件</p><p><code>vim /etc/hosts</code></p></blockquote><p><em>eg</em></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">192.168.137.100 master</div><div class="line">192.168.137.101 slave1</div><div class="line">192.168.137.102 slave2</div><div class="line">192.168.137.103 slave3</div></pre></td></tr></table></figure><blockquote><p>格式化namenode(仅master)</p><p><code>hdfs namenode -format</code></p><p>启动namenode(仅master)</p><p><code>hadoop-daeman.sh start namenode</code></p><p>输入jps，出现NameNode则namenode启动</p><p>启动datanode(slaver)</p><p><code>hadoop-daemon.sh start datanode</code></p></blockquote>]]></content>
      
      <categories>
          
          <category> Big Data </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hadoop </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>laravel基础</title>
      <link href="/2017/09/13/laravel%E5%9F%BA%E7%A1%80/"/>
      <url>/2017/09/13/laravel%E5%9F%BA%E7%A1%80/</url>
      <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css"><h2 id="安装错误"><a href="#安装错误" class="headerlink" title="安装错误"></a>安装错误</h2><p><img src="http://img.mukewang.com/59545e4a0001c20e05000115.jpg" alt="http://img.mukewang.com/59545e4a0001c20e05000115.jpg"></p><blockquote><p>solution:</p><p>打开运行环境中的php.ini，用快速查找找到 extension=php_openssl.dll 此项，然后把该代码前面的分号去掉，最后重启运行环境，刷新页面</p></blockquote><h1 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h1><blockquote><p><strong>作用: 将请求映射到程序（处理函数）</strong></p><p><em>laravel/app/Http/routes.php:</em></p></blockquote><a id="more"></a><ol><li>基础路由</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Route::get(<span class="string">'basic1'</span>,<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</div><div class="line"><span class="keyword">return</span> <span class="string">'Hello World'</span>;</div><div class="line">&#125;);</div></pre></td></tr></table></figure><ol><li>多请求路由</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Route::match([<span class="string">'get'</span>,<span class="string">'post'</span>], <span class="string">'multy'</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</div><div class="line"><span class="keyword">return</span> <span class="string">'multy'</span>;</div><div class="line">&#125;);</div></pre></td></tr></table></figure><ol><li>所有请求种类路由</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Route::any(<span class="string">'allRequest'</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</div><div class="line"><span class="keyword">return</span> <span class="string">'all request'</span>;</div><div class="line">&#125;);</div></pre></td></tr></table></figure><ol><li>路由参数</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Route::get(<span class="string">'user/&#123;id&#125;/&#123;name?&#125;'</span>,<span class="function"><span class="keyword">function</span> <span class="params">($id,$name=null)</span> </span>&#123;</div><div class="line"><span class="keyword">return</span> <span class="string">'User-id'</span>.$id.<span class="string">'User-name:'</span>.$name;</div><div class="line">&#125;)-&gt;where([<span class="string">'id'</span>=&gt;<span class="string">'[0-9]+'</span>,<span class="string">'name'</span>=&gt;<span class="string">'[A-Za-z]+'</span>]);</div></pre></td></tr></table></figure><ol><li>路由别名</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Route::get(<span class="string">'user/center'</span>,[<span class="string">'as'</span>=&gt;<span class="string">'center'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</div><div class="line"><span class="keyword">return</span> route(<span class="string">'center'</span>);</div><div class="line">&#125;]);</div></pre></td></tr></table></figure><ol><li>路由群组</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">Route::group([<span class="string">'prefix'</span>=&gt;<span class="string">'member'</span>], <span class="function"><span class="keyword">function</span> <span class="params">()</span></span>&#123;</div><div class="line">Route::get(<span class="string">'basic2'</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</div><div class="line"><span class="keyword">return</span> <span class="string">'Basic2'</span>;</div><div class="line">&#125;);</div><div class="line">Route::get(<span class="string">'user/center'</span>,[<span class="string">'as'</span>=&gt;<span class="string">'center'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</div><div class="line"><span class="keyword">return</span> route(<span class="string">'center'</span>);</div><div class="line">&#125;]);</div><div class="line">&#125;);</div></pre></td></tr></table></figure><ol><li>路由输出视图</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Route::get(<span class="string">'view'</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span></span>&#123;</div><div class="line"><span class="keyword">return</span> view(<span class="string">'welcome'</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure><h1 id="控制器"><a href="#控制器" class="headerlink" title="控制器"></a>控制器</h1><blockquote><p><em>laravel/app/Http/Controllers:</em></p><p>路由将请求发送给控制器，控制器处理请求并返回相应</p><p>路由和控制器中的方法关联：</p></blockquote><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">Route::get(<span class="string">'member/info'</span>,<span class="string">'MemberController@info'</span>);</div><div class="line"></div><div class="line">Route::get(<span class="string">'member/info'</span>,[<span class="string">'uses'</span>=&gt;<span class="string">'MemberController@info'</span>]);</div><div class="line"></div><div class="line">Route::get(<span class="string">'member/info'</span>,[</div><div class="line"><span class="string">'uses'</span> =&gt; <span class="string">'MemberController@info'</span>,</div><div class="line"><span class="string">'as'</span> =&gt; <span class="string">'member_info'</span></div><div class="line">]);</div><div class="line"></div><div class="line">Route::get(<span class="string">'member/find/&#123;id&#125;'</span>,<span class="string">'MemberController@find'</span>)</div><div class="line">-&gt;where(<span class="string">'id'</span>,<span class="string">'[0-9]+'</span>);</div></pre></td></tr></table></figure><blockquote><p>控制器中有对应路由请求的函数：</p></blockquote><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">namespace</span> <span class="title">App</span>\<span class="title">Http</span>\<span class="title">Controllers</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MemberController</span> <span class="keyword">extends</span> <span class="title">Controller</span> </span>&#123;</div><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">info</span><span class="params">()</span> </span>&#123;</div><div class="line"><span class="comment">//return 'member-info';</span></div><div class="line"><span class="keyword">return</span> route(<span class="string">'member_info'</span>);</div><div class="line">&#125;</div><div class="line"><span class="comment">// 接收请求参数</span></div><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">find</span><span class="params">($id)</span> </span>&#123;</div><div class="line"><span class="keyword">return</span> <span class="string">'member'</span>.$id;</div><div class="line">&#125;</div><div class="line"><span class="comment">// 返回一个视图，向视图中传递数据</span></div><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">toInfo</span><span class="params">()</span> </span>&#123;</div><div class="line"><span class="keyword">return</span> view(<span class="string">'member/info'</span>,[</div><div class="line"><span class="string">'name'</span> =&gt; <span class="string">'shaun'</span>,</div><div class="line"><span class="string">'age'</span> =&gt; <span class="number">18</span></div><div class="line">]);</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h1 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h1><blockquote><p><em>laravel/resources/views:</em></p><p>控制器的方法返回一个视图，并传递参数给视图，视图使用<strong>模板</strong>解析展示数据</p><p>laravel 默认模板文件名为：xxx.blade.php</p><p>用  的形式获取变量值</p></blockquote><h1 id="模型"><a href="#模型" class="headerlink" title="模型"></a>模型</h1><blockquote><p><em>laravel/app:</em></p></blockquote><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">namespace</span> <span class="title">App</span>;</div><div class="line"></div><div class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Database</span>\<span class="title">Eloquent</span>\<span class="title">Model</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Member</span> <span class="keyword">extends</span> <span class="title">Model</span> </span>&#123;</div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getMember</span><span class="params">()</span> </span>&#123;</div><div class="line"><span class="keyword">return</span> <span class="string">'member name is shaun'</span>;</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h1 id="数据库操作"><a href="#数据库操作" class="headerlink" title="数据库操作"></a>数据库操作</h1><h2 id="DB-facade"><a href="#DB-facade" class="headerlink" title="DB facade"></a>DB facade</h2><blockquote><p>配置：laravel/config/database.php</p><p>laravel/.env</p><p>使用 DB facade 实现 CURD</p></blockquote><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">namespace</span> <span class="title">App</span>\<span class="title">Http</span>\<span class="title">Controllers</span>;</div><div class="line"></div><div class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Support</span>\<span class="title">Facades</span>\<span class="title">DB</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserController</span> <span class="keyword">extends</span> <span class="title">Controller</span> </span>&#123;</div><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">curd</span><span class="params">()</span> </span>&#123;</div><div class="line"><span class="comment">// 返回是否插入成功</span></div><div class="line">$bool = DB::insert(<span class="string">'insert into user(name,sex,phone,email) VALUES(?,?,?,?) '</span>,</div><div class="line">[<span class="string">'zcl'</span>,<span class="string">'1'</span>,<span class="string">'1365656556'</span>,<span class="string">'zcl@163.com'</span>]);</div><div class="line">var_dump($bool);</div><div class="line"><span class="comment">// 返回查询结果的数组</span></div><div class="line">$users = DB::select(<span class="string">'select* from user'</span>);</div><div class="line">dd($users); <span class="comment">// json格式</span></div><div class="line"><span class="comment">// 返回变动的数量</span></div><div class="line">$num = DB::update(<span class="string">'update user set age=? where name = ?'</span>,</div><div class="line">[<span class="number">18</span>,<span class="string">'zjm'</span>]);</div><div class="line">var_dump($num);</div><div class="line">      <span class="comment">// 返回删除的条数</span></div><div class="line">$num = DB::delete(<span class="string">'delete from user where id=?'</span>,</div><div class="line">[<span class="number">3</span>]);</div><div class="line">var_dump($num);</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h2 id="查询构造器"><a href="#查询构造器" class="headerlink" title="查询构造器"></a>查询构造器</h2><blockquote><p>Laravel 查询构造器 (query builder) 提供接口，用来建立及执行数据库查找语法</p><p>使用 PDO 参数绑定，以保护应用程序免于 SQL 注入，传入的参数不需要额外转义特殊字符</p><p>基本可以满足所有的数据库操作</p></blockquote><ul><li>使用查询构造器新增数据</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 返回bool插入是否成功</span></div><div class="line">DB::table(<span class="string">'user'</span>)-&gt;insert([</div><div class="line"><span class="string">'name'</span> =&gt; <span class="string">'ms'</span>,</div><div class="line"><span class="string">'sex'</span> =&gt; <span class="string">'0'</span>,</div><div class="line"><span class="string">'age'</span> =&gt; <span class="string">'18'</span>,</div><div class="line"><span class="string">'phone'</span> =&gt; <span class="string">'13666666666'</span>,</div><div class="line"><span class="string">'email'</span> =&gt; <span class="string">'maoshuo@gmail.com'</span></div><div class="line">]);</div><div class="line"><span class="comment">// 返回插入的 id</span></div><div class="line">$id = DB::table(<span class="string">'user'</span>)-&gt;insertGetId([</div><div class="line"><span class="string">'name'</span> =&gt; <span class="string">'shaun'</span>,</div><div class="line"><span class="string">'age'</span> =&gt; <span class="number">19</span></div><div class="line">]);</div><div class="line"><span class="comment">// 插入多条记录，二维数组存放信息，返回bool</span></div><div class="line">DB::table(<span class="string">'user'</span>)-&gt;insert([</div><div class="line">[<span class="string">'name'</span> =&gt; <span class="string">'张三'</span>, <span class="string">'age'</span> =&gt; <span class="number">21</span>],</div><div class="line">    [<span class="string">'name'</span> =&gt; <span class="string">'李四'</span>, <span class="string">'age'</span> =&gt; <span class="number">22</span>],</div><div class="line">]);</div></pre></td></tr></table></figure><h2 id="使用查询构造器更新数据"><a href="#使用查询构造器更新数据" class="headerlink" title="使用查询构造器更新数据"></a>使用查询构造器更新数据</h2><ul><li>更新数据</li><li>自增自减</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 返回受影响的行数</span></div><div class="line">$num = DB::table(<span class="string">'user'</span>)</div><div class="line">-&gt;where(<span class="string">'id'</span>,<span class="number">7</span>)</div><div class="line">-&gt;update([</div><div class="line"><span class="string">'name'</span> =&gt; <span class="string">'zjm'</span></div><div class="line">]);</div><div class="line">var_dump($num);</div><div class="line"><span class="comment">// 自减同时更新子段值</span></div><div class="line">$num = DB::table(<span class="string">'user'</span>)</div><div class="line">-&gt;where([<span class="string">'id'</span>=&gt;<span class="number">7</span>]) <span class="comment">// -&gt;where('id',7)</span></div><div class="line">    -&gt;decrement(<span class="string">'age'</span>,<span class="number">3</span>, [<span class="string">'name'</span> =&gt; <span class="string">'zjmhaha'</span>]);<span class="comment">//increment 自增 decrement 自减</span></div><div class="line">var_dump($num);</div></pre></td></tr></table></figure><h2 id="使用查询构造器删除数据"><a href="#使用查询构造器删除数据" class="headerlink" title="使用查询构造器删除数据"></a>使用查询构造器删除数据</h2><ul><li>delete</li><li>trancate——清空表…</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">$num = DB::table(<span class="string">'user'</span>)</div><div class="line">-&gt;where(<span class="string">'id'</span>,<span class="number">7</span>)</div><div class="line">-&gt;delete();</div><div class="line">var_dump($num);</div><div class="line">$num = DB::table(<span class="string">'user'</span>)</div><div class="line">-&gt;where(<span class="string">'id'</span>, <span class="string">'&gt;='</span>, <span class="number">13</span>)</div><div class="line">-&gt;delete();</div><div class="line">var_dump($num);</div></pre></td></tr></table></figure><h2 id="使用查询构造器查询数据"><a href="#使用查询构造器查询数据" class="headerlink" title="使用查询构造器查询数据"></a>使用查询构造器查询数据</h2><ul><li>get()——获取结果集所有数据</li><li>first()——获取结果集中第一条</li><li>where()——查询条件，whereRaw()——多条件查询</li><li>pluck()——返回结果集中指定的字段</li><li>lists()——类似pluck</li><li>select()——查询指定的字段</li><li>chunk() ——分页返回所有结果集</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">search</span><span class="params">()</span> </span>&#123;</div><div class="line"><span class="comment">// get() 获取表中所有数据</span></div><div class="line">$users = DB::table(<span class="string">'user'</span>)-&gt;get();</div><div class="line"><span class="comment">// first 获取结果集第一条</span></div><div class="line">$users = DB::table(<span class="string">'user'</span>)</div><div class="line">           -&gt;orderBy(<span class="string">'id'</span>,<span class="string">'desc'</span>)   <span class="comment">// 倒序</span></div><div class="line">           -&gt;first();</div><div class="line">$users = DB::table(<span class="string">'user'</span>)</div><div class="line">-&gt;where(<span class="string">'age'</span>,<span class="string">'&gt;='</span>,<span class="number">20</span>)</div><div class="line">-&gt;get();</div><div class="line"><span class="comment">// 多条件查询</span></div><div class="line">$users = DB::table(<span class="string">'user'</span>)</div><div class="line">-&gt;whereRaw(<span class="string">'id &gt;= ? and age &gt; ?'</span>, [<span class="number">2</span>, <span class="number">20</span>])</div><div class="line">-&gt;get();</div><div class="line"><span class="comment">// pluck 返回结果集中指定的字段</span></div><div class="line">$name = DB::table(<span class="string">'user'</span>)-&gt;pluck(<span class="string">'name'</span>);</div><div class="line"><span class="comment">//$name = DB::table('user')-&gt;lists('name', 'id');</span></div><div class="line"><span class="comment">//dd($name);</span></div><div class="line"><span class="comment">//select 查询指定的字段</span></div><div class="line">$users = DB::table(<span class="string">'user'</span>)</div><div class="line">-&gt;select(<span class="string">'id'</span>,<span class="string">'name'</span>,<span class="string">'age'</span>)</div><div class="line">-&gt;get();</div><div class="line"><span class="comment">// chunk</span></div><div class="line"><span class="keyword">echo</span> <span class="string">'&lt;pre&gt;'</span>;</div><div class="line">$num = DB::table(<span class="string">'user'</span>)-&gt;chunk(<span class="number">2</span>, <span class="function"><span class="keyword">function</span><span class="params">($users)</span> </span>&#123;</div><div class="line">var_dump($users);</div><div class="line">&#125;);</div><div class="line">var_dump($num);</div><div class="line">&#125;</div></pre></td></tr></table></figure><h2 id="查询构造器中的聚合函数"><a href="#查询构造器中的聚合函数" class="headerlink" title="查询构造器中的聚合函数"></a>查询构造器中的聚合函数</h2><ul><li>count()</li><li>max()</li><li>min()</li><li>avg()</li><li>sum()</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 聚合函数</span></div><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">aggregate</span><span class="params">()</span> </span>&#123;</div><div class="line">$num = DB::table(<span class="string">'user'</span>)-&gt;count();</div><div class="line">$num = DB::table(<span class="string">'user'</span>)-&gt;max(<span class="string">'age'</span>);</div><div class="line">$num = DB::table(<span class="string">'user'</span>)-&gt;min(<span class="string">'age'</span>);</div><div class="line">$num = DB::table(<span class="string">'user'</span>)-&gt;avg(<span class="string">'age'</span>);</div><div class="line">$num = DB::table(<span class="string">'user'</span>)-&gt;sum(<span class="string">'age'</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure><h1 id="数据库操作-Eloquent-ORM"><a href="#数据库操作-Eloquent-ORM" class="headerlink" title="数据库操作-Eloquent ORM"></a>数据库操作-Eloquent ORM</h1><blockquote><p>数据表和一个相对应的模型 (Model) 用于和数据表交互</p><p>查询构造器在ORM中依旧有应用</p></blockquote><h2 id="模型建立"><a href="#模型建立" class="headerlink" title="模型建立"></a>模型建立</h2><blockquote><p><em>laravel/app:</em></p></blockquote><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">namespace</span> <span class="title">App</span>;</div><div class="line"></div><div class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Database</span>\<span class="title">Eloquent</span>\<span class="title">Model</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Model</span> </span>&#123;</div><div class="line"><span class="comment">// 指定表名，默认为 students</span></div><div class="line"><span class="keyword">protected</span> $table = <span class="string">'student'</span>;</div><div class="line"><span class="comment">// 指定id,默认为id</span></div><div class="line"><span class="keyword">protected</span> $id = <span class="string">'id'</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h2 id="ORM-查询"><a href="#ORM-查询" class="headerlink" title="ORM 查询"></a>ORM 查询</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">orm</span><span class="params">()</span> </span>&#123;</div><div class="line"><span class="comment">// 查询所有</span></div><div class="line">$students = Student::all();</div><div class="line"><span class="comment">// 按主键查询</span></div><div class="line">$student = Student::find(<span class="number">1</span>);</div><div class="line"><span class="comment">// 找不到id报错</span></div><div class="line">$student = Student::findOrFail(<span class="number">2</span>);</div><div class="line">  <span class="comment">// 查询构造器在ORM中使用</span></div><div class="line">$students = Student::get();</div><div class="line">$student = Student::where(<span class="string">'age'</span>,<span class="string">'&gt;'</span>,<span class="number">18</span>)</div><div class="line">-&gt;orderBy(<span class="string">'age'</span>,<span class="string">'desc'</span>)</div><div class="line">-&gt;first();</div><div class="line">dd($student);</div><div class="line"><span class="keyword">echo</span> <span class="string">'&lt;pre&gt;'</span>;</div><div class="line">Student::chunk(<span class="number">2</span>, <span class="function"><span class="keyword">function</span> <span class="params">($students)</span> </span>&#123;</div><div class="line">var_dump($students);</div><div class="line">&#125;);</div><div class="line">$num = Student::count();</div><div class="line">$max = Student::where(<span class="string">'age'</span>,<span class="string">'&gt;'</span>,<span class="number">18</span>)-&gt;max(<span class="string">'age'</span>);</div><div class="line">var_dump($max);</div><div class="line">&#125;</div></pre></td></tr></table></figure><h2 id="ORM中新增，自定义时间戳及批量赋值"><a href="#ORM中新增，自定义时间戳及批量赋值" class="headerlink" title="ORM中新增，自定义时间戳及批量赋值"></a>ORM中新增，自定义时间戳及批量赋值</h2><ul><li>通过模型新增数据（自定义时间戳）</li><li>使用模型的Create方法新增数据（批量赋值）</li></ul><h3 id="模型属性的定义，方法重写"><a href="#模型属性的定义，方法重写" class="headerlink" title="模型属性的定义，方法重写"></a>模型属性的定义，方法重写</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">namespace</span> <span class="title">App</span>;</div><div class="line"></div><div class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Database</span>\<span class="title">Eloquent</span>\<span class="title">Model</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Model</span> </span>&#123;</div><div class="line"><span class="comment">// 指定表名，默认为 students</span></div><div class="line"><span class="keyword">protected</span> $table = <span class="string">'student'</span>;</div><div class="line"><span class="comment">// 指定id,默认为id</span></div><div class="line"><span class="keyword">protected</span> $id = <span class="string">'id'</span>;</div><div class="line"></div><div class="line"><span class="comment">// 指定允许批量赋值的字段</span></div><div class="line"><span class="keyword">protected</span> $fillable = [<span class="string">'name'</span>, <span class="string">'age'</span>];</div><div class="line"><span class="comment">//  指定不允许批量赋值的字段</span></div><div class="line"><span class="comment">//protected $guarded = [];</span></div><div class="line"><span class="comment">// 关闭created_at 和 updated_at</span></div><div class="line"><span class="keyword">public</span> $timestamps = <span class="keyword">true</span>;</div><div class="line"></div><div class="line"><span class="comment">// 自意义返回时间戳</span></div><div class="line"><span class="comment">/*protected function getDateFormat() &#123;</span></div><div class="line"><span class="comment">return time();</span></div><div class="line"><span class="comment">&#125;*/</span></div><div class="line"></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">/*protected function asDateTime( $value ) &#123;</span></div><div class="line"><span class="comment">return $value;</span></div><div class="line"><span class="comment">&#125;*/</span></div><div class="line">&#125;</div></pre></td></tr></table></figure><blockquote><p><em>注：</em>由于laravel自定义添加的created_at时间不是北京时间，可以将数据库 created_at字段类型改为 int，重写模型的 getDateFormat()方法，如果希望返回时间戳(数字形式)，再重写asDateTime()函数</p></blockquote><h3 id="四种常用的ORM新增"><a href="#四种常用的ORM新增" class="headerlink" title="四种常用的ORM新增"></a>四种常用的ORM新增</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">orm2</span><span class="params">()</span> </span>&#123;</div><div class="line"><span class="comment">// 使用模型新增数据</span></div><div class="line"><span class="comment">/*$student = new Student();</span></div><div class="line"><span class="comment">$student-&gt;name = 'ms';</span></div><div class="line"><span class="comment">$student-&gt;age = 18;</span></div><div class="line"><span class="comment">$bool = $student-&gt;save();</span></div><div class="line"><span class="comment">dd($bool);*/</span></div><div class="line"><span class="comment">/*$Student = Student::find(3);</span></div><div class="line"><span class="comment">echo $Student-&gt;created_at.'&lt;br&gt;';</span></div><div class="line"><span class="comment">echo date('Y-m-d H:i:s', 1464509164);// 只对于数字时间戳*/</span></div><div class="line"></div><div class="line"><span class="comment">// 使用模型的Create方法新增数据，这里的属性必须为模型中指定允许批量赋值的字段</span></div><div class="line"><span class="comment">/*$student = Student::create([</span></div><div class="line"><span class="comment">'name' =&gt; 'zjm',</span></div><div class="line"><span class="comment">'age' =&gt; 18</span></div><div class="line"><span class="comment">]);</span></div><div class="line"><span class="comment">dd($student);*/</span></div><div class="line"><span class="comment">//firstOrCreate() 按属性查找，没有找到则新加</span></div><div class="line"><span class="comment">/*$student = Student::firstOrCreate([</span></div><div class="line"><span class="comment">'name' =&gt; 'zjm22333'</span></div><div class="line"><span class="comment">]);</span></div><div class="line"><span class="comment">dd($student);*/</span></div><div class="line"><span class="comment">//firstOrNew() 按属性查找，没有则建立新的实例，自己调用save()保存</span></div><div class="line">$student = Student::firstOrNew([</div><div class="line"><span class="string">'name'</span> =&gt; <span class="string">'zjm123123'</span></div><div class="line">]);</div><div class="line">$student-&gt;save();</div><div class="line">dd($student);</div><div class="line">&#125;</div></pre></td></tr></table></figure><p><em>注：</em> 使用模型的Create方法新增数据，这里的属性必须为模型中指定允许批量赋值的</p><h2 id="使用Eloquent-ORM修改数据"><a href="#使用Eloquent-ORM修改数据" class="headerlink" title="使用Eloquent ORM修改数据"></a>使用Eloquent ORM修改数据</h2><ul><li>通过模型更新</li><li>结合查询语句 批量更新</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$student = Student::find(<span class="number">8</span>);</div><div class="line">$student-&gt;name = <span class="string">'shaun'</span>;</div><div class="line">$bool = $student-&gt;save();</div><div class="line">var_dump($bool);</div><div class="line">Student::where(<span class="string">'id'</span>,<span class="string">'&gt;'</span>,<span class="number">7</span>)-&gt;update([</div><div class="line"><span class="string">'age'</span> =&gt; <span class="number">23</span></div><div class="line">]);</div></pre></td></tr></table></figure><blockquote><p><em>注：</em> 使用ORM的save()方法更新子段必须使模型的主键和数据库表主键相同，<strong>包括大小写</strong></p><p>模型中默认主键名：<strong>id</strong></p><p>重写模型中主键名：<code>protected $primaryKey = &#39;Id&#39;;</code></p></blockquote><h2 id="使用Eloquent-ORM删除数据"><a href="#使用Eloquent-ORM删除数据" class="headerlink" title="使用Eloquent ORM删除数据"></a>使用Eloquent ORM删除数据</h2><ul><li>通过模型删除</li><li>通过主键值删除</li><li>根据指定条件删除</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 通过模型删除（没有会报错）</span></div><div class="line">$student = Student::find(<span class="number">9</span>);</div><div class="line">$bool = $student-&gt;delete();</div><div class="line"><span class="comment">// 通过主键删除,返回删除个数</span></div><div class="line">$num = Student::destroy(<span class="number">7</span>);</div><div class="line">$num = Student::destroy(<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>);</div><div class="line">$num = Student::destroy([<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>]);</div><div class="line"><span class="comment">// 条件删除</span></div><div class="line">$num = Student::where(<span class="string">'id'</span>, <span class="string">'&gt;'</span>, <span class="number">6</span>)-&gt;delete();</div></pre></td></tr></table></figure><h1 id="Blade模板引擎"><a href="#Blade模板引擎" class="headerlink" title="Blade模板引擎"></a>Blade模板引擎</h1><h2 id="Blade模板引擎简介及模板继承的使用"><a href="#Blade模板引擎简介及模板继承的使用" class="headerlink" title="Blade模板引擎简介及模板继承的使用"></a>Blade模板引擎简介及模板继承的使用</h2><blockquote><p>页面公共的部分提取出来形成一个父类，方便开发和维护</p><ul><li>@section…@show</li><li>@yield</li></ul></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">@extends(&apos;layouts&apos;)&lt;!-- 继承 views下的基类视图 --&gt;</div><div class="line">@section(&apos;header&apos;)</div><div class="line">@parent &lt;!-- 父模板内容 --&gt;</div><div class="line">self_content</div><div class="line">@stop</div></pre></td></tr></table></figure><h2 id="基础语法及include的使用"><a href="#基础语法及include的使用" class="headerlink" title="基础语法及include的使用"></a>基础语法及include的使用</h2><blockquote><p>在控制器中返回视图并传入参数</p></blockquote><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">return</span> view(<span class="string">'student.section1'</span>, [</div><div class="line"><span class="string">'name'</span> =&gt; $name</div><div class="line">]);</div></pre></td></tr></table></figure><blockquote><p>在模板中输出参数值</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">&gt; &#123;&#123; $name &#125;&#125;</div><div class="line">&gt; &lt;!-- 调用php函数，执行php代码 --&gt;</div><div class="line">&gt; &#123;&#123; time() &#125;&#125;</div><div class="line">&gt; &#123;&#123; date(&apos;Y-m-d H:i:s&apos;, time()) &#125;&#125;</div><div class="line">&gt; &#123;&#123; in_array($name, $arr) ? &apos;true&apos; : &apos;false&apos;&#125;&#125;</div><div class="line">&gt; &#123;&#123; var_dump($arr) &#125;&#125;</div><div class="line">&gt; &lt;!-- 存在输出，不存在输出默认 --&gt;</div><div class="line">&gt; &#123;&#123; isset($name) ? $name:&apos;default&apos; &#125;&#125;</div><div class="line">&gt; &lt;!-- 可简化为： --&gt;</div><div class="line">&gt; &#123;&#123; $name or &apos;default&apos; &#125;&#125;</div><div class="line">&gt; &lt;!-- 原样输出 --&gt;</div><div class="line">&gt; @&#123;&#123; $name &#125;&#125;</div><div class="line">&gt; &lt;!-- 模板中的注释：不在页面源码中显示 --&gt;</div><div class="line">&gt; &#123;&#123; -- 你的注释 -- &#125;&#125;</div><div class="line">&gt; &lt;!-- 引入子视图 --&gt;</div><div class="line">&gt; @include(&apos;student.common1&apos;)</div><div class="line">&gt;</div></pre></td></tr></table></figure></blockquote><h2 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">@if ($name == &apos;zzz&apos;)</div><div class="line"> I&apos;m zzz</div><div class="line">@elseif($name == &apos;aaa&apos;)</div><div class="line">I&apos;m aaa</div><div class="line">@else</div><div class="line">...</div><div class="line">@endif</div><div class="line"></div><div class="line">@if(in_array($name, $arr))</div><div class="line">true</div><div class="line">@else</div><div class="line">false</div><div class="line">@endif</div><div class="line">@unless($name == &apos;zjm&apos;)&lt;!--if的取反--&gt;</div><div class="line">I&apos;m zjm</div><div class="line">@endunless</div><div class="line"></div><div class="line">@for($i=0; $i &lt; 10; $i++)</div><div class="line">&#123;&#123; $i &#125;&#125;</div><div class="line">@endfor</div><div class="line">                   </div><div class="line">@foreach($students as $student)</div><div class="line">   &lt;p&gt;&#123;&#123; $student-&gt;name &#125;&#125;&lt;/p&gt;        </div><div class="line">@endforeach</div><div class="line"></div><div class="line">@forelse($students as $student)</div><div class="line">&lt;p&gt;&#123;&#123; $student-&gt;name &#125;&#125;&lt;/p&gt;     </div><div class="line">@empty</div><div class="line">&lt;p&gt;无数据&lt;/p&gt;     </div><div class="line">@endforelse</div></pre></td></tr></table></figure><h2 id="模板中的URL"><a href="#模板中的URL" class="headerlink" title="模板中的URL"></a>模板中的URL</h2><ul><li>url()——通过路由名字</li><li>action()——通过制定控制器的方法名</li><li>route()——通过路由别名</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&#123;&#123; url('url) &#125;&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&#123;&#123; action('StudentController.urlTest') &#125;&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&#123;&#123; route('url') &#125;&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></div></pre></td></tr></table></figure><p>`</p>]]></content>
      
      <categories>
          
          <category> web服务 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> php框架 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>求所有LCS的简单算法及矩阵搜索算法</title>
      <link href="/2017/08/21/LCS/"/>
      <url>/2017/08/21/LCS/</url>
      <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css"><h1 id="动态规划——最长公共子序列（LCS）"><a href="#动态规划——最长公共子序列（LCS）" class="headerlink" title="动态规划——最长公共子序列（LCS）"></a>动态规划——最长公共子序列（LCS）</h1><h2 id="背景知识"><a href="#背景知识" class="headerlink" title="背景知识"></a>背景知识</h2><ul><li><strong>子序列：</strong> 原序列 <strong>X</strong>，将 <strong>X</strong> 中的元素组成新序列 <strong>Z</strong>，这些元素的先后位置与原序列相对一致，<strong>Z</strong> 是 <strong>X</strong> 的一个子序列</li></ul><ul><li><strong>最长公共子序列：</strong> 若 <strong>Z</strong> 是 <strong>X</strong> 的子序列 , <strong>Z</strong> 也是 <strong>Y</strong> 的子序列，且不存在比 <strong>Z</strong> 更长的 <strong>X</strong> 和 <strong>Y</strong> 的公共子序列，则称 <strong>Z</strong> 是 <strong>X</strong> 和 <strong>Y</strong> 的最长公共子序列 ，记为 <strong>Z ∈LCS( X , Y) </strong>。最长公共子序列往往不止一个</li></ul><blockquote><p>eg:  <strong>X</strong> = { A，B，C，B，D，A，B }，<strong>Y</strong> = { B，D，C，A，B，A }，则 { B，C，B，A } 是 <strong>X</strong> 和 <strong>Y</strong> 的一条公共子序列，由于没有更长的公共子序列，故也是一条最长公共子序列</p></blockquote><h2 id="最长公共子序列的结构"><a href="#最长公共子序列的结构" class="headerlink" title="最长公共子序列的结构"></a>最长公共子序列的结构</h2><blockquote><p>在穷举法中，将 <strong>X</strong> 中所有子序列，检查它是否也是 <strong>Y</strong>  的子序列，确定是公共子序列后记录最长的公共子序列。设 <strong>X</strong> 有 m 个元素，则它的子序列有 2<sup>m</sup>个，穷举法需要指数时间</p></blockquote><h3 id="最长公共子序列具有最优子结构"><a href="#最长公共子序列具有最优子结构" class="headerlink" title="最长公共子序列具有最优子结构"></a>最长公共子序列具有最优子结构</h3><blockquote><p>设序列 <strong>X</strong> = { x<sub>1</sub>，x<sub>2</sub>，<strong>···</strong>，x<sub>m</sub> } 和 <strong>Y</strong> = { y<sub>1</sub>，y<sub>2</sub>，<strong>···</strong>，y<sub>n</sub> } 的最长公共子序列为 <strong>Z</strong> = { z<sub>1</sub>，z<sub>2</sub>，<strong>···</strong>，z<sub>k</sub> }，则</p><ol><li>若 x<sub>m</sub> = y<sub>n</sub>，则 z<sub>k</sub> =  x<sub>m</sub> = y<sub>n</sub>，且<strong>Z</strong><sub>k-1</sub> 是 <strong>X</strong><sub>m-1</sub> 和 <strong>Y</strong><sub>n-1</sub> 的最长公共子序列</li><li>若 x<sub>m</sub> ≠ y<sub>n</sub>，且 z<sub>k</sub> ≠  x<sub>m</sub>，则 <strong>Z</strong> 是 <strong>X</strong><sub>m-1</sub> 和 <strong>Y</strong> 的最长公共子序列</li><li>若 x<sub>m</sub> ≠ y<sub>n</sub>，且 z<sub>k</sub> ≠  y<sub>n</sub>，则 <strong>Z</strong> 是 <strong>X</strong> 和 <strong>Y</strong><sub>n-1</sub> 的最长公共子序列</li></ol></blockquote><a id="more"></a><h3 id="子问题的递归结构"><a href="#子问题的递归结构" class="headerlink" title="子问题的递归结构"></a>子问题的递归结构</h3><blockquote><p>如果从顶向下计算，将出现大量的子问题重叠…动态规划的基本思想是从低向上计算不同子问题，通过底部子问题的解，得出顶部问题的解。最终目的是得到最顶上问题的解。</p><p>建立两个矩阵 c 和 b，矩阵 c 用来存放 i, j 位置的最长公共子序列长度(简记为LCS长度)，矩阵 b 存放i, j 位置是由哪个方向来的，方便回溯 </p><p>建立递归关系如下：</p></blockquote><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>c</mi><mo>[</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo>]</mo><mo>=</mo><mrow><mo fence="true">{</mo><mtable><mtr><mtd><mrow><mn>0</mn><mo separator="true">,</mo></mrow></mtd><mtd><mrow><mi>i</mi><mo>=</mo><mn>0</mn><mtext> </mtext><mi>o</mi><mi>r</mi><mtext> </mtext><mi>j</mi><mo>=</mo><mn>0</mn></mrow></mtd></mtr><mtr><mtd><mrow><mi>c</mi><mo>[</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo separator="true">,</mo><mi>j</mi><mo>−</mo><mn>1</mn><mo>]</mo><mo>+</mo><mn>1</mn><mo separator="true">,</mo></mrow></mtd><mtd><mrow><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo>&gt;</mo><mn>0</mn><mtext> </mtext><mi>a</mi><mi>n</mi><mi>d</mi><mtext> </mtext><msub><mi>x</mi><mi>i</mi></msub><mo>=</mo><msub><mi>y</mi><mi>j</mi></msub></mrow></mtd></mtr><mtr><mtd><mrow><mi>m</mi><mi>a</mi><mi>x</mi><mo>(</mo><mi>c</mi><mo>[</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo separator="true">,</mo><mi>j</mi><mo>]</mo><mo separator="true">,</mo><mi>c</mi><mo>[</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo>−</mo><mn>1</mn><mo>]</mo><mo>)</mo><mo separator="true">,</mo></mrow></mtd><mtd><mrow><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo>&gt;</mo><mn>0</mn><mtext> </mtext><mi>a</mi><mi>n</mi><mi>d</mi><mtext> </mtext><msub><mi>x</mi><mi>i</mi></msub><mo>≠</mo><msub><mi>y</mi><mi>j</mi></msub></mrow></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">c[i,j]=\begin{cases}0, &amp; i=0\ or\ j=0\\c[i-1,j-1]+1,&amp;i,j&gt;0\ and\ x_i=y_j\\max(c[i-1,j],c[i,j-1]), &amp;i,j&gt;0\ and\  x_i\ne y_j\end{cases}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:2.41em;"></span><span class="strut bottom" style="height:4.32em;vertical-align:-1.9099999999999997em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">c</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mrel">=</span><span class="minner displaystyle textstyle uncramped"><span class="style-wrap reset-textstyle textstyle uncramped"><span class="delimsizing mult"><span class="vlist"><span style="top:0.9500099999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="delimsizinginner delim-size4"><span>⎩</span></span></span><span style="top:0.9500099999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-0.000010000000000287557em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="delimsizinginner delim-size4"><span>⎨</span></span></span><span style="top:-1.1500100000000002em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-1.4500200000000003em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="delimsizinginner delim-size4"><span>⎧</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist"><span style="top:-1.4020000000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathrm">0</span><span class="mpunct">,</span></span></span><span style="top:0.0379999999999997em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathit">c</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">−</span><span class="mord mathrm">1</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mbin">−</span><span class="mord mathrm">1</span><span class="mclose">]</span><span class="mbin">+</span><span class="mord mathrm">1</span><span class="mpunct">,</span></span></span><span style="top:1.4779999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathit">m</span><span class="mord mathit">a</span><span class="mord mathit">x</span><span class="mopen">(</span><span class="mord mathit">c</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">−</span><span class="mord mathrm">1</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mord mathit">c</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mbin">−</span><span class="mord mathrm">1</span><span class="mclose">]</span><span class="mclose">)</span><span class="mpunct">,</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist"><span style="top:-1.4020000000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathrm">0</span><span class="mord mspace"> </span><span class="mord mathit">o</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mord mspace"> </span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mrel">=</span><span class="mord mathrm">0</span></span></span><span style="top:0.0379999999999997em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mrel">&gt;</span><span class="mord mathrm">0</span><span class="mord mspace"> </span><span class="mord mathit">a</span><span class="mord mathit">n</span><span class="mord mathit">d</span><span class="mord mspace"> </span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mrel">=</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span><span style="top:1.4779999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mrel">&gt;</span><span class="mord mathrm">0</span><span class="mord mspace"> </span><span class="mord mathit">a</span><span class="mord mathit">n</span><span class="mord mathit">d</span><span class="mord mspace"> </span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mrel">≠</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span></span><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi><mo>[</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo>]</mo><mo>=</mo><mrow><mo fence="true">{</mo><mtable><mtr><mtd><mrow><mn>1</mn><mo separator="true">,</mo></mrow></mtd><mtd><mrow><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo>&gt;</mo><mn>0</mn><mtext> </mtext><mi>a</mi><mi>n</mi><mi>d</mi><mtext> </mtext><msub><mi>x</mi><mi>i</mi></msub><mo>=</mo><msub><mi>y</mi><mi>j</mi></msub></mrow></mtd></mtr><mtr><mtd><mrow><mn>2</mn><mo separator="true">,</mo></mrow></mtd><mtd><mrow><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo>&gt;</mo><mn>0</mn><mtext> </mtext><mi>a</mi><mi>n</mi><mi>d</mi><mtext> </mtext><msub><mi>x</mi><mi>i</mi></msub><mo>≠</mo><msub><mi>y</mi><mi>j</mi></msub><mtext> </mtext><mi>a</mi><mi>n</mi><mi>d</mi><mtext> </mtext><mi>c</mi><mo>[</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo separator="true">,</mo><mi>j</mi><mo>]</mo><mo>&gt;</mo><mi>c</mi><mo>[</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo>−</mo><mn>1</mn><mo>]</mo></mrow></mtd></mtr><mtr><mtd><mrow><mn>3</mn><mo separator="true">,</mo></mrow></mtd><mtd><mrow><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo>&gt;</mo><mn>0</mn><mtext> </mtext><mi>a</mi><mi>n</mi><mi>d</mi><mtext> </mtext><msub><mi>x</mi><mi>i</mi></msub><mo>≠</mo><msub><mi>y</mi><mi>j</mi></msub><mtext> </mtext><mi>a</mi><mi>n</mi><mi>d</mi><mtext> </mtext><mi>c</mi><mo>[</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo separator="true">,</mo><mi>j</mi><mo>]</mo><mo>≤</mo><mi>c</mi><mo>[</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo>−</mo><mn>1</mn><mo>]</mo></mrow></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">b[i,j]=\begin{cases}1,&amp;i,j&gt;0\ and\ x_i=y_j\\2, &amp;i,j&gt;0\ and\  x_i\ne y_j\ and\ c[i-1,j]&gt;c[i,j-1]\\3, &amp;i,j&gt;0\ and\  x_i\ne y_j\ and\ c[i-1,j]\leq c[i,j-1]\end{cases}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:2.41em;"></span><span class="strut bottom" style="height:4.32em;vertical-align:-1.9099999999999997em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">b</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mrel">=</span><span class="minner displaystyle textstyle uncramped"><span class="style-wrap reset-textstyle textstyle uncramped"><span class="delimsizing mult"><span class="vlist"><span style="top:0.9500099999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="delimsizinginner delim-size4"><span>⎩</span></span></span><span style="top:0.9500099999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-0.000010000000000287557em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="delimsizinginner delim-size4"><span>⎨</span></span></span><span style="top:-1.1500100000000002em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-1.4500200000000003em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="delimsizinginner delim-size4"><span>⎧</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist"><span style="top:-1.4020000000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathrm">1</span><span class="mpunct">,</span></span></span><span style="top:0.0379999999999997em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathrm">2</span><span class="mpunct">,</span></span></span><span style="top:1.4779999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathrm">3</span><span class="mpunct">,</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist"><span style="top:-1.4020000000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mrel">&gt;</span><span class="mord mathrm">0</span><span class="mord mspace"> </span><span class="mord mathit">a</span><span class="mord mathit">n</span><span class="mord mathit">d</span><span class="mord mspace"> </span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mrel">=</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span><span style="top:0.0379999999999997em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mrel">&gt;</span><span class="mord mathrm">0</span><span class="mord mspace"> </span><span class="mord mathit">a</span><span class="mord mathit">n</span><span class="mord mathit">d</span><span class="mord mspace"> </span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mrel">≠</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mspace"> </span><span class="mord mathit">a</span><span class="mord mathit">n</span><span class="mord mathit">d</span><span class="mord mspace"> </span><span class="mord mathit">c</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">−</span><span class="mord mathrm">1</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mrel">&gt;</span><span class="mord mathit">c</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mbin">−</span><span class="mord mathrm">1</span><span class="mclose">]</span></span></span><span style="top:1.4779999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mrel">&gt;</span><span class="mord mathrm">0</span><span class="mord mspace"> </span><span class="mord mathit">a</span><span class="mord mathit">n</span><span class="mord mathit">d</span><span class="mord mspace"> </span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mrel">≠</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mspace"> </span><span class="mord mathit">a</span><span class="mord mathit">n</span><span class="mord mathit">d</span><span class="mord mspace"> </span><span class="mord mathit">c</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">−</span><span class="mord mathrm">1</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mrel">≤</span><span class="mord mathit">c</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mbin">−</span><span class="mord mathrm">1</span><span class="mclose">]</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span></span><p><img src="/images/lcs/lcs1.jpg" alt="lcs1.jpg"></p><blockquote><p>图中右下角 5(2) 表示 (8, 8) 位置的LCS长度为5，由上面的位置 (7, 8) 得到</p><p>右下角的值就是LCS长度，从该点通过矩阵 b 回溯，遇到 2 向上走，遇到 3 向左走，遇到 1 斜上走，当遇到边缘时(i=0 或 j=0)停止，既可以得到一条最长公共子序列</p><p>这样做只能得到两串的一条最长公共子序列，因为当 c[i−1,j]=c[i,j−1] 时可以向上也可以向左，但是我们指定它向左了，这样就不会出现不同的情况。于是，可以添加一种 b 的值：</p></blockquote><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi><mo>[</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo>]</mo><mo>=</mo><mn>4</mn><mo separator="true">,</mo><mtext> </mtext><mtext> </mtext><mtext> </mtext><mtext> </mtext><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo>&gt;</mo><mn>0</mn><mtext> </mtext><mi>a</mi><mi>n</mi><mi>d</mi><mtext> </mtext><msub><mi>x</mi><mi>i</mi></msub><mo>≠</mo><msub><mi>y</mi><mi>j</mi></msub><mtext> </mtext><mi>a</mi><mi>n</mi><mi>d</mi><mtext> </mtext><mi>c</mi><mo>[</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo separator="true">,</mo><mi>j</mi><mo>]</mo><mo>=</mo><mi>c</mi><mo>[</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo>−</mo><mn>1</mn><mo>]</mo></mrow><annotation encoding="application/x-tex">b[i,j]=4,\ \ \ \ i,j&gt;0\ and\  x_i\ne y_j\ and\ c[i-1,j]=c[i,j-1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathit">b</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mrel">=</span><span class="mord mathrm">4</span><span class="mpunct">,</span><span class="mord mspace"> </span><span class="mord mspace"> </span><span class="mord mspace"> </span><span class="mord mspace"> </span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mrel">&gt;</span><span class="mord mathrm">0</span><span class="mord mspace"> </span><span class="mord mathit">a</span><span class="mord mathit">n</span><span class="mord mathit">d</span><span class="mord mspace"> </span><span class="mord"><span class="mord mathit">x</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit">i</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mrel">≠</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">y</span><span class="vlist"><span style="top:0.15em;margin-right:0.05em;margin-left:-0.03588em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mord mspace"> </span><span class="mord mathit">a</span><span class="mord mathit">n</span><span class="mord mathit">d</span><span class="mord mspace"> </span><span class="mord mathit">c</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mbin">−</span><span class="mord mathrm">1</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mrel">=</span><span class="mord mathit">c</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mbin">−</span><span class="mord mathrm">1</span><span class="mclose">]</span></span></span></span></span><blockquote><p>当 b[i][j] = 4 时(下文称为<strong>分叉点</strong>)，向上走也向左走，这样可以遍历到所有的路径</p><p><img src="/images/lcs/lcs2.jpg" alt="lcs2.jpg"></p><p>如图，当遇到分叉点的时候将分出两个路径，将所有分叉点作为非叶子结点组成一棵二叉树：</p><p><img src="/images/lcs/tree.jpg" alt="tree"></p><p>最下面的叶子结点个数就是所有路径个数</p></blockquote><h3 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">int</span> num = <span class="number">0</span>;<span class="comment">// 记录遍历路径数</span></div><div class="line"><span class="function"><span class="keyword">int</span>** <span class="title">getArr</span><span class="params">(<span class="keyword">int</span>,<span class="keyword">int</span>)</span></span>;<span class="comment">// 动态创建二维数组</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">LCS</span><span class="params">(<span class="keyword">int</span>**,<span class="keyword">int</span>**,<span class="built_in">string</span>,<span class="built_in">string</span>,<span class="keyword">int</span>,<span class="keyword">int</span>)</span></span>;<span class="comment">// 给 c,b 数组赋值</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">TraceBack</span><span class="params">(<span class="built_in">string</span>,<span class="built_in">string</span>,<span class="keyword">int</span>**,<span class="keyword">int</span>,<span class="keyword">int</span>)</span></span>;    <span class="comment">// 回溯路径</span></div><div class="line"><span class="built_in">set</span>&lt;<span class="built_in">string</span>&gt; setOfLCS;    <span class="comment">// set保存所有的LCS，set集合中元素不重复</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="built_in">string</span> s1,s2;</div><div class="line">    <span class="built_in">cin</span>&gt;&gt;s1&gt;&gt;s2;</div><div class="line">    <span class="keyword">int</span> len1 = s1.size() + <span class="number">1</span>;</div><div class="line">    <span class="keyword">int</span> len2 = s2.size() + <span class="number">1</span>;</div><div class="line">    <span class="keyword">int</span>** c = getArr(len1,len2);</div><div class="line">    <span class="keyword">int</span>** b = getArr(len1,len2);</div><div class="line">  <span class="comment">// 使 s1,s2 与 c,b 坐标一致</span></div><div class="line">    s1 = <span class="string">" "</span> + s1;</div><div class="line">    s2 = <span class="string">" "</span> + s2;</div><div class="line">  <span class="comment">// 自底向上给 c,b 数组赋值</span></div><div class="line">    LCS(c,b,s1,s2,len1,len2);</div><div class="line">  <span class="comment">// 显示 c,b 数组</span></div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len1;i++) &#123;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;len2;j++) &#123;</div><div class="line">            <span class="built_in">cout</span>&lt;&lt;c[i][j]&lt;&lt;<span class="string">" "</span>;</div><div class="line">            <span class="keyword">if</span>(j == len2<span class="number">-1</span>)</div><div class="line">                <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"===============================\n"</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len1;i++) &#123;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;len2;j++) &#123;</div><div class="line">            <span class="built_in">cout</span>&lt;&lt;b[i][j]&lt;&lt;<span class="string">" "</span>;</div><div class="line">            <span class="keyword">if</span>(j == len2<span class="number">-1</span>)</div><div class="line">                <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">  <span class="comment">// 从右下角根据 b 数组指向回溯到边界 </span></div><div class="line">    TraceBack(s1,<span class="string">""</span>,b,len1<span class="number">-1</span>,len2<span class="number">-1</span>);</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"All route number: "</span>&lt;&lt;num&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"Remove duplicate elements: "</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">  <span class="comment">// 遍历set，输出所有LCS</span></div><div class="line">    <span class="built_in">set</span>&lt;<span class="built_in">string</span>&gt;::iterator iter=setOfLCS.begin();</div><div class="line">    <span class="keyword">while</span>(iter != setOfLCS.end()) &#123;</div><div class="line">        <span class="built_in">cout</span>&lt;&lt;*iter&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">        iter++;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"LCS length: "</span>&lt;&lt;c[len1<span class="number">-1</span>][len2<span class="number">-1</span>]&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"LCS number: "</span>&lt;&lt;setOfLCS.size()&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">LCS</span><span class="params">(<span class="keyword">int</span>** c,<span class="keyword">int</span>** b,<span class="built_in">string</span> s1,<span class="built_in">string</span> s2,<span class="keyword">int</span> m,<span class="keyword">int</span> n)</span> </span>&#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;m;i++) &#123;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;n;j++) &#123;</div><div class="line">            <span class="keyword">if</span>(s1[i] == s2[j]) &#123;</div><div class="line">                c[i][j] = c[i<span class="number">-1</span>][j<span class="number">-1</span>] + <span class="number">1</span>;</div><div class="line">                b[i][j] = <span class="number">1</span>;<span class="comment">// 斜上</span></div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(c[i<span class="number">-1</span>][j] &gt; c[i][j<span class="number">-1</span>]) &#123;</div><div class="line">                c[i][j] = c[i<span class="number">-1</span>][j];</div><div class="line">                b[i][j] = <span class="number">2</span>;<span class="comment">// 上</span></div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(c[i<span class="number">-1</span>][j] &lt; c[i][j<span class="number">-1</span>]) &#123;</div><div class="line">                c[i][j] = c[i][j<span class="number">-1</span>];</div><div class="line">                b[i][j] = <span class="number">3</span>;<span class="comment">// 左</span></div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                c[i][j] = c[i<span class="number">-1</span>][j];</div><div class="line">                b[i][j] = <span class="number">4</span>;<span class="comment">// 上 或 左</span></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 返回动态创建的二维数组的指针</span></div><div class="line"><span class="function"><span class="keyword">int</span>** <span class="title">getArr</span><span class="params">(<span class="keyword">int</span> M,<span class="keyword">int</span> N)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span>** arr = <span class="keyword">new</span> <span class="keyword">int</span>*[M];</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;M;i++) &#123;</div><div class="line">        arr[i] = <span class="keyword">new</span> <span class="keyword">int</span>[N];</div><div class="line">        <span class="built_in">memset</span>(arr[i],<span class="number">0</span>,<span class="keyword">sizeof</span>(<span class="keyword">int</span>)*N);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> arr;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">TraceBack</span><span class="params">(<span class="built_in">string</span> s1,<span class="built_in">string</span> temp,<span class="keyword">int</span>** b,<span class="keyword">int</span> i,<span class="keyword">int</span> j)</span> </span>&#123;</div><div class="line">    <span class="keyword">while</span>(i&gt;<span class="number">0</span> &amp;&amp; j&gt;<span class="number">0</span>) &#123;</div><div class="line">        <span class="keyword">if</span>(b[i][j] == <span class="number">1</span>) &#123;</div><div class="line">            temp = s1[i] + temp;</div><div class="line">            i--;</div><div class="line">            j--;</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(b[i][j] == <span class="number">2</span>) &#123;</div><div class="line">            i--;</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(b[i][j] == <span class="number">3</span>) &#123;</div><div class="line">            j--;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">          <span class="comment">// 递归回溯</span></div><div class="line">            TraceBack(s1,temp,b,i<span class="number">-1</span>,j);</div><div class="line">            TraceBack(s1,temp,b,i,j<span class="number">-1</span>);</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    num ++;</div><div class="line">  <span class="comment">// 打印一次遍历得到的字符串，可能是重复的</span></div><div class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"###"</span>&lt;&lt;temp&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">  <span class="comment">// 交给 set 来移除重复字符串</span></div><div class="line">    setOfLCS.insert(temp);</div><div class="line">&#125;</div></pre></td></tr></table></figure><blockquote><p>输入</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">badcdcba</div><div class="line">abcdcdab</div></pre></td></tr></table></figure><blockquote><p>得到的结果为：LCS长度=5，总路径数=18，除去重复的子串后，所有LCS个数为8</p><p>可以发现：回溯过程中不同路径出现大量交叉，由于总路径数是二叉树的叶子结点数，最坏情况下，二叉树高度为max(m,n)，即两串长度最大值，叶子结点个数为2<sup>max(m,n)</sup>，这些情况中还存在大量重复，筛选很麻烦，最后结果可能得到很少的几组数据而已。</p></blockquote><h2 id="优化：矩阵搜索求所有的最长公共子序列"><a href="#优化：矩阵搜索求所有的最长公共子序列" class="headerlink" title="优化：矩阵搜索求所有的最长公共子序列"></a>优化：矩阵搜索求所有的最长公共子序列</h2><blockquote><p>鉴于上述方法的缺点，根据<em>《利用矩阵搜索求所有最长公共子序列的算法》，宫洁卿，安徽工程科技学院学报，vol23,No.4,Dec.,2008</em> 提出的思想，这里进行简要阐述：</p><p>将 b[i][j] = 1 的点称为<strong>跳跃点</strong>，<strong>跳跃点</strong>使LCS从n→n-1(n=1,2,…,LCS长度)，LCS是由一条路径上的跳跃点对应的字符组成。将n→n-1的每个跳跃点依次找到这个点的所有下一跳跃点，直到没有下一个跳跃点为止。</p></blockquote><h3 id="矩阵搜索算法的基本思路和步骤"><a href="#矩阵搜索算法的基本思路和步骤" class="headerlink" title="矩阵搜索算法的基本思路和步骤"></a>矩阵搜索算法的基本思路和步骤</h3><blockquote><ol><li>两个栈：第一个栈 store 用于存放所有搜索到的元素，当该栈为空时，运算结束；第二个栈 print 用于存放准备打印的元素。先计算出二维数组 C，每个节点都纪录本节点所在的坐标，LCS 长度和指向的方向。假设该 LCS 串最长为 n，那么虚拟一个( n + 1) →n的节点，该节点的坐标位于数组 C 最右下角的节点 C[ i , j ] 的右下方，为 C[ i + 1 , j + 1 ]。将该节点压入栈 store</li><li>检测栈 store 是否为空，如果为空，则本算法结束</li><li>从 store 栈顶取出一个节点压入 print 栈</li><li>如果当前的元素是边界元素1 →0 时，打印栈 print 里面除了栈底的所有元素(无须打印原本不存在的虚拟结点) 。查看 store 栈里最上面一个元素的 LCS 长度，弹出栈 print 里面所有LCS 长度比 store 栈最上面的 LCS 长度大或相等的元素，跳转到第 2 步</li><li>设该结点的 LCS 长度为 n +1，从该节点出发，查看该节点的方向箭头，按照斜方向路线、向上的路<br>线（如果是双向的路线则走向上的路线）、向左的路线为优先级找到一个 n → ( n - 1) 的节点，假设为<br>C[ X1 , Y1 ]</li><li>再次从该节点出发，查看该节点的方向箭头 ,按照斜方向路线、向左的路线（如果是双向的路线则<br>走向左的路线） 、向上的路线为优先级找到一个 n →( n - 1) 的节点 ,假设为 C[ X2 , Y2 ]</li><li>比较 C[ X1 , Y1 ] 和 C[ X2 , Y2 ] 这两个节点。如果这两个结点是同一个结点，则将该结点压入栈 store，跳转到第 2 步</li><li>从刚才得到的两个结点 C[ X1 , Y1 ] 和 C[ X2 , Y2 ]，在二维数组 C 中，以 ( X1 , Y1 ) ( X2 , Y1 ) ( X1 ,Y2 ) ( X2 , Y2 ) 这四个点为坐标所构成的矩阵，在该矩阵中搜索所有的元素，将所有满足 n →( n - 1) 的节点压入栈 store。跳转到第 2 步</li></ol></blockquote><h3 id="代码实现-1"><a href="#代码实现-1" class="headerlink" title="代码实现"></a>代码实现</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="function"><span class="keyword">int</span>** <span class="title">getArr</span><span class="params">(<span class="keyword">int</span>,<span class="keyword">int</span>)</span></span>;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">LCS</span><span class="params">(<span class="keyword">int</span>**,<span class="keyword">int</span>**,<span class="built_in">string</span>,<span class="built_in">string</span>,<span class="keyword">int</span>,<span class="keyword">int</span>)</span></span>;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">TraceBack</span><span class="params">(<span class="keyword">int</span>,<span class="keyword">int</span>,<span class="keyword">int</span>**,<span class="keyword">int</span>**,<span class="built_in">string</span>)</span></span>;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></div><div class="line">    <span class="keyword">int</span> x;</div><div class="line">    <span class="keyword">int</span> y;</div><div class="line">    <span class="keyword">int</span> lcsLen;</div><div class="line">    node()&#123;&#125;</div><div class="line">    node(<span class="keyword">int</span> x,<span class="keyword">int</span> y,<span class="keyword">int</span> z):x(x),y(y),lcsLen(z)&#123;&#125;</div><div class="line">    node(<span class="keyword">int</span> x,<span class="keyword">int</span> y,<span class="keyword">int</span>** c):x(x),y(y),lcsLen(c[x][y])&#123;&#125;</div><div class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span> ==(<span class="keyword">const</span> node &amp;n) &#123;</div><div class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>-&gt;x == n.x &amp;&amp; <span class="keyword">this</span>-&gt;y == n.y)</div><div class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">printStack</span><span class="params">(<span class="built_in">stack</span>&lt;node&gt;,<span class="built_in">string</span>)</span></span>;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">popPrint</span><span class="params">(<span class="built_in">stack</span>&lt;node&gt;&amp;,<span class="keyword">int</span>)</span></span>;</div><div class="line"><span class="function">node <span class="title">findJump</span><span class="params">(<span class="keyword">int</span>,<span class="keyword">int</span>,<span class="keyword">int</span>**,<span class="keyword">int</span>**,<span class="keyword">int</span>)</span></span>;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">searchMatrix</span><span class="params">(node,node,<span class="keyword">int</span>**,<span class="keyword">int</span>**,<span class="built_in">stack</span>&lt;node&gt;&amp;)</span></span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line"><span class="function"></span>&#123;</div><div class="line">    <span class="built_in">string</span> s1,s2;</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"Input the first Sequence:"</span>;</div><div class="line">    <span class="built_in">cin</span>&gt;&gt;s1;</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"Input the second Sequence:"</span>;</div><div class="line">    <span class="built_in">cin</span>&gt;&gt;s2;</div><div class="line">    <span class="keyword">int</span> len1 = s1.length()+<span class="number">1</span>;</div><div class="line">    <span class="keyword">int</span> len2 = s2.length()+<span class="number">1</span>;</div><div class="line">    <span class="keyword">int</span>** c = getArr(len1,len2);</div><div class="line">    <span class="keyword">int</span>** b = getArr(len1,len2);</div><div class="line">    s1 = <span class="string">" "</span> + s1;</div><div class="line">    s2 = <span class="string">" "</span> + s2;</div><div class="line">    LCS(c,b,s1,s2,len1,len2);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len1;i++) &#123;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;len2;j++) &#123;</div><div class="line">            <span class="built_in">cout</span>&lt;&lt;c[i][j]&lt;&lt;<span class="string">" "</span>;</div><div class="line">            <span class="keyword">if</span>(j == len2<span class="number">-1</span>)</div><div class="line">                <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"===============================\n"</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len1;i++) &#123;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;len2;j++) &#123;</div><div class="line">            <span class="built_in">cout</span>&lt;&lt;b[i][j]&lt;&lt;<span class="string">" "</span>;</div><div class="line">            <span class="keyword">if</span>(j == len2<span class="number">-1</span>)</div><div class="line">                <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(c[len1<span class="number">-1</span>][len2<span class="number">-1</span>] == <span class="number">0</span>) &#123;</div><div class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"0 0"</span>&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">        <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line">    TraceBack(len1,len2,c,b,s1);</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span>** <span class="title">getArr</span><span class="params">(<span class="keyword">int</span> M,<span class="keyword">int</span> N)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span>** arr = <span class="keyword">new</span> <span class="keyword">int</span>*[M];</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;M;i++) &#123;</div><div class="line">        arr[i] = <span class="keyword">new</span> <span class="keyword">int</span>[N];</div><div class="line">        <span class="built_in">memset</span>(arr[i],<span class="number">0</span>,<span class="keyword">sizeof</span>(<span class="keyword">int</span>)*N);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> arr;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">LCS</span><span class="params">(<span class="keyword">int</span>** c,<span class="keyword">int</span>** b,<span class="built_in">string</span> s1,<span class="built_in">string</span> s2,<span class="keyword">int</span> m,<span class="keyword">int</span> n)</span> </span>&#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;m;i++) &#123;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;n;j++) &#123;</div><div class="line">            <span class="keyword">if</span>(s1[i] == s2[j]) &#123;</div><div class="line">                c[i][j] = c[i<span class="number">-1</span>][j<span class="number">-1</span>] + <span class="number">1</span>;</div><div class="line">                b[i][j] = <span class="number">1</span>;</div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(c[i<span class="number">-1</span>][j] &gt; c[i][j<span class="number">-1</span>]) &#123;</div><div class="line">                c[i][j] = c[i<span class="number">-1</span>][j];</div><div class="line">                b[i][j] = <span class="number">2</span>;</div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(c[i<span class="number">-1</span>][j] &lt; c[i][j<span class="number">-1</span>]) &#123;</div><div class="line">                c[i][j] = c[i][j<span class="number">-1</span>];</div><div class="line">                b[i][j] = <span class="number">3</span>;</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                c[i][j] = c[i<span class="number">-1</span>][j];</div><div class="line">                b[i][j] = <span class="number">4</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">TraceBack</span><span class="params">(<span class="keyword">int</span> m,<span class="keyword">int</span> n,<span class="keyword">int</span>** c,<span class="keyword">int</span>** b,<span class="built_in">string</span> str)</span> </span>&#123;</div><div class="line">    <span class="built_in">stack</span>&lt;node&gt; store, print;</div><div class="line">    node virtualNode = node(m,n,c[m<span class="number">-1</span>][n<span class="number">-1</span>]+<span class="number">1</span>);<span class="comment">//由虚拟结点引发循环</span></div><div class="line">    store.push(virtualNode);</div><div class="line">    node storeTop;</div><div class="line">    <span class="keyword">int</span> topLen,number=<span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span>(!store.empty()) &#123;</div><div class="line">        storeTop = store.top();</div><div class="line">        store.pop();</div><div class="line">        print.push(storeTop);</div><div class="line">        <span class="comment">// 判断弹出的元素是否是边界元素</span></div><div class="line">        <span class="keyword">if</span>(storeTop.x == <span class="number">1</span> || storeTop.y == <span class="number">1</span> || print.size() == c[m<span class="number">-1</span>][n<span class="number">-1</span>]+<span class="number">1</span>) &#123;</div><div class="line">            number++;</div><div class="line">            printStack(print,str);<span class="comment">// 是边界将print栈除虚拟结点的所有点打印</span></div><div class="line">            <span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;<span class="comment">// 数量太多不要输出这两行了</span></div><div class="line">            <span class="keyword">if</span>(!store.empty()) &#123;</div><div class="line">                topLen = store.top().lcsLen;</div><div class="line">                popPrint(print,topLen);<span class="comment">// 弹出小于等于store栈顶长度的print栈中的点</span></div><div class="line">            &#125;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">          <span class="comment">//不是边界说明还有下一跳</span></div><div class="line">            <span class="keyword">int</span> x = storeTop.x;</div><div class="line">            <span class="keyword">int</span> y = storeTop.y;</div><div class="line">            node e1 = findJump(x<span class="number">-1</span>,y<span class="number">-1</span>,b,c,<span class="number">0</span>);</div><div class="line">            node e2 = findJump(x<span class="number">-1</span>,y<span class="number">-1</span>,b,c,<span class="number">1</span>);</div><div class="line">            <span class="keyword">if</span>(e1 == e2) &#123;</div><div class="line">                store.push(e1);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                searchMatrix(e1,e2,c,b,store);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;number&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 输出print栈中所有元素</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">printStack</span><span class="params">(<span class="built_in">stack</span>&lt;node&gt; s,<span class="built_in">string</span> str)</span> </span>&#123;</div><div class="line">    <span class="keyword">while</span>(!s.empty()) &#123;</div><div class="line">        <span class="built_in">cout</span>&lt;&lt;str[s.top().x];</div><div class="line">        s.pop();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 弹出print栈中长度小于等于n的元素，相当于回到前一跳的状态</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">popPrint</span><span class="params">(<span class="built_in">stack</span>&lt;node&gt; &amp;s,<span class="keyword">int</span> n)</span> </span>&#123;</div><div class="line">  <span class="comment">// 由于进入print栈点的lcsLen值是单调减，直接出栈直到lcsLen大于n，最底下的虚拟结点不能出栈</span></div><div class="line">    <span class="keyword">while</span>(s.top().lcsLen &lt;= n &amp;&amp; s.size() != <span class="number">1</span>) &#123;</div><div class="line">        s.pop();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 寻找所有下一跳，type为真：遇到跳跃点向左走，type为假：遇到跳跃点向上走，直到找到第一个跳跃点</span></div><div class="line"><span class="function">node <span class="title">findJump</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y,<span class="keyword">int</span>** b,<span class="keyword">int</span>** c,<span class="keyword">int</span> type)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span>(type) &#123;</div><div class="line">        <span class="keyword">while</span>(b[x][y] != <span class="number">1</span>)&#123;<span class="comment">// 这里一定有下一个跳跃点，不用担心会找不到而越界</span></div><div class="line">        <span class="keyword">if</span>(b[x][y] == <span class="number">2</span>)</div><div class="line">            x--;</div><div class="line">        <span class="keyword">else</span></div><div class="line">            y--;</div><div class="line">        &#125;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">while</span>(b[x][y] != <span class="number">1</span>)&#123;</div><div class="line">        <span class="keyword">if</span>(b[x][y] == <span class="number">3</span>)</div><div class="line">            y--;</div><div class="line">        <span class="keyword">else</span></div><div class="line">            x--;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> node(x,y,c);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 如果findJump找到的两个下一跳跃点不是一个点，则以这两个点为矩形搜索里面的跳跃点，视为下一跳跃点加入store栈中</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">searchMatrix</span><span class="params">(node e1,node e2,<span class="keyword">int</span>** c,<span class="keyword">int</span>** b,<span class="built_in">stack</span>&lt;node&gt;&amp; store)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> x1 = e1.x;</div><div class="line">    <span class="keyword">int</span> y1 = e1.y;</div><div class="line">    <span class="keyword">int</span> x2 = e2.x;</div><div class="line">    <span class="keyword">int</span> y2 = e2.y;</div><div class="line">    <span class="keyword">int</span> temp;</div><div class="line">    <span class="keyword">if</span>(x1 &gt; x2) &#123;</div><div class="line">        temp = x1;</div><div class="line">        x1 = x2;</div><div class="line">        x2 = temp;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span>(y1 &gt; y2) &#123;</div><div class="line">        temp = y1;</div><div class="line">        y1 = y2;</div><div class="line">        y2 = temp;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=x2;i&gt;=x1;i--) &#123;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=y2;j&gt;=y1;j--) &#123;</div><div class="line">            <span class="keyword">if</span>(b[i][j] == <span class="number">1</span>)</div><div class="line">                store.push(node(i,j,c));</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><blockquote><p>根据算法的思想实现了代码，经过以下数据对直接遍历和矩阵搜索进行对比：</p><ol><li>ABCDCDABCD<br>BADCDCBADC</li><li>ABCDCDABCDABCDCDABCD<br>BADCDCBADCBADCDCBADC</li><li>ABCDCDABCDABCDCDABCDABCDCDABCD<br>BADCDCBADCBADCDCBADCBADCDCBADC</li><li>ABCDCDABCDABCDCDABCDABCDCDABCDABCDCDABCD<br>BADCDCBADCBADCDCBADCBADCDCBADCBADCDCBADC</li></ol></blockquote><table><thead><tr><th style="text-align:left">测试用例编号</th><th>LCS长度</th><th>所有LCS个数</th><th>直接遍历循环次数</th></tr></thead><tbody><tr><td style="text-align:left">1</td><td>6</td><td>20</td><td>60</td></tr><tr><td style="text-align:left">2</td><td>12</td><td>700</td><td>7560</td></tr><tr><td style="text-align:left">3</td><td>18</td><td>25460</td><td>970200</td></tr><tr><td style="text-align:left">4</td><td>24</td><td>936540</td><td>没测出来</td></tr></tbody></table><blockquote><p>当字符串长度40时，简单的遍历所有路径就无法短时间显示结果了</p></blockquote>]]></content>
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Prim-Kruscal</title>
      <link href="/2017/08/13/Prim-Kruscal/"/>
      <url>/2017/08/13/Prim-Kruscal/</url>
      <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css"><h1 id="贪心算法——最小生成树"><a href="#贪心算法——最小生成树" class="headerlink" title="贪心算法——最小生成树"></a>贪心算法——最小生成树</h1><blockquote><ol><li><p>G=(V,E) 是连通带权图，E 中每条边 (v,w) 的权为 c[v][w]，G 的一个子图 G’ 是一颗包含 G 的所有顶点的树，则称 G’ 为 G 的生成树，所有生成树中权值和最小的称为 G 的最小生成树</p></li><li><p>MST 性质：设 G=(V,E) 是连通带权图，U 是 V 中的一个真子集，若存在顶点 u∈U 和顶点 v∈V-U 的边（u，v）是一条具有最小权值的边，则必存在 G 的一棵最小生成树包括这条边（u，v）</p></li><li><p>Prim 和 Kruscal 都应用最小生成树的 MST 性质进行贪心选择</p></li><li><p>实例中连通带权图为<img src="/images/prim_kruscal/tu.jpg" alt="tu"></p><p>图的表示：邻接矩阵——使用二维数组存放两点之间的信息</p></li></ol></blockquote><h2 id="Prim-算法"><a href="#Prim-算法" class="headerlink" title="Prim 算法"></a>Prim 算法</h2><blockquote><p>设 G=(V,E) 是连通带权图，V = {1,2,…,n}</p><p>构造 G 的最小生成树的 Prim算法的基本思想是：首先置 S={1}，然后只要 S 是 V 的真子集，就做如下贪心选择：选取满足条件 i∈S，j∈V-S，且 c[i][j] 最小的边，并将顶点 j 添加到 S 中，这个过程一直进行到 S=V为止。这个过程中选取的所有边构成 G 的一颗最小生成树</p><p><img src="/images/prim_kruscal/prim.jpg" alt="prim.jpg"> </p></blockquote><p><em>Question:</em> 如何有效地找出满足 i∈S, j∈V-S，且权 c[i][j] 最小的边 (i,j) ?</p><a id="more"></a><p><strong>代码说明：</strong></p><blockquote><p>对于每个 j∈V-S，closest[j] 是 j 在 S 中的临界顶点，它与 j 在 S 中的其他临接顶点 k 相比较有：</p><p>c[j][closest[j]]≤c[j][k]</p><p>lowest[j] 的值就是 c[j][closest[j]]</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MIN 100001</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">Prim</span><span class="params">(<span class="keyword">int</span>[<span class="number">100</span>][<span class="number">100</span>],<span class="keyword">int</span>)</span></span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> N;</div><div class="line">    <span class="keyword">int</span> arr[<span class="number">100</span>][<span class="number">100</span>];<span class="comment">// 存放两点之间连线的权值</span></div><div class="line">    <span class="keyword">while</span>(~<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;N)) &#123;</div><div class="line">        <span class="comment">// 输入</span></div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;N;i++) &#123;</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;N;j++) &#123;</div><div class="line">                <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;arr[i][j]);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// Prim</span></div><div class="line">        <span class="built_in">printf</span>(<span class="string">"最小生成树权值和：%d\n"</span>,Prim(arr,N));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"><span class="comment">// lowcost[i]:V-S中点i到S中的点连线最小权值</span></div><div class="line"><span class="comment">// closet[i]:V-S中点i到s中权值最小连线应该连的点坐标</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">Prim</span><span class="params">(<span class="keyword">int</span> c[<span class="number">100</span>][<span class="number">100</span>],<span class="keyword">int</span> N)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> lowcost[N],closest[N], res=<span class="number">0</span>;</div><div class="line">    <span class="keyword">bool</span> s[N];</div><div class="line">    <span class="comment">// S 集合最开始只有0号元素时，对lowcost, clostest初始化</span></div><div class="line">    s[<span class="number">0</span>] = <span class="literal">true</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;N;i++) &#123;</div><div class="line">        lowcost[i] = c[i][<span class="number">0</span>];   <span class="comment">// 最开始 S 中只有 0</span></div><div class="line">        closest[i] = <span class="number">0</span>;</div><div class="line">        s[i] = <span class="literal">false</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 将 V-S 集合中的元素放到 S 中</span></div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;N;i++) &#123;</div><div class="line">        <span class="keyword">int</span> k, imin = MIN;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;N;j++) &#123;</div><div class="line">            <span class="keyword">if</span>(!s[j] &amp;&amp; lowcost[j] &lt; imin) &#123;</div><div class="line">                imin = lowcost[j];</div><div class="line">                k = j;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        s[k] = <span class="literal">true</span>;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%d--%d \n"</span>,k,closest[k]);</div><div class="line">        res += imin;</div><div class="line">        <span class="comment">// 由于 S 中有了一个新的元素，V-S 中各点 lowcost 值可能发生变化</span></div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;N;j++) &#123;</div><div class="line">            <span class="keyword">if</span>(!s[j] &amp;&amp; lowcost[j] &gt; c[j][k]) &#123;</div><div class="line">                lowcost[j] = c[j][k];</div><div class="line">                closest[j] = k;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> res;</div><div class="line">&#125;</div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">Input:</span></div><div class="line"><span class="comment">4</span></div><div class="line"><span class="comment">0 4 9 21</span></div><div class="line"><span class="comment">4 0 8 17</span></div><div class="line"><span class="comment">9 8 0 16</span></div><div class="line"><span class="comment">21 17 16 0</span></div><div class="line"><span class="comment">*/</span></div></pre></td></tr></table></figure><h2 id="Kruscal-算法"><a href="#Kruscal-算法" class="headerlink" title="Kruscal 算法"></a>Kruscal 算法</h2><blockquote><p>先构造一个只含 n 个顶点、而边集为空的子图，把子图中各个顶点看成各棵树上的根结点，之后，从网的边集 E 中选取一条权值最小的边，若该条边的两个顶点分属不同的树，则将其加入子图，即把两棵树合成一棵树，反之，若该条边的两个顶点已落在同一棵树上，则不可取，而应该取下一条权值最小的边再试之。依次类推，直到森林中只有一棵树，也即子图中含有 n-1 条边为止</p><p><strong>简单的说：</strong> Kruscal 算法先找权值最小的边，检查这条边两个端点是否在一个集合中，如果不在一个集合中，连接两点(合并点所在集合)后找下一条权值最小的边；如果在一个集合，不连接两点直接找下一条权值最小的边，直到连接的边数为n-1为止</p><p><img src="/images/prim_kruscal/kruscal.jpg" alt="kruscal"></p></blockquote><p><em>Question:</em> </p><ul><li>怎样按权递增的顺序查看各边？</li><li>怎样判断两点是否在一个集合中？</li></ul><h3 id="优先队列和并查集"><a href="#优先队列和并查集" class="headerlink" title="优先队列和并查集"></a>优先队列和并查集</h3><blockquote><p>优先队列请见 <a href="/2017/02/06/priority-queue/">priority-queue</a></p><p>并查集（Union-find Sets）主要用于处理一些<em>不相交集合</em> 的合并问题，使用树形结构表示一个集合，树的每个节点就表示集合中的一个元素，树根作为集合的代表。</p><p><img src="https://ss0.baidu.com/6LVYsjip0QIZ8Aqbn9fN2DC/timg?pa&amp;quality=100&amp;size=w4096&amp;sec=1502580452&amp;di=dfb6266065b0e2a1f63bccd1587f64a4&amp;ref=&amp;imgtype=3&amp;src=http://images.cnitblog.com/blog/358550/201309/12160744-00b6e27da65b4b48b903e768a97bf888.png" alt=""></p><p>并查集的基本操作有三个：</p><ol><li><p>makeSet(s)：建立一个新的并查集，其中包含 s 个单元素集合。</p><p><img src="https://ss0.baidu.com/6LVYsjip0QIZ8Aqbn9fN2DC/timg?pa&amp;quality=100&amp;size=w4096&amp;sec=1502580452&amp;di=2b83a531e086dc93da48d329819fc113&amp;ref=&amp;imgtype=3&amp;src=http://images.cnitblog.com/blog/358550/201309/12160852-98560aa5c6764feeab476938d1bcfe24.png" alt="构造并查集初始化"></p></li><li><p>unionSet(x, y)：把元素 x 和元素 y 所在的集合合并，要求 x 和 y 所在的集合不相交，如果相交则不合并。</p></li><li><p>find(x)：找到元素 x 所在的集合的代表，该操作也可以用于判断两个元素是否位于同一个集合，只要将它们各自的代表比较一下就可以了。在find方法中，如果每次都沿着父节点向上查找，当树很高时，会降低查找效率（时间复杂度就是树的高度）有一种非常简单而有效的策略——路径压缩：</p></li><li><p>路径压缩，就是在每次查找时，令查找路径上的每个节点都直接指向根节点</p><p><img src="https://ss0.baidu.com/6LVYsjip0QIZ8Aqbn9fN2DC/timg?pa&amp;quality=100&amp;size=w4096&amp;sec=1502580452&amp;di=39cd479da65629e403608953a381ae81&amp;ref=&amp;imgtype=3&amp;src=http://images.cnitblog.com/blog/358550/201309/12160922-bc21dc9e11d645519c158e4f5153e20d.png" alt=""></p><p>这样查看每个元素所在树的根节点只需要一步</p></li><li><p>并查集的合并：将一个集合的树根指向另一个集合的树根</p><p><img src="https://ss0.baidu.com/6LVYsjip0QIZ8Aqbn9fN2DC/timg?pa&amp;quality=100&amp;size=w4096&amp;sec=1502580452&amp;di=f547dbac92c11e77a5fc3e32ff80658e&amp;ref=&amp;imgtype=3&amp;src=http://images.cnitblog.com/blog/358550/201309/12160946-86baa213cc204627af4ad9a4cef4a97a.png" alt=""></p><p>​合并策略——按秩合并：用秩表示树的高度，在合并时，总是将具有较小秩的树根指向具有较大秩的树根。简单的说，就是总是将比较矮的树作为子树，添加到较高的树中。代码中 urank[x] 表示 x 为根的树的高度</p></li></ol></blockquote><p><strong>使用优先队列将边升序排列（注意对自定义类型要重写 ‘&lt;’ 运算符）</strong></p><p><strong>使用并查集判断两点是否在一个集合上（根节点是否相等），合并两集合</strong> </p><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXSIZE 100</span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">int</span> arr[MAXSIZE][MAXSIZE];</div><div class="line"><span class="keyword">int</span> uset[MAXSIZE];  <span class="comment">// uset[i] :元素i所属集合的根节点</span></div><div class="line"><span class="keyword">int</span> urank[MAXSIZE]; <span class="comment">// urank[i] :元素i为根节点集合的高度</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">Kruscal</span><span class="params">(<span class="keyword">int</span>)</span></span>;</div><div class="line"><span class="keyword">int</span> res = <span class="number">0</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span></div><div class="line">    <span class="keyword">int</span> x;</div><div class="line">    <span class="keyword">int</span> y;</div><div class="line">    <span class="keyword">int</span> weight;</div><div class="line">    Edge(<span class="keyword">int</span> x,<span class="keyword">int</span> y,<span class="keyword">int</span> weight) &#123;</div><div class="line">        <span class="keyword">this</span>-&gt;x = x;</div><div class="line">        <span class="keyword">this</span>-&gt;y = y;</div><div class="line">        <span class="keyword">this</span>-&gt;weight = weight;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">friend</span> <span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (Edge edge1, Edge edge2) &#123;</div><div class="line">        <span class="keyword">return</span> edge1.weight &gt; edge2.weight;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">priority_queue&lt;Edge&gt; q;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> N;</div><div class="line">    <span class="keyword">while</span>(~<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;N)) &#123;</div><div class="line">        res = <span class="number">0</span>;</div><div class="line">        <span class="comment">// 输入</span></div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;N;i++) &#123;</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;N;j++) &#123;</div><div class="line">                <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;arr[i][j]);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// 将边放入优先队列中</span></div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;N<span class="number">-1</span>;i++) &#123;</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=i+<span class="number">1</span>;j&lt;N;j++) &#123;</div><div class="line">                q.push(Edge(i,j,arr[i][j]));</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        Kruscal(N);</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,res);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">makeSet</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</div><div class="line">    <span class="comment">// 初始时每个元素独立成为一个集合，根节点是本身，集合（树）高度为0</span></div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;N;i++) &#123;</div><div class="line">        uset[i] = i;</div><div class="line">        urank[i] = <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">findRoot</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</div><div class="line">    <span class="comment">// 只有根节点的父节点是本身</span></div><div class="line">    <span class="keyword">if</span>(uset[x] == x) &#123;</div><div class="line">        <span class="keyword">return</span> x;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 不是根节点递归寻找根节点，找到后赋值给uset[x]减少下次递归的次数，相当于压缩了到根节点的路径</span></div><div class="line">    <span class="keyword">return</span> uset[x] = findRoot(uset[x]);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">unionSet</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span> </span>&#123;</div><div class="line">    <span class="comment">// 取 x,y 所在集合的根节点</span></div><div class="line">    x=findRoot(x);</div><div class="line">    y=findRoot(y);</div><div class="line">    <span class="comment">// x,y 属于一个集合，不可合并</span></div><div class="line">    <span class="keyword">if</span>(x == y) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// x,y 不在同一集合，将高度小的集合加到高度大的集合根节点</span></div><div class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(urank[x] &gt; urank[y]) &#123;</div><div class="line">        <span class="comment">// y 集合的根节点的父亲是 x 集合的根节点</span></div><div class="line">        uset[y] = x;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        uset[x] = y;</div><div class="line">        <span class="comment">// 高度相等，x所在集合根节点接到y集合根节点，y集合高度加一</span></div><div class="line">        <span class="keyword">if</span>(urank[x] == urank[y]) &#123;</div><div class="line">            urank[y]++;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">Kruscal</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</div><div class="line">    makeSet(N);</div><div class="line">    <span class="keyword">int</span> qsize = q.size();</div><div class="line">    <span class="keyword">int</span> lineNum = <span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;qsize;i++) &#123;</div><div class="line">        <span class="comment">// e为当前最小权值边</span></div><div class="line">        Edge e = q.top();</div><div class="line">        <span class="comment">// 按权值降序处理每一条边，如果两点不在一个集合中，合并两点所在的集合返回true，说明生成了一条连线</span></div><div class="line">        <span class="keyword">if</span>(unionSet(e.x, e.y)) &#123;</div><div class="line">            lineNum ++;</div><div class="line">            res += arr[e.x][e.y];</div><div class="line">            <span class="built_in">printf</span>(<span class="string">"%d--%d\n"</span>,e.x,e.y);</div><div class="line">            <span class="comment">// 连线数 = 点数 - 1 时为最小生成树，结束循环</span></div><div class="line">            <span class="keyword">if</span>(lineNum == N - <span class="number">1</span>) &#123;</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        q.pop();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">Input:</span></div><div class="line"><span class="comment">4</span></div><div class="line"><span class="comment">0 4 9 21</span></div><div class="line"><span class="comment">4 0 8 17</span></div><div class="line"><span class="comment">9 8 0 16</span></div><div class="line"><span class="comment">21 17 16 0</span></div><div class="line"><span class="comment">*/</span></div></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> 算法 </category>
          
          <category> OJ 做题知识点积累 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>springboot-mybatis小程序</title>
      <link href="/2017/04/09/springboot-mybatis/"/>
      <url>/2017/04/09/springboot-mybatis/</url>
      <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css"><h1 id="IntelliJ开发SpringBoot-Mybatis应用程序"><a href="#IntelliJ开发SpringBoot-Mybatis应用程序" class="headerlink" title="IntelliJ开发SpringBoot-Mybatis应用程序"></a>IntelliJ开发SpringBoot-Mybatis应用程序</h1><h2 id="新建工程"><a href="#新建工程" class="headerlink" title="新建工程"></a>新建工程</h2><blockquote><p>new Project——Spring Initializr</p><p>填好工程Name，包路径Group,Package</p><p>Dependencies页面勾选Web，Mybatis，Mysql会自动帮你生产maven的pom文件，当然也可以自己后往里添加，maven会自动的帮你下载需要的依赖</p><p>Finish</p></blockquote><p><em>注：</em></p><p>maven默认中央仓库在国外可能使下载依赖很慢，可以修改maven的conf/settings.xml更换镜像地址：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">mirror</span>&gt;</span>  </div><div class="line">   <span class="tag">&lt;<span class="name">id</span>&gt;</span>alimaven<span class="tag">&lt;/<span class="name">id</span>&gt;</span>  </div><div class="line">   <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun maven<span class="tag">&lt;/<span class="name">name</span>&gt;</span>  </div><div class="line">   <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/groups/public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span>  </div><div class="line">   <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span>          </div><div class="line"><span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></div></pre></td></tr></table></figure><h2 id="工程结构说明"><a href="#工程结构说明" class="headerlink" title="工程结构说明"></a>工程结构说明</h2><blockquote><p>main-java 目录下的 *Application 类是项目的启动类</p><p>main 下的 application.yml 是配置文件</p><p>test 是测试类的目录</p><p>pom.xml 是 maven 的依赖管理文件</p></blockquote><a id="more"></a><h2 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h2><p><em>配置文件有 .properties 和 .yml 两种，格式不同而已，下面的是 .yml</em></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">#server</div><div class="line">server:</div><div class="line">  port: 80</div><div class="line">#spring config</div><div class="line">spring:</div><div class="line">  aop:</div><div class="line">    auto: true</div><div class="line">  datasource:</div><div class="line">    name: *</div><div class="line">    url: jdbc:mysql://localhost:3306/*</div><div class="line">    driverClassName: com.mysql.jdbc.Driver</div><div class="line">    username: *</div><div class="line">    password: *</div><div class="line">    type: com.alibaba.druid.pool.DruidDataSource</div><div class="line">    maxActive: 1000</div><div class="line">    initialSize: 5</div><div class="line">    maxWait: 60000</div><div class="line">    minIdle: 1</div><div class="line">    timeBetweenEvictionRunsMillis: 60000</div><div class="line">    minEvictableIdleTimeMillis: 300000</div><div class="line">    testWhileIdle: true</div><div class="line">    testOnBorrow: false</div><div class="line">    testOnReturn: false</div><div class="line">    poolPreparedStatements: true</div><div class="line">    maxOpenPreparedStatements: 20</div><div class="line"></div><div class="line"># MyBatis</div><div class="line">mybatis:</div><div class="line">  type-aliases-package: com.zjm.model</div><div class="line">  mapper-locations: classpath:/mapper/*.xml</div><div class="line">  configuration:</div><div class="line">    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl</div><div class="line"></div><div class="line">#PageHelper</div><div class="line">pagehelper:</div><div class="line">  offsetAsPageNum: true</div><div class="line">  rowBoundsWithCount: true</div><div class="line">  reasonable: true</div></pre></td></tr></table></figure><h2 id="编写Mybatis-小程序"><a href="#编写Mybatis-小程序" class="headerlink" title="编写Mybatis 小程序"></a>编写Mybatis 小程序</h2><h3 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h3><blockquote><ul><li>在上面的配置文件中 Mybatis 的配置项里</li></ul><p><em>type-aliases-package：是对象类的路径</em> (main.java.com.*.model下)</p><p><em>mapper-locations：是对象dao类对应的 .xml 的路径</em> (main.resource.mapper下)</p><p>建立以上路径及com.*.dao</p><ul><li>在pom.xml中加入依赖：(在<dependencies>标签中)</dependencies></li></ul></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.20<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div></pre></td></tr></table></figure><blockquote><ul><li>在*Application.java文件的类上加入</li></ul><p>@MapperScan(basePackages = “com.zjm.dao”)</p><p>@SpringBootApplication</p><p>这两个注解</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@MapperScan</span>(basePackages = <span class="string">"com.zjm.dao"</span>)</div><div class="line"><span class="meta">@SpringBootApplication</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IshopApplication</span> </span>&#123;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">SpringApplication.run(IshopApplication.class, args);</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><h4 id="User"><a href="#User" class="headerlink" title="User"></a>User</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.zjm.model;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.util.Date;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> Integer id;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> String nickname;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> String password;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> String phone;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> String email;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> Date regdate;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> Integer sex;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> String head;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> id;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.id = id;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getNickname</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> nickname;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setNickname</span><span class="params">(String nickname)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.nickname = nickname == <span class="keyword">null</span> ? <span class="keyword">null</span> : nickname.trim();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> password;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.password = password == <span class="keyword">null</span> ? <span class="keyword">null</span> : password.trim();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPhone</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> phone;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPhone</span><span class="params">(String phone)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.phone = phone == <span class="keyword">null</span> ? <span class="keyword">null</span> : phone.trim();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getEmail</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> email;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEmail</span><span class="params">(String email)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.email = email == <span class="keyword">null</span> ? <span class="keyword">null</span> : email.trim();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> Date <span class="title">getRegdate</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> regdate;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRegdate</span><span class="params">(Date regdate)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.regdate = regdate;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getSex</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> sex;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSex</span><span class="params">(Integer sex)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.sex = sex;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getHead</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> head;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHead</span><span class="params">(String head)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.head = head == <span class="keyword">null</span> ? <span class="keyword">null</span> : head.trim();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"User&#123;"</span> +</div><div class="line">                <span class="string">"id="</span> + id +</div><div class="line">                <span class="string">", nickname='"</span> + nickname + <span class="string">'\''</span> +</div><div class="line">                <span class="string">", password='"</span> + password + <span class="string">'\''</span> +</div><div class="line">                <span class="string">", phone='"</span> + phone + <span class="string">'\''</span> +</div><div class="line">                <span class="string">", email='"</span> + email + <span class="string">'\''</span> +</div><div class="line">                <span class="string">", regdate="</span> + regdate +</div><div class="line">                <span class="string">", sex="</span> + sex +</div><div class="line">                <span class="string">", head='"</span> + head + <span class="string">'\''</span> +</div><div class="line">                <span class="string">'&#125;'</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h4 id="UserMapper"><a href="#UserMapper" class="headerlink" title="UserMapper"></a>UserMapper</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.zjm.dao;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.zjm.model.User;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">deleteByPrimaryKey</span><span class="params">(Integer id)</span></span>;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">insert</span><span class="params">(User record)</span></span>;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">insertSelective</span><span class="params">(User record)</span></span>;</div><div class="line"></div><div class="line">    <span class="function">User <span class="title">selectByPrimaryKey</span><span class="params">(Integer id)</span></span>;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">updateByPrimaryKeySelective</span><span class="params">(User record)</span></span>;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">int</span> <span class="title">updateByPrimaryKey</span><span class="params">(User record)</span></span>;</div><div class="line"></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure><h4 id="UserMapper-xml"><a href="#UserMapper-xml" class="headerlink" title="UserMapper.xml"></a>UserMapper.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span><span class="meta">?&gt;</span></span></div><div class="line"><span class="meta">&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.zjm.dao.UserMapper"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"BaseResultMap"</span> <span class="attr">type</span>=<span class="string">"com.zjm.model.User"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"Id"</span> <span class="attr">jdbcType</span>=<span class="string">"INTEGER"</span> <span class="attr">property</span>=<span class="string">"id"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"nickName"</span> <span class="attr">jdbcType</span>=<span class="string">"VARCHAR"</span> <span class="attr">property</span>=<span class="string">"nickname"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"password"</span> <span class="attr">jdbcType</span>=<span class="string">"VARCHAR"</span> <span class="attr">property</span>=<span class="string">"password"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"phone"</span> <span class="attr">jdbcType</span>=<span class="string">"VARCHAR"</span> <span class="attr">property</span>=<span class="string">"phone"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"email"</span> <span class="attr">jdbcType</span>=<span class="string">"VARCHAR"</span> <span class="attr">property</span>=<span class="string">"email"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"regDate"</span> <span class="attr">jdbcType</span>=<span class="string">"DATE"</span> <span class="attr">property</span>=<span class="string">"regdate"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"sex"</span> <span class="attr">jdbcType</span>=<span class="string">"INTEGER"</span> <span class="attr">property</span>=<span class="string">"sex"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"head"</span> <span class="attr">jdbcType</span>=<span class="string">"VARCHAR"</span> <span class="attr">property</span>=<span class="string">"head"</span> /&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">"Base_Column_List"</span>&gt;</span></div><div class="line">    Id, nickName, password, phone, email, regDate, sex, head</div><div class="line">  <span class="tag">&lt;/<span class="name">sql</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectByPrimaryKey"</span> <span class="attr">parameterType</span>=<span class="string">"java.lang.Integer"</span> <span class="attr">resultMap</span>=<span class="string">"BaseResultMap"</span>&gt;</span></div><div class="line">    select </div><div class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"Base_Column_List"</span> /&gt;</span></div><div class="line">    from user</div><div class="line">    where Id = #&#123;id,jdbcType=INTEGER&#125;</div><div class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectUserByExample"</span> <span class="attr">parameterType</span>=<span class="string">"User"</span> <span class="attr">resultMap</span>=<span class="string">"BaseResultMap"</span>&gt;</span></div><div class="line">    SELECT</div><div class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">"Base_Column_List"</span> /&gt;</span></div><div class="line">    FROM USER</div><div class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"id != null"</span>&gt;</span></div><div class="line">        Id = #&#123;id&#125;</div><div class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"nickname != null"</span>&gt;</span></div><div class="line">        nickName = #&#123;nickname&#125;</div><div class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"password != null"</span>&gt;</span></div><div class="line">        password = #&#123;password&#125;</div><div class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"phone != null"</span>&gt;</span></div><div class="line">        phone = #&#123;phone&#125;</div><div class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"email != null"</span>&gt;</span></div><div class="line">        email = #&#123;email&#125;</div><div class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">"deleteByPrimaryKey"</span> <span class="attr">parameterType</span>=<span class="string">"java.lang.Integer"</span>&gt;</span></div><div class="line">    delete from user</div><div class="line">    where Id = #&#123;id,jdbcType=INTEGER&#125;</div><div class="line">  <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"insert"</span> <span class="attr">parameterType</span>=<span class="string">"com.zjm.model.User"</span>&gt;</span></div><div class="line">    insert into user (Id, nickName, password, </div><div class="line">      phone, email, regDate, </div><div class="line">      sex, head)</div><div class="line">    values (#&#123;id,jdbcType=INTEGER&#125;, #&#123;nickname,jdbcType=VARCHAR&#125;, #&#123;password,jdbcType=VARCHAR&#125;, </div><div class="line">      #&#123;phone,jdbcType=VARCHAR&#125;, #&#123;email,jdbcType=VARCHAR&#125;, #&#123;regdate,jdbcType=DATE&#125;, </div><div class="line">      #&#123;sex,jdbcType=INTEGER&#125;, #&#123;head,jdbcType=VARCHAR&#125;)</div><div class="line">  <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"insertSelective"</span> <span class="attr">parameterType</span>=<span class="string">"com.zjm.model.User"</span>&gt;</span></div><div class="line">    insert into user</div><div class="line">    <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">"("</span> <span class="attr">suffix</span>=<span class="string">")"</span> <span class="attr">suffixOverrides</span>=<span class="string">","</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"id != null"</span>&gt;</span></div><div class="line">        Id,</div><div class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"nickname != null"</span>&gt;</span></div><div class="line">        nickName,</div><div class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"password != null"</span>&gt;</span></div><div class="line">        password,</div><div class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"phone != null"</span>&gt;</span></div><div class="line">        phone,</div><div class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"email != null"</span>&gt;</span></div><div class="line">        email,</div><div class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"regdate != null"</span>&gt;</span></div><div class="line">        regDate,</div><div class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"sex != null"</span>&gt;</span></div><div class="line">        sex,</div><div class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"head != null"</span>&gt;</span></div><div class="line">        head,</div><div class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">"values ("</span> <span class="attr">suffix</span>=<span class="string">")"</span> <span class="attr">suffixOverrides</span>=<span class="string">","</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"id != null"</span>&gt;</span></div><div class="line">        #&#123;id,jdbcType=INTEGER&#125;,</div><div class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"nickname != null"</span>&gt;</span></div><div class="line">        #&#123;nickname,jdbcType=VARCHAR&#125;,</div><div class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"password != null"</span>&gt;</span></div><div class="line">        #&#123;password,jdbcType=VARCHAR&#125;,</div><div class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"phone != null"</span>&gt;</span></div><div class="line">        #&#123;phone,jdbcType=VARCHAR&#125;,</div><div class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"email != null"</span>&gt;</span></div><div class="line">        #&#123;email,jdbcType=VARCHAR&#125;,</div><div class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"regdate != null"</span>&gt;</span></div><div class="line">        #&#123;regdate,jdbcType=DATE&#125;,</div><div class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"sex != null"</span>&gt;</span></div><div class="line">        #&#123;sex,jdbcType=INTEGER&#125;,</div><div class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"head != null"</span>&gt;</span></div><div class="line">        #&#123;head,jdbcType=VARCHAR&#125;,</div><div class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"updateByPrimaryKeySelective"</span> <span class="attr">parameterType</span>=<span class="string">"com.zjm.model.User"</span>&gt;</span></div><div class="line">    update user</div><div class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"nickname != null"</span>&gt;</span></div><div class="line">        nickName = #&#123;nickname,jdbcType=VARCHAR&#125;,</div><div class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"password != null"</span>&gt;</span></div><div class="line">        password = #&#123;password,jdbcType=VARCHAR&#125;,</div><div class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"phone != null"</span>&gt;</span></div><div class="line">        phone = #&#123;phone,jdbcType=VARCHAR&#125;,</div><div class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"email != null"</span>&gt;</span></div><div class="line">        email = #&#123;email,jdbcType=VARCHAR&#125;,</div><div class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"regdate != null"</span>&gt;</span></div><div class="line">        regDate = #&#123;regdate,jdbcType=DATE&#125;,</div><div class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"sex != null"</span>&gt;</span></div><div class="line">        sex = #&#123;sex,jdbcType=INTEGER&#125;,</div><div class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"head != null"</span>&gt;</span></div><div class="line">        head = #&#123;head,jdbcType=VARCHAR&#125;,</div><div class="line">      <span class="tag">&lt;/<span class="name">if</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></div><div class="line">    where Id = #&#123;id,jdbcType=INTEGER&#125;</div><div class="line">  <span class="tag">&lt;/<span class="name">update</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"updateByPrimaryKey"</span> <span class="attr">parameterType</span>=<span class="string">"com.zjm.model.User"</span>&gt;</span></div><div class="line">    update user</div><div class="line">    set nickName = #&#123;nickname,jdbcType=VARCHAR&#125;,</div><div class="line">      password = #&#123;password,jdbcType=VARCHAR&#125;,</div><div class="line">      phone = #&#123;phone,jdbcType=VARCHAR&#125;,</div><div class="line">      email = #&#123;email,jdbcType=VARCHAR&#125;,</div><div class="line">      regDate = #&#123;regdate,jdbcType=DATE&#125;,</div><div class="line">      sex = #&#123;sex,jdbcType=INTEGER&#125;,</div><div class="line">      head = #&#123;head,jdbcType=VARCHAR&#125;</div><div class="line">    where Id = #&#123;id,jdbcType=INTEGER&#125;</div><div class="line">  <span class="tag">&lt;/<span class="name">update</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></div></pre></td></tr></table></figure><h4 id="测试类"><a href="#测试类" class="headerlink" title="测试类"></a>测试类</h4><p><em>进入UserMapper.java，右键——Go to—— Test——Create new test</em></p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.zjm.dao;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.zjm.model.User;</div><div class="line"><span class="keyword">import</span> com.zjm.util.MD5;</div><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</div><div class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</div><div class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringRunner;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.util.Date;</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.Assert.*;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * Created by ZJM on 2017/4/5.</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="meta">@SpringBootTest</span></div><div class="line"><span class="meta">@RunWith</span>(SpringJUnit4ClassRunner.class)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserMapperTest</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@Autowired</span></div><div class="line">    <span class="keyword">private</span> UserMapper userMapper;</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteByPrimaryKey</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        userMapper.deleteByPrimaryKey(<span class="number">2</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        User user = <span class="keyword">new</span> User();</div><div class="line">        user.setPhone(<span class="string">"13636662259"</span>);</div><div class="line">        user.setSex(<span class="number">0</span>);</div><div class="line">        user.setEmail(<span class="string">"7788521@qq.com"</span>);</div><div class="line">        user.setNickname(<span class="string">"zjm"</span>);</div><div class="line">        user.setPassword(<span class="string">"123456"</span>);</div><div class="line">        user.setRegdate(<span class="keyword">new</span> Date());</div><div class="line">        userMapper.insert(user);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertSelective</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">selectByPrimaryKey</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        User user = userMapper.selectByPrimaryKey(<span class="number">1</span>);</div><div class="line">        System.out.println(user);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateByPrimaryKeySelective</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        User user = <span class="keyword">new</span> User();</div><div class="line">        user.setId(<span class="number">1</span>);</div><div class="line">        user.setNickname(<span class="string">"shaunHaHaHa"</span>);</div><div class="line">        userMapper.updateByPrimaryKeySelective(user);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateByPrimaryKey</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">  </div><div class="line">    <span class="meta">@Test</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">selectUserByExample</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        User user = <span class="keyword">new</span> User();</div><div class="line">        user.setPassword(<span class="string">"123456"</span>);</div><div class="line">        System.out.println(userMapper.selectUserByExample(user));</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>点击方法旁边的绿色按钮运行就行了</p><h2 id="发请求测试"><a href="#发请求测试" class="headerlink" title="发请求测试"></a>发请求测试</h2><p><em>上面的是 JUnit 的单元测试，现在用发请求的方式从服务器获取响应</em></p><p><em>正常需要在controller和mapper中间建立service层，这里示例业务简单，简化省去了service层，正式的项目中再加上</em></p><h3 id="新建controller"><a href="#新建controller" class="headerlink" title="新建controller"></a>新建controller</h3><blockquote><p>在com.*.controller下新建UserMS.java</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.zjm.controller;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.sun.javafx.collections.MappingChange;</div><div class="line"><span class="keyword">import</span> com.zjm.dao.UserMapper;</div><div class="line"><span class="keyword">import</span> com.zjm.model.User;</div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</div><div class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</div><div class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</div><div class="line"></div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</div><div class="line"><span class="keyword">import</span> java.util.HashMap;</div><div class="line"><span class="keyword">import</span> java.util.List;</div><div class="line"><span class="keyword">import</span> java.util.Map;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * Created by ZJM on 2017/4/8.</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="meta">@RestController</span></div><div class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/user"</span>)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserMS</span> </span>&#123;</div><div class="line">    <span class="meta">@Autowired</span></div><div class="line">    <span class="keyword">private</span> UserMapper userMapper;</div><div class="line"></div><div class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"add"</span>)</div><div class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">add</span><span class="params">(User user)</span> </span>&#123;</div><div class="line">        userMapper.insert(user);</div><div class="line">        <span class="keyword">return</span> user;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"delete"</span>)</div><div class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String,Object&gt; <span class="title">delete</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</div><div class="line">        Map&lt;String,Object&gt; map = <span class="keyword">new</span> HashMap&lt;String,Object&gt;();</div><div class="line">        <span class="keyword">boolean</span> isOk = <span class="keyword">true</span>;</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            userMapper.deleteByPrimaryKey(id);</div><div class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">            isOk = <span class="keyword">false</span>;</div><div class="line">        &#125;</div><div class="line">        map.put(<span class="string">"status"</span>,isOk);</div><div class="line">        <span class="keyword">return</span> map;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"update"</span>)</div><div class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">update</span><span class="params">(User user)</span> </span>&#123;</div><div class="line">        userMapper.updateByPrimaryKeySelective(user);</div><div class="line">        <span class="keyword">return</span> user;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"findUserById"</span>)</div><div class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">findUserById</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> userMapper.selectByPrimaryKey(id);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"findUserByExample"</span>)</div><div class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">findUserByExample</span><span class="params">(User user)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> userMapper.selectUserByExample(user);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h3><p><em>*Application.java文件点击绿色三角，即可启动 IntelliJ 自带的 tomcat，按照配置的服务名及端口访问吧</em></p><h3 id="发请求"><a href="#发请求" class="headerlink" title="发请求"></a>发请求</h3><p><em>安装postman或者浏览器发送请求</em></p><p><strong>eg</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">http://localhost:8080/user/findUserById?id=1</div><div class="line">http://localhost:8080/user/findUserByExample?sex=1</div><div class="line">http://localhost:8080/user/delete?id=5</div><div class="line">http://localhost:8080/user/update?id=6&amp;nickname=小王</div></pre></td></tr></table></figure><p>要是用浏览器发post请求还得写表单，post请求就用 postman 发吧</p><p><strong>到此一个简单的例子就可以运行了 </strong></p>]]></content>
      
      <categories>
          
          <category> Project </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> IntelliJ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Centos下安装jdk和Tomcat</title>
      <link href="/2017/03/05/install-jdk-tomcat/"/>
      <url>/2017/03/05/install-jdk-tomcat/</url>
      <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css"><h3 id="用yum安装jdk"><a href="#用yum安装jdk" class="headerlink" title="用yum安装jdk"></a>用yum安装jdk</h3><h4 id="查看-yum-库中都有哪些-jdk-版本（暂时只发现了-openjdk）"><a href="#查看-yum-库中都有哪些-jdk-版本（暂时只发现了-openjdk）" class="headerlink" title="查看 yum 库中都有哪些 jdk 版本（暂时只发现了 openjdk）"></a>查看 yum 库中都有哪些 jdk 版本（暂时只发现了 openjdk）</h4><p><code>yum search java|grep jdk</code></p><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><p><code>yum install java-1.7.0-openjdk</code></p><h4 id="设置环境变量"><a href="#设置环境变量" class="headerlink" title="设置环境变量"></a>设置环境变量</h4><p>在profile文件中添加如下内容：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span>set java environment</div><div class="line">JAVA_HOME=/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.131</div><div class="line"><span class="meta">#</span>复制路径以防路径无法找到</div><div class="line">JRE_HOME=$JAVA_HOME/jre</div><div class="line">CLASS_PATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:$JRE_HOME/lib</div><div class="line">PATH=$PATH:$JAVA_HOME/bin:$JRE_HOME/bin</div><div class="line">export JAVA_HOME JRE_HOME CLASS_PATH PATH</div></pre></td></tr></table></figure><p>让修改生效</p><p><code>source /etc/profile</code></p><a id="more"></a><h4 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h4><p><code>java -version</code></p><h3 id="安装Tomcat"><a href="#安装Tomcat" class="headerlink" title="安装Tomcat"></a>安装Tomcat</h3><h4 id="使用wget命令："><a href="#使用wget命令：" class="headerlink" title="使用wget命令："></a>使用wget命令：</h4><p><code>wget -c http://apache.fayea.com/tomcat/tomcat-8/v8.5.11/bin/apache-tomcat-8.5.11.tar.gz</code></p><h4 id="解压"><a href="#解压" class="headerlink" title="解压"></a>解压</h4><p><code>tar -zxvf apache-tomcat-8.5.11.tar.gz</code></p><h4 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h4><p>进入解压后的<code>apache-tomcat-8.5.11 -- bin</code>目录，执行命令：</p><p><code>./startup.sh</code></p><h4 id="检查能否访问"><a href="#检查能否访问" class="headerlink" title="检查能否访问"></a>检查能否访问</h4><p><em>如果不能访问，可能是防火墙问题：</em></p><ul><li><p>关闭防火墙： <code>service firewalld stop</code></p></li><li><p>在<code>iptables</code>里添加开放 8080 端口： <code>-A RH-Firewall-1-INPUT -m state --state NEW -m tcp -p tcp --dport 8080 -j ACCEPT</code></p><p>将iptables服务重启： <code>service iptables restart</code></p></li></ul>]]></content>
      
      <categories>
          
          <category> 运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 运维 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Centos下安装mysql</title>
      <link href="/2017/03/05/install-mysql/"/>
      <url>/2017/03/05/install-mysql/</url>
      <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css"><h2 id="yum-安装"><a href="#yum-安装" class="headerlink" title="yum 安装"></a>yum 安装</h2><p><code>yum install -y mysql-server mysql mysql-devel</code></p><h2 id="启动服务"><a href="#启动服务" class="headerlink" title="启动服务"></a>启动服务</h2><p><code>service mysqld start</code></p><h2 id="给root用户设置密码"><a href="#给root用户设置密码" class="headerlink" title="给root用户设置密码"></a>给root用户设置密码</h2><p><code>mysqladmin -u root password &#39;your password&#39;</code></p><h2 id="登录"><a href="#登录" class="headerlink" title="登录"></a>登录</h2><p><code>mysql -u root -p</code></p><h2 id="查看并更改字符集"><a href="#查看并更改字符集" class="headerlink" title="查看并更改字符集"></a>查看并更改字符集</h2><p><code>show variables like &#39;character%&#39;;</code></p><a id="more"></a><p>关闭mysql服务</p><p><code>service mysqld stop</code></p><p>修改my.cnf文件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">[mysqld]</div><div class="line">default-character-set = utf8    #这个是我添加的</div><div class="line">character_set_server=utf8      #这个是我添加的</div><div class="line">init_connect='SET NAMES utf8'</div><div class="line">datadir=/var/lib/mysql</div><div class="line">socket=/var/lib/mysql/mysql.sock</div><div class="line">user=mysql</div><div class="line">symbolic-links=0</div><div class="line"> </div><div class="line">[mysqld_safe]</div><div class="line">default-character-set = utf8    #这个是我添加的</div><div class="line">log-error=/var/log/mysqld.log</div><div class="line">pid-file=/var/run/mysqld/mysqld.pid</div><div class="line"> </div><div class="line">[client]</div><div class="line">default-character-set = utf8      #这个是我添加的</div><div class="line"> </div><div class="line">[mysql.server]</div><div class="line">default-character-set = utf8      #这个是我添加的</div><div class="line"> </div><div class="line">[mysql]</div><div class="line">default-character-set = utf8      #这个是我添加的</div></pre></td></tr></table></figure><h2 id="重启服务"><a href="#重启服务" class="headerlink" title="重启服务"></a>重启服务</h2><p><code>service mysqld restart</code></p><h2 id="查看监听端口"><a href="#查看监听端口" class="headerlink" title="查看监听端口"></a>查看监听端口</h2><p><code>netstat -anp</code></p><p>mysql数据库绑定的默认端口号是 3306</p><h2 id="用本地可视化工具连接服务器数据库"><a href="#用本地可视化工具连接服务器数据库" class="headerlink" title="用本地可视化工具连接服务器数据库"></a>用本地可视化工具连接服务器数据库</h2><p>在服务器端进入mysql服务，执行：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">grant all privileges on *.* to &apos;root&apos;@&apos;%&apos; identified by &apos;your password by root&apos;;</div><div class="line">flush privileges;</div></pre></td></tr></table></figure><p><em>在本地即可登录访问</em></p>]]></content>
      
      <categories>
          
          <category> 运维 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 运维 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>priority_queue</title>
      <link href="/2017/02/06/priority-queue/"/>
      <url>/2017/02/06/priority-queue/</url>
      <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css"><h1 id="STL-priority-queue-优先队列"><a href="#STL-priority-queue-优先队列" class="headerlink" title="STL priority_queue 优先队列"></a>STL priority_queue 优先队列</h1><p><strong>在优先队列中，优先级高的元素先出队列</strong></p><blockquote><p>class template</p><h1 id="std-priority-queue"><a href="#std-priority-queue" class="headerlink" title="std::priority_queue"></a>std::priority_queue</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>, </span></div><div class="line"><span class="class">   <span class="title">class</span> <span class="title">Container</span> = <span class="title">vector</span>&lt;T&gt;,</span></div><div class="line"><span class="class">   <span class="title">class</span> <span class="title">Compare</span> = <span class="title">less</span>&lt;typename Container::value_type&gt; &gt; <span class="title">class</span>  </span></div><div class="line"><span class="class">   <span class="title">priority_queue</span>;</span></div></pre></td></tr></table></figure></blockquote><a id="more"></a><blockquote><h3 id="Priority-queue"><a href="#Priority-queue" class="headerlink" title="Priority queue"></a>Priority queue</h3><p>Priority queues are a type of container adaptors, specifically designed such that its first element is always the greatest of the elements it contains, according to some <em>strict weak ordering</em> criterion.<br>This context is similar to a <em>heap</em>, where elements can be inserted at any moment, and only the <em>max heap</em>element can be retrieved (the one at the top in the <em>priority queue</em>).<br>Priority queues are implemented as <em>container adaptors</em>, which are classes that use an encapsulated object of a specific container class as its <em>underlying container</em>, providing a specific set of member functions to access its elements. Elements are <em>popped</em> from the <em>“back”</em> of the specific container, which is known as the <em>top</em> of the priority queue.</p><p>The standard container classes <a href="http://www.cplusplus.com/vector" target="_blank" rel="external">vector</a> and <a href="http://www.cplusplus.com/deque" target="_blank" rel="external">deque</a> fulfill these requirements. By default, if no container class is specified for a particular <a href="http://www.cplusplus.com/priority_queue" target="_blank" rel="external">priority_queue</a> class instantiation, the standard container <a href="http://www.cplusplus.com/vector" target="_blank" rel="external">vector</a> is used.<br>Support of <em>random access iterators</em> is required to keep a heap structure internally at all times. This is done automatically by the container adaptor by automatically calling the algorithm functions <a href="http://www.cplusplus.com/make_heap" target="_blank" rel="external">make_heap</a>, <a href="http://www.cplusplus.com/push_heap" target="_blank" rel="external">push_heap</a> and <a href="http://www.cplusplus.com/pop_heap" target="_blank" rel="external">pop_heap</a> when needed.</p><h3 id="Template-parameters"><a href="#Template-parameters" class="headerlink" title="Template parameters"></a>Template parameters</h3><ul><li><p>T</p><p>Type of the elements.Aliased as member type priority_queue::value_type.</p></li><li><p>Container</p><p>Type of the internal <em>underlying container</em> object where the elements are stored.Its value_type shall be T.Aliased as member type priority_queue::container_type.</p></li><li><p>Compare</p><p>A binary predicate that takes two elements (of type T) as arguments and returns a <code>bool</code>.The expression <code>comp(a,b)</code>, where comp is an object of this type and a and b are elements in the container, shall return <code>true</code> if a is considered to go before b in the <em>strict weak ordering</em> the function defines.The priority_queue uses this function to maintain the elements sorted in a way that preserves <em>heap properties</em> (i.e., that the element popped is the last according to this <em>strict weak ordering</em>).This can be a function pointer or a function object, and defaults to <code>less</code>, which returns the same as applying the <em>less-than operator</em> (`a).</p></li></ul></blockquote><h3 id="小结："><a href="#小结：" class="headerlink" title="小结："></a>小结：</h3><blockquote><p>priority_queue 将其中的元素默认按照从大到小排列</p><p>默认声明：priority_queue&lt; T , vector , less &gt; q;</p><p>默认声明可省略为：priority_queue q;</p><p>声明为从小到大：priority_queue&lt; T , vector , greater &gt; q;</p><p>如果T是自定义类型，则必须重载operator&lt;</p></blockquote><h3 id="eg"><a href="#eg" class="headerlink" title="eg"></a>eg</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;queue&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Student</span> &#123;</span></div><div class="line">    <span class="built_in">string</span> name;</div><div class="line"><span class="keyword">int</span> score;</div><div class="line">Student(<span class="built_in">string</span> name,<span class="keyword">int</span> score) &#123;</div><div class="line">        <span class="keyword">this</span>-&gt;name = name;</div><div class="line">        <span class="keyword">this</span>-&gt;score = score;</div><div class="line">&#125;</div><div class="line"><span class="keyword">friend</span> <span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (Student stu1,Student stu2) &#123;</div><div class="line"><span class="keyword">return</span> stu1.score &lt; stu2.score;</div><div class="line">&#125;</div><div class="line">&#125;;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line"><span class="function"></span>&#123;</div><div class="line">    Student stu[<span class="number">3</span>] = &#123;</div><div class="line">        Student(<span class="string">"Tom"</span>,<span class="number">80</span>),</div><div class="line">        Student(<span class="string">"Jerry"</span>,<span class="number">100</span>),</div><div class="line">        Student(<span class="string">"Marry"</span>,<span class="number">90</span>)</div><div class="line">    &#125;;</div><div class="line">    priority_queue&lt;Student&gt; q;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++) &#123;</div><div class="line">        q.push(stu[i]);</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">cout</span>&lt;&lt;q.size()&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++) &#123;</div><div class="line">        Student s = q.top();</div><div class="line">        <span class="built_in">cout</span>&lt;&lt;s.name&lt;&lt;<span class="string">", "</span>&lt;&lt;s.score&lt;&lt;<span class="built_in">endl</span>;</div><div class="line">        q.pop();</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> OJ 做题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C/C++ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Share~</title>
      <link href="/2017/01/24/ky/"/>
      <url>/2017/01/24/ky/</url>
      <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css"><h1 id="分享给朋友的"><a href="#分享给朋友的" class="headerlink" title="分享给朋友的"></a>分享给朋友的</h1><p><em>Dear Mao Shuo</em>:</p><blockquote><p>你看历年分数线先给自己各科定个小目标，100+100+50+50啊，关注几个老师的微博，微信公众号：蒋中挺，何凯文，张宇，刘一男……都会有免费的直播，何凯文还有每日一句，有时间就看，没时间就算了别当负担，我每日一句就跟了一阵。直播课感觉蒋中挺的挺好的，还有回放，英语数学我都没咋听，不过我还是推荐听。我学的时间里有效的部分太少了：早上九点开始，两个半小时去吃饭，中午ZZZ，下午两点开始，三个小时又吃饭，晚上六点开始，四个小时回寝，一天最多十个小时的学习时间，真正有收获的没多少。。。我九月份还报了文都的秋季班（补暑假课程的班），因为我暑假有实训。文都的课好也不好，为了赶进度，有时一天看十个多小时的视频。往往一天下来很累了，回来就没有把一天的课进行总结整理笔记。我有一次整理了一次，花了很多时间，因为课上的内容太多，老师说的很快，好多听不懂的需要课后自己整理复习，如果没有总结复习，那课久了回看笔记就看不懂了，还会越堆越多。所以，不及时总结复习，课就等于白上，还浪费大量的时间和精力。</p></blockquote><a id="more"></a><blockquote><p>其实还是自己总结最重要了，看视频，做题，再多，自己不理解归纳总结知识点，意义都不大。做题我有一招特别好使，如果你知道这道题考的考点是什么，你一定能做对。所以，数学背笔记时一定要背考点，12345…</p><p>复习计划早制定，专业课早开始，政治选择早开始，真的不是很难，别害怕，就是路漫漫修远，坚持下来不容易。</p><p>如果我调剂不到好的学校，就做研友；复试通过，就给你书…</p></blockquote><p><em>Good luck</em></p><p><em>Shaun</em></p>]]></content>
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> life </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>排序算法小结</title>
      <link href="/2017/01/23/sort/"/>
      <url>/2017/01/23/sort/</url>
      <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css"><h1 id="数据结构排序算法时空稳"><a href="#数据结构排序算法时空稳" class="headerlink" title="数据结构排序算法时空稳"></a>数据结构排序算法时空稳</h1><table><thead><tr><th>分类</th><th>排序方法</th><th>平均情况(时)</th><th>最坏(时)</th><th>最好(时)</th><th>空间复杂度</th><th>稳定性</th></tr></thead><tbody><tr><td>插入</td><td>直接插入</td><td>O(n*n)</td><td>O(n*n)</td><td>O(n)</td><td>O(1)</td><td>稳</td></tr><tr><td></td><td>折半插入</td><td>O(n*n)</td><td></td><td></td><td>O(1)</td><td>稳</td></tr><tr><td></td><td>希尔</td><td>O(nlogn)</td><td>O(nlogn)</td><td></td><td>O(1)</td><td>不稳</td></tr><tr><td>交换</td><td>冒泡</td><td>O(n*n)</td><td>O(n*n)</td><td>O(n)</td><td>O(1)</td><td>稳</td></tr><tr><td></td><td>快速</td><td>O(nlogn)</td><td>O(n*n)</td><td>O(nlogn)</td><td>O(logn)</td><td>不稳</td></tr><tr><td>选择</td><td>简单选择</td><td>O(n*n)</td><td>O(n*n)</td><td>O(n*n)</td><td>O(1)</td><td>不稳</td></tr><tr><td></td><td>堆排</td><td>O(nlogn)</td><td>O(nlogn)</td><td>O(nlogn)</td><td>O(1)</td><td>不稳</td></tr><tr><td>其他</td><td>归并</td><td>O(nlogn)</td><td>O(nlogn)</td><td>O(nlogn)</td><td>O(n)</td><td>稳</td></tr><tr><td></td><td>基数</td><td>O(d(n+r))</td><td>O(d(n+r))</td><td>O(d(n+r))</td><td>O(r)</td><td>稳</td></tr></tbody></table><a id="more"></a><h1 id="小口诀"><a href="#小口诀" class="headerlink" title="小口诀"></a>小口诀</h1><ul><li>基于基本排序算法</li><li>时间复杂度按平均算</li><li>@马士兵老师</li></ul><blockquote><p>冒泡选择插入堆，快速希尔计基堆<br>归并O(n)快logn，其他空间都是1<br>快堆归并nlogn，插折冒选慢n方（平均时间）<br>希尔特殊1.3，基数d把两数加（平均时间）<br>希尔快选堆不稳，其他排序稳稳哒</p></blockquote><p><strong>注：</strong></p><ol><li><p><em>log 的 g 不发音</em></p></li><li><p><em>第二句空间复杂度，三四句时间</em>  </p><p>​</p></li></ol><p>​       </p><p>​      </p>]]></content>
      
      <categories>
          
          <category> 数据结构 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 排序 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Git基本操作</title>
      <link href="/2017/01/15/Git/"/>
      <url>/2017/01/15/Git/</url>
      <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css"><p><strong>Git 是目前最流行的版本管理系统</strong></p><h2 id="Windows系统安装和使用"><a href="#Windows系统安装和使用" class="headerlink" title="Windows系统安装和使用"></a>Windows系统安装和使用</h2><p>安装后会出现三个工具-Bash,-CMD,-GUI，只用-Bash就行</p><p>在你想作为本地仓库的文件夹上（或进入文件夹空白处）鼠标右键，选择Git Bash here</p><h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><h3 id="git-clone"><a href="#git-clone" class="headerlink" title="git clone"></a>git clone</h3><p>​    从远程主机复制文件到本地文件夹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span> git clone &lt;链接&gt; &lt;本地路径&gt;</div></pre></td></tr></table></figure><p>​    &lt;本地路径&gt;省略即-Bash当前路径</p><a id="more"></a><h3 id="git-remote"><a href="#git-remote" class="headerlink" title="git remote"></a>git remote</h3><ol><li><p>管理远程主机名：Git要求每个远程主机都必须指定一个主机名</p><p>添加远程主机+命名</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span> git remote add &lt;主机名&gt; &lt;网址&gt;</div></pre></td></tr></table></figure></li><li><p>列出所有远程主机</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span> git remote</div><div class="line">origin</div></pre></td></tr></table></figure></li><li><p>查看远程主机名对应的网址</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span> git remote -v</div><div class="line">origin  https://... (fetch)</div><div class="line">origin  https://...(push)</div></pre></td></tr></table></figure></li><li><p>删除主机</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span> git remote rm &lt;主机名&gt;</div></pre></td></tr></table></figure></li><li><p>改主机名</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span> git remote rename &lt;原主机名&gt; &lt;新主机名&gt;</div></pre></td></tr></table></figure></li></ol><h3 id="git-fetch"><a href="#git-fetch" class="headerlink" title="git fetch"></a>git fetch</h3><ol><li><p>远程主机有更新（commit），将更新的取回本地。默认情况下git fetch 取回所有分支（branch）的更新。如果只想取回特定分支的更新，可以指定分支名。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span> git fetch &lt;远程主机名&gt; &lt;分支名&gt;</div></pre></td></tr></table></figure><p><strong>eg</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span> git fetch origin master</div></pre></td></tr></table></figure></li><li><p>查看远程分支</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span> git branch -r</div><div class="line">origin/master    #查看远程分支</div><div class="line"></div><div class="line"><span class="meta">$</span> git branch -a  #查看所有分支（包括本地）</div><div class="line">* master</div><div class="line">  remotes/origin/master</div></pre></td></tr></table></figure></li><li><p>在本地分支上合并远程分支</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span> git merge origin/master</div></pre></td></tr></table></figure></li></ol><h3 id="git-pull"><a href="#git-pull" class="headerlink" title="git pull"></a>git pull</h3><ol><li><p>取回远程主机某分支的更新，并与本地的制定分支合并</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span> git pull &lt;远程主机名&gt; &lt;远程分支名&gt;:&lt;本地分支名&gt;</div></pre></td></tr></table></figure><p>与当前分支合并冒号后可省略</p><p><strong>eg</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span> git pull origin master</div></pre></td></tr></table></figure><p>相当于</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span> git fetch origin</div><div class="line"><span class="meta">$</span> git merge origin/master</div></pre></td></tr></table></figure></li></ol><h3 id="git-push"><a href="#git-push" class="headerlink" title="git push"></a>git push</h3><ol><li><p>将本地分支的更新，推送到远程主机</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span> git push &lt;远程主机名&gt; &lt;本地分支名&gt;:&lt;远程分支名&gt;</div></pre></td></tr></table></figure><p><strong>eg</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span> git push origin master:master</div><div class="line"><span class="meta">#</span>等同于</div><div class="line"><span class="meta">$</span> git push origin master</div></pre></td></tr></table></figure><p>如果省略远程分支名，则表示将本地分支推送与之存在”追踪关系”的远程分支（通常两者同名），如果该远程分支不存在，则会被新建。</p><p>上面命令表示，将本地的master分支推送到origin主机的master分支。</p></li><li><p>省略本地分支名，则表示删除指定的远程分支，因为这等同于推送一个空的本地分支到远程分支</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span> git push origin :master</div><div class="line"><span class="meta">#</span> 等同于</div><div class="line"><span class="meta">$</span> git push origin --delete master</div></pre></td></tr></table></figure><p>上面命令表示删除origin主机的master分支</p><p>更详细资料请参照：<a href="https://www.git-scm.com/book/en/v2" target="_blank" rel="external">https://www.git-scm.com/book/en/v2</a></p></li></ol>]]></content>
      
      <categories>
          
          <category> 版本控制 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>开篇</title>
      <link href="/2017/01/13/Begin/"/>
      <url>/2017/01/13/Begin/</url>
      <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css"><h1 id="自序"><a href="#自序" class="headerlink" title="自序"></a>自序</h1><p>​    大家好，我是一个普通的大学生，2013年考入哈尔滨工程大学软件工程专业，2017年想写博客，已经24岁。人生正在紧要关口，大的决策呼之欲出。</p><p>​    现在的我，放假在家，感到有属于自己的时间无比宝贵，没有外事打扰，想干什么就干什么，以后怕是少有了，无比珍惜。每天能做自己喜欢做的事，玩也好，学也好，不必担心衣食住行，真是最后的天堂了。</p><p>​    想把自己的收获、乐趣、心得，想法通过网站向有缘来访的朋友分享，留住生命中的点滴。</p><p>​    这两天为了建一个博客站，忙来忙去找了很多资料，问了很多朋友。总算有了点成果，虽然就是读说明书，还是很费劲，遇到的问题层出不穷……我觉的程序员最宝贵的能力就是自学能力，敢于接触新鲜事物，读懂别人的文章，英文开发文档，自己把新技术掌握了，并有自己的理解。</p><p>​    现在的我还差很多，希望在朋友的帮助下，师长的指导下，一点一点的，不断进步。</p>]]></content>
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> life </tag>
            
        </tags>
      
    </entry>
    
  
  
</search>
