<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[elastic search]]></title>
    <url>%2F2018%2F08%2F09%2Felastic-search%2F</url>
    <content type="text"><![CDATA[æ–‡æ¡£æœç´¢query string search GET (index/type)/_search(?parameter_name=parameter_value&amp;...) () å†…ä¸ºå¯é€‰é¡¹ï¼Œå¦‚æ— æ¡ä»¶æŸ¥è¯¢: GET /_search GET /_search?q=name:zjm&amp;sort=no:desc å½“æœç´¢æ¡ä»¶å¤æ‚æ—¶æž„å»º query string å¾ˆéº»çƒ¦ï¼Œç”Ÿäº§çŽ¯å¢ƒå¾ˆå°‘ä½¿ç”¨ query DSL DSL: Domain Specified Language 12345678910111213141516171819202122232425262728293031323334353637383940# æŸ¥è¯¢æ‰€æœ‰æ•°æ®GET /index/type/_search &#123; "query": &#123;"match_all":&#123;&#125;&#125;&#125;# æ¡ä»¶æŸ¥è¯¢ï¼ŒæŽ’åºGET /index1/type1/_search&#123; "query": &#123; "match": &#123; "name": "zjm" &#125; &#125;, "sort": [ &#123; "age": &#123; "order": "desc" &#125; &#125; ]&#125;# åˆ†é¡µGET /_search&#123; "query": &#123;"match_all": &#123;&#125;&#125;, "from": 1, # ä»Žç¬¬å‡ æ¡å¼€å§‹ "size": 2, # æŸ¥è¯¢çš„æ•°æ®ä¸ªæ•° "sort": [ &#123;"age": "desc"&#125; ]&#125;# æŸ¥è¯¢éƒ¨åˆ†å­—æ®µGET _search&#123; "query": &#123;"match_all": &#123;&#125;&#125;, "_source": ["name", "age"], "sort": [ &#123;"age": "asc"&#125; ]&#125; query filter è¿‡æ»¤æŸ¥è¯¢ï¼Œæ˜¯ query DSL çš„è¡¥å……ï¼Œä¸è¿›è¡ŒåŒ¹é…ç›¸å…³åº¦è®¡ç®— eg: æœç´¢ position åŒ…å« java ä¸”å¹´é¾„åœ¨ 22-24 ä¹‹é—´ 1234567891011121314151617181920212223242526272829303132333435363738394041GET /index1/type1/_search&#123; "query": &#123; "bool": &#123; # å¤šæ¡ä»¶æœç´¢ "must": [ &#123;"match": &#123; "position": "java" &#125;&#125;, &#123; "range": &#123; "age": &#123; "gte": 22, "lte": 24 &#125; &#125; &#125; ] &#125; &#125;&#125;# ä½¿ç”¨ FilterGET /index1/type1/_search&#123; "query": &#123; "bool": &#123; "must": [ &#123;"match": &#123; "position": "java" &#125;&#125; ], "filter": &#123; "range": &#123; "age": &#123; "gte": 22, "lte": 24 &#125; &#125; &#125; &#125; &#125;&#125; æ³¨ï¼šfilter åœ¨ must çš„ç»“æžœä¸­è¿›è¡Œè¿‡æ»¤ï¼Œfilterä¸­çš„å­—æ®µä¸è¿›è¡Œç›¸å…³åº¦è®¡ç®— full-text search å…¨æ–‡åŒ¹é…ï¼šposition ä¸­å«æœ‰ java æˆ– php æˆ– scaleçš„ï¼Œè¯ä¸Žè¯ä¹‹é—´å±žäºŽç‹¬ç«‹çš„æ¡ä»¶ 12345678GET /index1/type1/_search&#123; "query": &#123; "match": &#123; "position": "java php scale" &#125; &#125;&#125; phrase search çŸ­è¯­æ£€ç´¢ï¼šposition å«æœ‰ java developer è¿™ä¸ªçŸ­è¯­ï¼Œåªæœ‰ java æˆ–è€… developer ä¸è¡Œçš„å‘¦ 12345678GET /index1/type1/_search&#123; "query": &#123; "match_phrase": &#123; "position": "java developer" &#125; &#125;&#125; highlight display é«˜äº®æ˜¾ç¤º 123456789101112131415GET /index1/type1/_search&#123; "query": &#123; "match": &#123; "name": "zjm" &#125; &#125;, "highlight": &#123; "fields":[ &#123; "name" : &#123;&#125; &#125; ] &#125;&#125;]]></content>
      <categories>
        <category>elk</category>
      </categories>
      <tags>
        <tag>elasticSearch</tag>
        <tag>kibana</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[producter&consumer]]></title>
    <url>%2F2018%2F07%2F18%2Fproducter-consumer%2F</url>
    <content type="text"><![CDATA[ç”Ÿäº§è€…æ¶ˆè´¹è€…wait &amp; notifyAll ä½¿ç”¨ wait, notifyAll å®žçŽ°ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ï¼Œæ³¨æ„ä½¿ç”¨ while åˆ¤æ–­å®¹å™¨çš„å®¹é‡å’Œ notifyAll é€šçŸ¥æ‰€æœ‰ç­‰å¾…çº¿ç¨‹ï¼Œnotifyåªä¼šå”¤é†’ä¸€ä¸ªçº¿ç¨‹ï¼Œæ¯”å¦‚ç”Ÿäº§è€…å°†å®¹å™¨æ”¾æ»¡ï¼Œåˆå”¤é†’äº†ä¸€ä¸ªç”Ÿäº§è€…ï¼Œä½¿å”¤é†’çš„ç”Ÿäº§è€…è¿›å…¥æ­»å¾ªçŽ¯ï¼Œæ— æ³•å”¤é†’å…¶ä»–çº¿ç¨‹ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859import java.util.LinkedList;import java.util.concurrent.TimeUnit;public class MyContainer1&lt;T&gt; &#123; final private LinkedList&lt;T&gt; lists = new LinkedList&lt;&gt;(); final private int MAX = 10; // ç”Ÿäº§è€…æ”¾å…¥ public synchronized void put(T t) &#123; while (lists.size() == MAX) &#123; try &#123; this.wait(); // wait ä¸€èˆ¬å¤–é¢éƒ½æ˜¯ whileï¼Œå¦‚æžœç”¨ifï¼Œä¸”ç”Ÿäº§è€…å”¤é†’ç”Ÿäº§è€…ï¼Œä¼šç»§ç»­å‘ä¸‹æ‰§è¡Œå‘å®¹å™¨ä¸­æ·»åŠ ï¼Œå¯¼è‡´è¶…å‡ºæœ€å¤§å®¹é‡ &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; lists.add(t); this.notifyAll();// ä¸èƒ½ç”¨notify!!! é€šçŸ¥æ‰€æœ‰ç­‰å¾…çº¿ç¨‹ï¼Œå¸Œæœ›å”¤é†’çš„æ˜¯æ¶ˆè´¹è€… &#125; // æ¶ˆè´¹è€…å–å‡º public synchronized T get() &#123; T t = null; if (lists.size() == 0) &#123; try &#123; this.wait(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; t = lists.removeFirst(); this.notifyAll();// é€šçŸ¥ç”Ÿäº§è€…çº¿ç¨‹è¿›è¡Œç”Ÿäº§ return t; &#125; public static void main(String[] args) &#123; MyContainer1&lt;String&gt; c = new MyContainer1&lt;&gt;(); // å¯åŠ¨æ¶ˆè´¹è€…çº¿ç¨‹ for (int i=0; i&lt;10; i++) &#123; new Thread(()-&gt;&#123; for (int j=0; j&lt;5; j++) &#123; System.out.println(c.get()); &#125; &#125;, "c" + i).start(); &#125; try &#123; TimeUnit.SECONDS.sleep(2); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; // å¯åŠ¨ç”Ÿäº§è€…çº¿ç¨‹ for (int i=0; i&lt;2; i++) &#123; new Thread(()-&gt;&#123; for (int j=0; j&lt;25; j++) &#123; c.put(Thread.currentThread().getName() + " " + j); &#125; &#125;, "p" + i).start(); &#125; &#125;&#125; ReentrantLock &amp; Condition ä½¿ç”¨ ReentrantLock å’Œ Condition å®žçŽ°P-Cé—®é¢˜ï¼Œèƒ½å¤ŸæŽ§åˆ¶å“ªäº›çº¿ç¨‹ç­‰å¾…ä¸Žå”¤é†’ï¼Œå¯¹äºŽåŒä¸€ä¸ªé”ï¼Œåˆ›å»ºå¤šä¸ªCondition 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374import java.util.LinkedList;import java.util.concurrent.TimeUnit;import java.util.concurrent.locks.Condition;import java.util.concurrent.locks.Lock;import java.util.concurrent.locks.ReentrantLock;public class MyContainer2&lt;T&gt; &#123; final private LinkedList&lt;T&gt; lists = new LinkedList&lt;&gt;(); final private int MAX = 10; private Lock lock = new ReentrantLock(); private Condition producer = lock.newCondition(); private Condition consumer = lock.newCondition(); // ç”Ÿäº§è€… public void put(T t) &#123; try &#123; lock.lock(); while (lists.size() == MAX) &#123; producer.await();// æ»¡äº†ç”Ÿäº§è€…ç­‰å¾… &#125; lists.add(t); consumer.signalAll();// å”¤é†’æ¶ˆè´¹è€…æ¥å– &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; finally &#123; lock.unlock(); &#125; &#125; // æ¶ˆè´¹è€… public T get() &#123; T t = null; try &#123; lock.lock(); while (lists.isEmpty()) &#123; consumer.await();// æ²¡æœ‰å¯ä»¥å–çš„ &#125; t = lists.removeFirst(); // æœ‰åˆ™å–èµ° producer.signalAll();// é€šçŸ¥ç”Ÿäº§è€…æ”¾ &#125; catch(InterruptedException e) &#123; e.printStackTrace(); &#125; finally &#123; lock.unlock(); &#125; return t; &#125; public static void main(String[] args) &#123; MyContainer2&lt;String&gt; c = new MyContainer2&lt;&gt;(); // æ¶ˆè´¹è€…çº¿ç¨‹ 10*5ï¼Œè¦å°äºŽç”Ÿäº§è€…æ”¾å…¥çš„ä¸ªæ•° for (int i=0; i&lt;10; i++) &#123; new Thread(()-&gt;&#123; for (int j=0; j&lt;5; j++) &#123; System.out.println(c.get()); &#125; &#125;, "c" + i).start(); &#125; try &#123; TimeUnit.SECONDS.sleep(2); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; // ç”Ÿäº§è€…çº¿ç¨‹ 2*25 è¦å¤§äºŽæ¶ˆè´¹è€…å–å‡ºçš„ä¸ªæ•°ï¼Œå¦‚æžœå°äºŽæ¶ˆè´¹è€…å–å‡ºçš„ä¸ªæ•°ï¼Œæ¶ˆè´¹è€…ä¼šå› å–ä¸åˆ°è€Œæ­»å¾ªçŽ¯ for (int i=0; i&lt;2; i++) &#123; new Thread(()-&gt;&#123; for (int j=0; j&lt;25; j++) &#123; c.put(Thread.currentThread().getName() + " " + j); &#125; &#125;, "p" + i).start(); &#125; &#125;&#125;]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>Concurrent</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[concurrent]]></title>
    <url>%2F2018%2F07%2F14%2Fconcurrent%2F</url>
    <content type="text"><![CDATA[java å¹¶å‘å¤„ç†ä¸ºä»€ä¹ˆè¦åŠ é” ä¸‹é¢çš„ä¾‹å­ï¼Œè‡ªå¢žæ“ä½œä¸å…·å¤‡åŽŸå­æ€§ï¼Œå¯¼è‡´å¤šä¸ªçº¿ç¨‹åŒæ—¶å¯¹ count æ“ä½œæ—¶ç›¸äº’å½±å“ï¼Œæ¯”å¦‚ä¸€æ¬¡æ“ä½œä¸€ä¸ªçº¿ç¨‹å–åˆ°çš„ count ä¸º100ï¼Œå½“å®ƒå®Œæˆ ++ æ“ä½œæŠŠ count èµ‹å€¼ä¸º 101 çš„æ—¶å€™ï¼Œå¯èƒ½è¦†ç›–æŽ‰äº†è¿™æœŸé—´åˆ«çš„çº¿ç¨‹å¯¹count çš„æ“ä½œï¼Œæœ€åŽç»“æžœè¿œå°äºŽ100000 12345678910111213141516171819202122232425262728293031import java.util.ArrayList;import java.util.List;public class T implements Runnable &#123; private int count = 0; // åŠ ä¸Š synchronized åŽï¼Œçº¿ç¨‹ä¾æ¬¡æ‰§è¡Œrunæ–¹æ³•ï¼Œä¸ä¼šç›¸äº’å½±å“ public /*synchronized*/ void run() &#123; for (int i=0;i&lt;10000;i++) &#123; count ++; &#125; &#125; public static void main(String[] args) &#123; T t = new T(); List&lt;Thread&gt; tl = new ArrayList&lt;&gt;(); for(int i=0; i&lt;5; i++) &#123; tl.add(new Thread(t, "THREAD" + i)); &#125; tl.forEach((o)-&gt;o.start()); // ç­‰å¾…æ‰€æœ‰çº¿ç¨‹ç»“æŸ tl.forEach((o)-&gt;&#123; try &#123; o.join(); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125;); System.out.println(t.count); &#125;&#125; synchronized é”å®šå †å†…å­˜ä¸­çš„å¯¹è±¡ï¼Œçº¿ç¨‹æ‰§è¡Œè¿‡ç¨‹ä¸­ä¸€å®šè¦å–åˆ°å¯¹è±¡çš„ðŸ”’æ‰èƒ½æ‰§è¡Œï¼Œå¦åˆ™ç­‰å¾…å½“å‰çº¿ç¨‹é‡Šæ”¾å¯¹è±¡çš„ðŸ”’å¹¶èŽ·å–æ‰èƒ½æ‰§è¡Œï¼Œè¯­æ³•ï¼š 123456789101112131415161718public class Concurrent &#123; public void m() &#123; synchronized (this) &#123; // è¦å¹¶å‘å¤„ç†çš„ä»£ç  &#125; &#125; // or åŒæ­¥æ–¹æ³•ï¼šå‡½æ•°å†…çš„æ‰€æœ‰ä»£ç éƒ½åŠ é” public synchronized void m() &#123; &#125; // ä¸€ä¸‹ä¸¤ç§å†™æ³•éƒ½æ˜¯åœ¨é™æ€å‡½æ•°ä¸­é”å®šå¯¹è±¡çš„ç±» public static void m() &#123; synchronized(T.class) &#125; public synchronized static void m() &#123; &#125;&#125; æ³¨ï¼š synchronized ä¿®é¥°çš„ä»£ç è¶Šå°‘è¶Šå¥½ï¼Œä¸è¦åŒ…å«æ— éœ€å¹¶å‘å¤„ç†çš„ä»£ç  é”å®šçš„æ˜¯å †ä¸­çš„å¯¹è±¡ï¼Œä¸æ˜¯æ ˆä¸­çš„å¼•ç”¨ï¼Œåº”è¯¥é¿å…å°†é”å®šå¯¹è±¡çš„å¼•ç”¨å˜æˆå¦å¤–çš„å¯¹è±¡ ä¸è¦ä»¥å­—ç¬¦ä¸²å¸¸é‡åšé”å®šå¯¹è±¡ï¼šString a=&quot;hello&quot;; String b=&quot;hello&quot;; a å’Œ b æŒ‡å‘çš„åŒä¸€ä¸ªå¯¹è±¡ å¯¹å†™æ–¹æ³•åŠ é”ï¼Œè¯»æ–¹æ³•ä¸åŠ é”ï¼Œå®¹æ˜“äº§ç”Ÿè„è¯» (dirtyRead)ï¼ˆåœ¨æ²¡å†™å®Œå°±è¯»ï¼Œè¯»åˆ°çš„æ˜¯è¿‡æ—¶çš„å€¼ï¼‰ synchronized èŽ·å¾—çš„é”æ˜¯å¯é‡å…¥çš„ï¼šåœ¨ä¸€ä¸ªç±»çš„åŒæ­¥æ–¹æ³• a() è°ƒç”¨è¯¥ç±»ï¼ˆçˆ¶ç±»ï¼‰ä¸­çš„å¦ä¸€ä¸ªåŒæ­¥æ–¹æ³• b()ï¼Œåœ¨è¿™ä¸ªçº¿ç¨‹å·²ç»æ‹¥æœ‰äº†å¯¹è±¡çš„é”æ—¶å€™ï¼Œå†æ¬¡ç”³è¯·çš„æ—¶å€™ä»»ç„¶ä¼šå¾—åˆ°è¯¥å¯¹è±¡çš„é”ã€‚ çº¿ç¨‹æ‰§è¡Œè¿‡ç¨‹ä¸­å¦‚æžœå‘ç”Ÿå¼‚å¸¸ï¼Œé»˜è®¤æƒ…å†µé”ä¼šè¢«é‡Šæ”¾ volatile volatile å…³é”®å­—ä½¿ä¸€ä¸ªå˜é‡åœ¨å¤šä¸ªçº¿ç¨‹é—´å¯è§ åŽŸç†ï¼šAçº¿ç¨‹ç”¨åˆ°ä¸€ä¸ªå˜é‡æ—¶ï¼Œjava ä¼šåœ¨çº¿ç¨‹ä¸­ä¿ç•™ä¸€ä»½copyï¼Œè¿™æ ·å¦‚æžœ Bçº¿ç¨‹ä¿®æ”¹äº†è¯¥å˜é‡ï¼Œåˆ™ Açº¿ç¨‹æœªå¿…çŸ¥é“ï¼Œä½¿ç”¨ volatile å…³é”®å­—å¯ä»¥è®©æ‰€æœ‰çº¿ç¨‹å†åŽ»å†…å­˜é‡Œè¯»ä¸€ä¸‹æ›´æ–°å˜é‡çš„å€¼ã€‚ volatile boolean running = true; volatile ä¸èƒ½ä¿è¯å¤šçº¿ç¨‹åŒæ—¶å¯¹ä¸€ä¸ªå˜é‡ä¿®æ”¹å¸¦æ¥çš„ä¸ä¸€è‡´é—®é¢˜ï¼Œä¸èƒ½æ›¿ä»£ synchronizedï¼Œå³åªèƒ½ä¿è¯å¯è§æ€§ï¼Œä¸èƒ½ä¿è¯åŽŸå­æ€§ ä¾‹å¦‚ï¼š 123456789101112131415161718192021public class T &#123; volatile int count = 0; void m() &#123; for(int i=0; i&lt;10000; i++) count++; &#125; public static void main(String[] args) &#123; T t = new T(); List&lt;Thread&gt; threads = new ArrayList&lt;Thread&gt;(); for(int i=0; i&lt;10; i++) &#123; threads.add(new Thread(t::m, "thread-"+i)); &#125; threads.forEach((o)-&gt;o.start()); threads.forEach((o)-&gt;&#123; try &#123; o.join(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125;); System.out.println(t.count); &#125; ä¸Šé¢çš„ä¾‹å­è¾“å‡ºçš„ç»“æžœå°äºŽ100000ï¼Œå› ä¸ºå¤šçº¿ç¨‹åŒæ—¶ä¿®æ”¹å˜é‡çš„å€¼ï¼Œå³ä½¿éšæ—¶éƒ½åŽ»å†…å­˜é‡Œç›¸äº’æ›´æ–°ï¼Œä½†äº’ç›¸å½±å“ï¼Œè§£å†³åŠžæ³•æ˜¯è®© m() å‰åŠ ä¸Š synchronized ä¿®é¥°ã€‚ 123456/*volatile*/ int count = 0;synchronized void m() &#123; for (int i = 0; i &lt; 10000; i++) count++; &#125; ä½† synchronized æ•ˆçŽ‡ä¸é«˜ï¼Œæœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹æ³•å‘¢â€¦ AtomicXXX AtomicXXX ç±»çš„æ–¹æ³•éƒ½æ˜¯åŽŸå­æ€§çš„ï¼Œä½†æ˜¯å¤šä¸ªæ–¹æ³•ä¹‹é—´æ˜¯ä¸å…·å¤‡åŽŸå­æ€§çš„ AtomicXXX æ•ˆçŽ‡å¾ˆé«˜ï¼ŒæŽ¨èä½¿ç”¨ 12345678910111213141516171819202122232425public class T &#123; // volatile int count = 0; AtomicInteger count = new AtomicInteger(0); void m() &#123; for (int i = 0; i &lt; 10000; i++) // while (count.get() &lt; 10000) å¯¹äºŽcount çš„ get å’Œ incrementAndGet() ä¹‹é—´ä¸å…·æœ‰åŽŸå­æ€§ï¼Œå¯¼è‡´getçš„æ—¶å€™å°äºŽ10000ï¼Œä½†å› ä¸ºå¤šçº¿ç¨‹å…±åŒincrementå¯èƒ½ä½¿å¾—æœ€åŽç»“æžœå¤§äºŽ100000 count.incrementAndGet(); &#125; public static void main(String[] args) &#123; T t = new T(); List&lt;Thread&gt; threads = new ArrayList&lt;Thread&gt;(); for (int i = 0; i &lt; 10; i++) &#123; threads.add(new Thread(t::m, "thread-" + i)); &#125; threads.forEach((o) -&gt; o.start()); threads.forEach((o) -&gt; &#123; try &#123; o.join(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125;); System.out.println(t.count); &#125;&#125; çº¿ç¨‹é—´é€šä¿¡Wait &amp; Notify å°æ•…äº‹ï¼šåŽ•æ‰€é‡Œåªæœ‰ä¸€ä¸ªå‘ï¼Œæœ‰å¾ˆå¤šäººå†²äº†è¿›æ¥ä¸ŠåŽ•æ‰€ï¼Œåªæœ‰ä¸€ä¸ªäººå æœ‰äº†è¿™ä¸ªå‘å¹¶é”ä¸Šäº†é—¨ï¼Œå…¶ä»–äººåªèƒ½ç­‰å¾…ï¼Œå¤„äºŽå°±ç»ªçŠ¶æ€ã€‚å°±ç»ªçŠ¶æ€çš„çº¿ç¨‹æ˜¯å¤„äºŽå¯è¿è¡Œçº¿ç¨‹æ± ä¸­çš„ï¼Œå°±ç»ªçŠ¶æ€çš„çº¿ç¨‹é™¤CPUä¹‹å¤–ï¼Œå…¶ä»–è¿è¡Œæ‰€éœ€èµ„æºéƒ½å·²å…¨éƒ¨èŽ·å¾—ï¼›é‚£ä¹ˆåŽ•æ‰€å°±æ˜¯è¿™ä¸ªå¯è¿è¡Œçº¿ç¨‹æ± ï¼Œç­‰å¾…çš„äººå°±æ˜¯å°±ç»ªçº¿ç¨‹ï¼Œä¸€æ—¦é—¨å¼€äº†ï¼Œå³æœ‰ä¸€ä¸ªå°±ç»ªçº¿ç¨‹å¯ä»¥è¿è¡Œï¼›è¿™æŠŠé”å°±ç›¸å½“äºŽsynchronized é”ä½äº†å‘è¿™ä¸ªå¯¹è±¡ï¼Œå°±ç»ªçŠ¶æ€çš„äººæŒæœ‰èµ„æºä½†ä¸èƒ½è¿è¡Œï¼Œæ— å½¢ä¸­æ˜¯ä¸€ç§æµªè´¹ã€‚é‚£ä¹ˆï¼Œå¯ä¸å¯ä»¥è®©ä»–ä»¬å…ˆåˆ«æŒæœ‰èµ„æºäº†ï¼Œå…ˆç¦»å¼€åŽ•æ‰€å›žåˆ°åº§ä½åŽ» waitï¼ˆé˜»å¡žçŠ¶æ€ï¼‰ï¼Œç­‰é‡Œé¢çš„äººå‡ºæ¥äº†å†å†²è¿›åŽ»äº‰æŠ¢å‘¢ï¼Ÿé˜»å¡žçŠ¶æ€çš„çº¿ç¨‹é‡Šæ”¾å æœ‰çš„æ‰€æœ‰èµ„æºè¿›å…¥ç­‰å¾…æ± ä¸­ï¼Œè¿™ä¸ªçŠ¶æ€æ˜¯ä¸èƒ½è‡ªå·±å”¤é†’çš„ï¼Œéœ€è¦æœ‰äººé€šçŸ¥ï¼ˆnotifyï¼‰æ‰è¢«å”¤é†’ï¼ŒèŠ‚çœäº†èµ„æºã€‚ wait ä¼šé‡Šæ”¾é”ï¼Œçº¿ç¨‹è¿›å…¥é˜»å¡žæ€ï¼Œå‰ææ˜¯å…ˆèŽ·å¾—é”ï¼Œä¸€èˆ¬ä¸Ž synchronized é…åˆä½¿ç”¨ï¼Œå¤–é¢ä¸€èˆ¬æ˜¯ while notify ä¸ä¼šé‡Šæ”¾é”ï¼Œä¼šå”¤é†’ wait çš„çº¿ç¨‹ï¼Œä¸ä¼šç«‹å³é‡Šæ”¾é”ï¼›notify åªä¼šå”¤é†’ä¸€ä¸ªç­‰å¾…ï¼ˆå¯¹è±¡çš„ï¼‰çº¿ç¨‹ï¼ŒnotifyAll ä¼šå”¤é†’æ‰€æœ‰ç­‰å¾…ï¼ˆå¯¹è±¡çš„ï¼‰çº¿ç¨‹ï¼Œã€ŠEffective Javaã€‹ä¸­è¯´æ°¸è¿œä½¿ç”¨ notifyAll ä¸è¦ä½¿ç”¨ notifyã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960import java.util.concurrent.TimeUnit;public class T &#123; boolean volatile session = false; String volatile content = ""; public static void main(String[] args) &#123; T t = new T(); final Object lock = new Object(); new Thread(()-&gt;&#123; System.out.println("t1 start"); synchronized(lock) &#123; while (!t.session) &#123; try &#123; lock.wait(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; System.out.println(t.content); System.out.println("t2 end"); lock.notifyAll(); // å”¤é†’ t2 &#125; &#125;, "t1").start(); try &#123; TimeUnit.SECONDS.sleep(2); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; new Thread(()-&gt;&#123; System.out.println("t2 start"); synchronized (lock) &#123; for (int i=1; i&lt;=10; i++) &#123; System.out.println(i); if (i == 5) &#123; t.session = true; lock.notifyAll(); // å”¤é†’ t1 t.content = "Hello " + i; try &#123; lock.wait(); // é‡Šæ”¾é” &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; try &#123; TimeUnit.SECONDS.sleep(1); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; &#125; &#125;, "t2").start(); &#125;&#125; Latch wait å’Œ notify é€šä¿¡è¿‡ç¨‹æ¯”è¾ƒç¹çï¼Œä½¿ç”¨ Latch ä»£æ›¿ wait, notifyæ¥è¿›è¡Œçº¿ç¨‹é—´çš„é€šçŸ¥ï¼Œå¥½å¤„æ˜¯ä½¿é€šè®¯ç®€å•ï¼Œå¯ä»¥æŒ‡å®šç­‰å¾…æ—¶é—´ 123456789101112131415161718192021222324252627282930313233343536373839404142434445import java.util.concurrent.CountDownLatch;import java.util.concurrent.TimeUnit;public class T3 &#123; private volatile int num = 0; public static void main(String[] args) &#123; T3 t = new T3(); CountDownLatch latch = new CountDownLatch(1); // latchçš„countå€¼ä¸º1ï¼Œä¸‹é¢è‡ªå‡ä¸º0å¯å”¤é†’æ‰€æœ‰ç­‰å¾…çº¿ç¨‹ new Thread(()-&gt;&#123; System.out.println("t1 start"); if (t.num != 5) &#123; try &#123; latch.await(); // ç­‰å¾…ï¼Œæ”¾å¼ƒé” &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; System.out.println("t1 end"); &#125;, "t1").start(); try &#123; TimeUnit.SECONDS.sleep(1); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; new Thread(()-&gt;&#123; System.out.println("t2 start"); for (int i=0; i&lt;10; i++) &#123; System.out.println("t2:" + i); if (i == 5) &#123; latch.countDown(); // latchçš„countç”±1å˜0ï¼Œå”¤é†’t1 &#125; try &#123; TimeUnit.SECONDS.sleep(1); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; System.out.println("t2 end"); &#125;, "t2").start(); &#125;&#125; ReentrantLock ReentrantLock å¯ä»¥æ›¿ä»£ synchronized é”å®š this å¯¹è±¡ï¼Œé”å®šåŽå¿…é¡»è¦æ‰‹åŠ¨é‡Šæ”¾é”ï¼Œç»å¸¸åœ¨ finally ä¸­è¿›è¡Œé”çš„é‡Šæ”¾ï¼Œsynchronized é‡Šæ”¾é”åŽéšæœºé€‰æ‹©ç­‰å¾…çš„çº¿ç¨‹å¼€å§‹æ‰§è¡Œï¼ŒReentrantLock å¯ä»¥æŒ‡å®šä¸ºå…¬å¹³é”ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546public class T &#123; Lock lock = new ReentrantLock(); void m1() &#123; lock.lock(); // åŠ é” try &#123; for (int i=0; i&lt;10; i++) &#123; System.out.println(i); TimeUnit.SECONDS.sleep(1); &#125; &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; finally &#123; lock.unlock(); // æ‰‹åŠ¨é‡Šæ”¾é” &#125; &#125; // åŒ synchronized void m2() &#123;&#125; void m2() &#123; lock.lock(); System.out.println("m2 start..."); lock.unlock(); &#125; void m3() &#123; boolean isLocked = false; try &#123; isLocked = lock.tryLock(5, TimeUnit.SECONDS); // å°è¯•5sèŽ·å¾—é”ï¼ŒèŽ·å¾—ä¸åˆ°è¿”å›žfalseï¼Œç»§ç»­å‘ä¸‹æ‰§è¡Œ System.out.println("m2 start..."); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; finally &#123; if (isLocked) lock.unlock(); &#125; &#125; public static void main(String[] args) &#123; T t = new T(); new Thread(t::m1).start(); try &#123; TimeUnit.SECONDS.sleep(1); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; new Thread(t::m2).start(); &#125;&#125; å½“çº¿ç¨‹ t2 ç­‰å¾…çº¿ç¨‹ t1ï¼Œè€Œçº¿ç¨‹t1é•¿æ—¶é—´å ç”¨ cpuï¼Œå¯ä»¥æ‰‹åŠ¨è®© t2 æ‰“æ–­ t1ï¼Œä»¤ t2 æ‰§è¡Œã€‚ 12345678910111213141516171819202122232425262728Thread t1 = new Thread(()-&gt;&#123; try &#123; lock.lock(); TimeUnit.SECONDS.sleep(Integer.MAX_VALUE); &#125; catch(InterruptedException e) &#123; System.out.println("interrupted!"); &#125; finally &#123; lock.unlock(); &#125;&#125;);t1.start();// ç¡2sThread t2 = new Thread(()-&gt;&#123; boolean locked = lock.tryLock(); try &#123; lock.lockInterruptibly(); System.out.println(Thread.currentThread().getName() + " start"); TimeUnit.SECONDS.sleep(5); &#125; catch(InterruptedException e) &#123; System.out.println("t2 interrupted"); &#125; finally &#123; if (locked) lock.unlock(); &#125; System.out.println(Thread.currentThread().getName() + " end");&#125;, "t2");t2.start();// ç¡2st2.interrupt(); å…¬å¹³é”ï¼šå”¤é†’ç­‰å¾…çº¿ç¨‹æŒ‰ç…§å…ˆæ¥å…ˆæœåŠ¡çš„æœºåˆ¶è€Œä¸æ˜¯éšæœºï¼Œå½“ç„¶å…¬å¹³ä¼šå¸¦æ¥ä¸€å®šçš„è´Ÿæ‹… 12345678910111213141516171819202122import java.util.concurrent.locks.ReentrantLock;public class T4 implements Runnable&#123; private static ReentrantLock lock = new ReentrantLock(true); //å‚æ•°ä¸ºtrueè¡¨ç¤ºä¸ºå…¬å¹³é” public static void main(String[] args) &#123; T4 t = new T4(); Thread t1 = new Thread(t); Thread t2 = new Thread(t); t1.start(); t2.start(); &#125; @Override public void run() &#123; for (int i=0; i&lt;100; i++) &#123; lock.lock(); System.out.println(Thread.currentThread().getName() + "èŽ·å¾—é”"); lock.unlock(); &#125; &#125;&#125;]]></content>
      <categories>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>Concurrent</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[elasticSearch kibana install in linux]]></title>
    <url>%2F2018%2F05%2F06%2Felasticsearch-kibana-install%2F</url>
    <content type="text"><![CDATA[Linux å®‰è£… ES ES 6.3.x è¦æ±‚ Linux å†…æ ¸å¿…é¡»æ˜¯ 3.5+ç‰ˆæœ¬ä»¥ä¸Šï¼Œä¸èƒ½ç”¨ root ç”¨æˆ·å¯åŠ¨ uname -a æŸ¥çœ‹ linux å†…æ ¸ç‰ˆæœ¬ï¼Œä½ŽäºŽ3.5è¦å‡çº§å†…æ ¸ï¼Œæˆ–è€…ä½¿ç”¨Centos7 å‡çº§å†…æ ¸ æ³¨å†Œå†…æ ¸ï¼š rpm â€“import http://mirror.centos.org/centos/RPM-GPG-KEY-CentOS-7 ä¸‹è½½å†…æ ¸å®‰è£…åŒ… rpm -Uvh http://www.elrepo.org/elrepo-release-6-8.el6.elrepo.noarch.rpm å®‰è£…å†…æ ¸æ–°ç‰ˆæœ¬ yum --enablerepo=elrepo-kernel install kernel-lt -y è®¾ç½®å¯åŠ¨å†…æ ¸ç‰ˆæœ¬ vim /etc/grub.conf ä¿®æ”¹ä¸ºï¼šdefault=0 é‡å¯ç³»ç»Ÿè®©å†…æ ¸ç”Ÿæ•ˆï¼šrebootï¼ˆè¿˜æ˜¯ç›´æŽ¥ç”¨ Centos7 å§ä¹–ä¹–ï¼‰ æ³¨æ„ï¼š é«˜ç‰ˆæœ¬çš„å†…æ ¸å¯¹çº¿ç¨‹çš„å†…å­˜èµ„æºéœ€è¦æ›´é«˜çš„è¦æ±‚ï¼Œè¦ç»™è™šæ‹Ÿæœºåˆ†é… 1.5G ä»¥ä¸Šçš„å†…å­˜ é…ç½®è™šæ‹Ÿæœºç½‘å…³ï¼ŒDNSï¼Œä¿è¯èƒ½è¿žæŽ¥å¤–ç½‘ ##ä¸ºESæä¾›ç³»ç»Ÿé…ç½® ES åœ¨ Linux å®‰è£…éƒ¨ç½²éœ€è¦ç³»ç»Ÿä¸ºå…¶æä¾›è‹¥å¹²ç³»ç»Ÿé…ç½®ï¼Œå¦‚ï¼šåº”ç”¨å¯å¯åŠ¨çš„çº¿ç¨‹æ•°ï¼Œå¯ä»¥åˆ’åˆ†åˆ°çš„å†…å­˜ï¼Œæœ€å¤šå¯ä»¥åˆ›å»ºçš„æ–‡ä»¶â€¦ ä¿®æ”¹é™åˆ¶ä¿¡æ¯ ä¿®æ”¹ç³»ç»Ÿä¸­å…è®¸åº”ç”¨åˆ›å»ºæœ€å¤šæ–‡ä»¶ä¸ªæ•°çš„é™åˆ¶æƒé™ã€‚Linux é»˜è®¤é™åˆ¶åº”ç”¨æœ€å¤šåˆ›å»º 65535 ä¸ªæ–‡ä»¶ï¼Œä½†æ˜¯ ES è‡³å°‘éœ€è¦65536 ä¸ªæ–‡ä»¶çš„åˆ›å»ºæƒé™ã€‚ 1234vi /etc/security/limits.conf# å¢žåŠ * soft nofile 65536* hard nofile 65536 ä¿®æ”¹çº¿ç¨‹å¼€å¯é™åˆ¶ ä¿®æ”¹å…è®¸ç”¨æˆ·å¯åŠ¨çš„è¿›ç¨‹å¼€å¯å¤šå°‘çº¿ç¨‹ï¼ŒLinux é™åˆ¶ root ç”¨æˆ·å¼€å¯çš„è¿›ç¨‹å¯ä»¥å¯åŠ¨ä»»æ„æ•°é‡çš„çº¿ç¨‹ï¼Œå…¶ä»–ç”¨æˆ·å¼€å¯çš„è¿›ç¨‹å¯ä»¥å¼€å¯ 1024 ä¸ªçº¿ç¨‹ã€‚ä¿®æ”¹é™åˆ¶æ•°ä¸º 4096+ã€‚ES è‡³å°‘éœ€è¦4096çš„çº¿ç¨‹æ± é¢„å¤‡ 123456vi /etc/security/limits.d/90-nproc.conf# ä¿®æ”¹ä¸‹è¿°å†…å®¹* soft nproc 4096root soft nproc unlimited# æ£€æŸ¥å¯å¼€å¯çš„æœ€å¤§çº¿ç¨‹ulimit -u æ³¨ï¼šè™šæ‹Ÿæœºå†…å­˜æ˜¯ 1 Gï¼Œæœ€å¤šèƒ½å¼€å¯3000+ä¸ªçº¿ç¨‹ï¼Œä¸èƒ½æ»¡è¶³ESçš„è¦æ±‚ï¼Œæ‰€ä»¥è¦ç»™è™šæ‹Ÿæœºåˆ†é…1.5Gä»¥ä¸Šçš„å†…å­˜ ä¿®æ”¹ç³»ç»ŸæŽ§åˆ¶æƒé™ ç³»ç»ŸæŽ§åˆ¶æ–‡ä»¶æ˜¯ç®¡ç†ç³»ç»Ÿä¸­èµ„æºæŽ§åˆ¶çš„é…ç½®æ–‡ä»¶ï¼ŒESéœ€è¦å¼€è¾Ÿä¸€ä¸ª65536å­—èŠ‚ä»¥ä¸Šç©ºé—´çš„è™šæ‹Ÿå†…å­˜ã€‚Linuxé»˜è®¤ä¸å…è®¸ä»»ä½•ç”¨æˆ·å’Œåº”ç”¨ç›´æŽ¥å¼€è¾Ÿè™šæ‹Ÿå†…å­˜ 12345vi /etc/sysctl.conf# æ·»åŠ vm.max_map_count=655360# è®© sysctl é…ç½®ç”Ÿæ•ˆsysctl -p å®‰è£…JDKè‡³å°‘1.8.0_131+ è§£åŽ‹ESï¼štar -zxf elasticsearch-6.3.1.tar.gz æ³¨ï¼šES ä¸å…è®¸ root ç”¨æˆ·å¯åŠ¨ï¼Œå¦‚æžœ ES æ˜¯é€šè¿‡ root ç”¨æˆ·è§£åŽ‹çš„ï¼Œåˆ™æ‰€æœ‰è€…æ˜¯ root ç”¨æˆ·ï¼Œéœ€è¦å°†ES åº”ç”¨æ‰€æœ‰è€…æ”¹ä¸ºå…¶ä»–ç”¨æˆ· ä¿®æ”¹æ‰€æœ‰è€… 123# å…ˆç§»åŠ¨åˆ°æ™®é€šç”¨æˆ·è·¯å¾„ä¸‹ï¼š mv #path1 path2chown -R group.user elasticsearch... # æ— ç»„ç”¨æˆ·çš„ç»„åå’Œç”¨æˆ·åä¸€è‡´ ä¿®æ”¹elasticsearché…ç½®æ–‡ä»¶ è®¾ç½®å¯è®¿é—®çš„å®¢æˆ·ç«¯ã€‚0.0.0.0ä»£è¡¨ä»»æ„å®¢æˆ·ç«¯è®¿é—®ã€‚ 123vi config/elasticsearch.yml# ä¿®æ”¹ä¸‹è¿°å†…å®¹network.host: 0.0.0.0 åˆ‡æ¢ç”¨æˆ·å¯åŠ¨ï¼šsu zjmï¼Œcd elasticsearch/binï¼Œ./elasticsearch å¯åŠ¨æœåŠ¡ æµ‹è¯•è¿žæŽ¥ï¼šcurl http://ip:9200 #Linuxå®‰è£…Kibana æ˜¯ESæä¾›çš„ä¸€ä¸ªWebçš„ç®¡ç†æŽ§åˆ¶å°ï¼Œè§£åŽ‹ï¼Œå¯åŠ¨å³å¯ï¼ŒKibanaè¦æ±‚çš„çŽ¯å¢ƒé…ç½®æ˜¯å°äºŽESçš„ tar -zxf kibana.tar.gz ä¿®æ”¹ config/kibana.ymlï¼Œå¢žåŠ ï¼šserver.host: â€œ0.0.0.0â€ è¿è¡Œï¼škibana_home/bin/kabanaâ€˜ è®¿é—®ï¼šhttp://ip:5601]]></content>
      <categories>
        <category>elk</category>
      </categories>
      <tags>
        <tag>elasticSearch</tag>
        <tag>kibana</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[kibana command]]></title>
    <url>%2F2018%2F04%2F08%2Fkibana-command%2F</url>
    <content type="text"><![CDATA[Kibana å‘½ä»¤æŸ¥çœ‹Kibanaå¯åŠ¨ç»“æžœ æµè§ˆå™¨è®¿é—®ï¼šhttp://ip:5601 è¿›å…¥ dev tools æ¨¡å—ï¼Œæ‰§è¡ŒGET _cluster/health è¿”å›žå€¼ä¸­ status: greenï¼šæ¯ä¸ªç´¢å¼•çš„ primary shard å’Œ replica shard éƒ½æ˜¯ active çš„ yellowï¼šæ¯ä¸ªç´¢å¼•çš„ primary shard éƒ½æ˜¯ active çš„ï¼Œä½†éƒ¨åˆ†çš„ replica shard ä¸æ˜¯ active çš„ redï¼šä¸æ˜¯æ‰€æœ‰çš„ç´¢å¼•éƒ½æ˜¯ primary shard éƒ½æ˜¯ active çŠ¶æ€çš„ æŸ¥çœ‹å¥åº·çŠ¶æ€ GET _cat/health?v ç´¢å¼•åˆ›å»ºç´¢å¼•1234567put /test_index&#123; "settings":&#123; "number_of_shards" : 2, "number_of_replicas" : 1 &#125;&#125; ES é»˜è®¤åˆ›å»ºç´¢å¼•ä¼šåˆ†é… 5 ä¸ª primary shardï¼Œå¹¶ä¸ºæ¯ä¸ª primary shard åˆ†é…ä¸€ä¸ª replica shardã€‚é™åˆ¶ï¼šå¦‚æžœç£ç›˜ç©ºé—´ä¸è¶³ 15% æ—¶ä¸åˆ†é… replica shardï¼Œä¸è¶³ 5% æ—¶ä¸åˆ†é… primary shard å¯ä»¥è®¾ç½® primary shard çš„ä¸ªæ•°å’Œæ¯ä¸ª primary shard çš„ replica shard çš„ä¸ªæ•° ä¿®æ”¹ç´¢å¼• ç´¢å¼•ä¸€æ—¦åˆ›å»ºï¼Œprimary shard æ•°é‡ä¸å¯å˜åŒ–ï¼Œå¯ä»¥æ”¹å˜replica shard çš„æ•°é‡ï¼š 1234PUT /test_index/_settings&#123; "number_of_replicas": 2&#125; ä¸€ä¸ªä¸»åˆ†ç‰‡å’Œä»–çš„å¤‡ä»½åˆ†ç‰‡ä¸ä¼šåœ¨ä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼Œå¯¹äºŽä¸€ä¸ªä¸»åˆ†ç‰‡çš„å¤šä¸ªå¤‡ä»½åˆ†ç‰‡ä¹Ÿä¸ä¼šåœ¨ä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼ˆå¾ˆå¥½ç†è§£â€”â€”é˜²æ­¢åŒæ—¶æ¶ˆå¤±ï¼‰ åˆ é™¤ç´¢å¼• DELETE /test_index,...ï¼Œé€—å·åˆ†éš”ç´¢å¼• æŸ¥çœ‹ç´¢å¼• GET _cat/indices?v æŸ¥çœ‹åˆ†ç‰‡ GET _cat/shards?v 123456789101112# ç´¢å¼•å # ç¼–å· # ä¸»ä»Ž # æ‰€åœ¨èŠ‚ç‚¹index shard prirep state docs store ip nodetest_index 3 r STARTED 0 261b 127.0.0.1 uwrhdxHtest_index 3 p STARTED 0 261b 127.0.0.1 9kTJ5Qetest_index 1 r STARTED 0 261b 127.0.0.1 uwrhdxHtest_index 1 p STARTED 0 261b 127.0.0.1 9kTJ5Qetest_index 2 p STARTED 0 261b 127.0.0.1 uwrhdxHtest_index 2 r STARTED 0 261b 127.0.0.1 9kTJ5Qetest_index 4 p STARTED 0 261b 127.0.0.1 uwrhdxHtest_index 4 r STARTED 0 261b 127.0.0.1 9kTJ5Qetest_index 0 p STARTED 0 261b 127.0.0.1 uwrhdxHtest_index 0 r STARTED 0 261b 127.0.0.1 9kTJ5Qe å¯ä»¥å‘çŽ° test_index ç´¢å¼•æœ‰ 5 ä¸ªä¸»åˆ†ç‰‡ï¼Œæ¯ä¸ªä¸»åˆ†ç‰‡éƒ½æœ‰ä¸€ä¸ªå¤‡ä»½åˆ†ç‰‡ï¼Œå¹¶ä¸”ä¸»ä»Žåˆ†ç‰‡ä¸åœ¨ä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼Œ5 ä¸ª primary shard å¿…é¡»å…¨éƒ¨æ´»åŠ¨æ‰èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œå¦åˆ™é›†ç¾¤ state = red æ³¨ï¼šES ç´¢å¼•ä¸€æ—¦å»ºç«‹ï¼Œä¸å¯æ”¹å˜ï¼Œå³ primary shard ä¸å˜ æ–‡æ¡£æ–°å¢ž Document åœ¨ç´¢å¼•ä¸­å¢žåŠ æ–‡æ¡£ï¼Œå¦‚æžœå¢žåŠ çš„ document å¯¹åº”çš„ index ä¸å­˜åœ¨ï¼Œè‡ªåŠ¨åˆ›å»ºï¼Œå¦‚æžœ index å­˜åœ¨ï¼Œ type ä¸å­˜åœ¨ä¹Ÿè‡ªåŠ¨åˆ›å»ºã€‚ æ‰‹åŠ¨æŒ‡å®š id çš„ Document 12345678910111213141516171819202122# Put /index/type/id &#123;field: value&#125;PUT /test_index/type1/1&#123; "name": "zjm", "remark": "IT boy", "no": 1&#125;# result:&#123; "_index": "test_index", # document çš„ç´¢å¼• "_type": "type1", "_id": "1", "_version": 1, "result": "created", "_shards": &#123; "total": 2, # primary shard number "successful": 2, "failed": 0 &#125;, "_seq_no": 1, "_primary_term": 1&#125; è‡ªåŠ¨ç”Ÿæˆ id 1234567# POST /index/type&#123;field: value&#125;POST /test_index/my_type&#123; "name": "shaunjm", "remark": "my blog", "no": 2&#125; æ³¨ï¼šæ¯ä¸ª index é‡Œçš„ document ç»“æž„å·®å¼‚ä¸è¦å¤ªå¤§ï¼ æŸ¥è¯¢ Document GET æŸ¥è¯¢ï¼ˆå•æ•°æ®ï¼‰ï¼šGET /index/type/id GET /_mget æ‰¹é‡æŸ¥è¯¢ï¼ˆæ•ˆçŽ‡é«˜ï¼Œæ¯”å•æ•°æ®æŸ¥è¯¢ï¼ŒæŽ¨èï¼‰ 12345678910111213141516171819GET /_mget&#123; "docs": [ &#123; "_index": "...", "_type": "...", "_id": "..." &#125;, &#123;&#125;, &#123;&#125; ]&#125;# orGET /index/type/_mget&#123; "docs": [ &#123; "_id": "..." &#125;, &#123;&#125;, &#123;&#125; ]&#125; æ›¿æ¢ Document æ›¿æ¢ Document (å…¨é‡æ›¿æ¢) è¯­æ³•åŒæ–°å¢žå®Œå…¨ä¸€æ ·ï¼šPUT /index/type/id {field:value}ï¼ŒESä¼šå…ˆæŠŠåŽŸæ¥ id çš„æ–‡æ¡£æ ‡è®°ä¸ºdeletedï¼Œå†æ–°å»ºï¼Œå¦‚æžœä¸å­˜åœ¨ id çš„æ•°æ®åˆ™æ–°å¢ž PUT çš„å¼ºåˆ¶æ–°å¢žPUT /index/type/id/_create {} æˆ– PUT /index/type/id?op_type=create {}å¦‚æžœ id å·²ç»å­˜åœ¨åˆ™æŠ¥é”™ æ›´æ–° Document POST /index/type/id {&quot;doc&quot;:{field: value}} åªæ›´æ–° id æ–‡æ¡£çš„éƒ¨åˆ†å­—æ®µï¼Œå…ˆå°†åŽŸæ–‡æ¡£æ ‡è®°ä¸º deletedï¼Œå†å°†æ–°å­—æ®µå’Œæœªæ›´æ–°çš„å­—æ®µåˆå¹¶ç»„æˆæ–°çš„æ–‡æ¡£å¹¶åˆ›å»ºã€‚ åˆ é™¤ Document DELETE /index/type/idï¼Œæ ‡è®°æ–‡æ¡£ä¸º deletedï¼Œä¸ä¼šç›´æŽ¥ç‰©ç†åˆ é™¤ï¼Œå½“ ES å­˜å‚¨ç©ºé—´ä¸è¶³æ—¶æ‰ä¼šè¿›è¡Œç‰©ç†åˆ é™¤ï¼ŒçŠ¶æ€æ ‡è®°ä¸º deleted çš„æ–‡æ¡£ä¸ä¼šè¢«æŸ¥è¯¢æœç´¢åˆ° bulk æ‰¹å¤„ç†å¢žåˆ æ”¹ Document12345678POST /_bulk&#123;"create": &#123;"_index": "index1", "_type": "type1", "_id": "1"&#125;&#125;&#123;"name": "zjm", "age": 10&#125;&#123;"index": &#123;"_index": "index1", "_type": "type1", "_id": "1"&#125;&#125;&#123;"name": "zjm22333", "age": 15&#125;&#123;"update": &#123;"_index": "index1", "_type": "type1", "_id": "1", "_retry_on_conflict": 3&#125;&#125;&#123;"doc": &#123;"age": 18&#125;&#125;&#123;"delete": &#123;"_index": "index1", "_type": "type1", "_id": "1"&#125;&#125; 2-3 è¡Œä¸ºå¼ºåˆ¶æ–°å¢žï¼Œ4-5 è¡Œä¸ºæ–°å¢žæˆ–å…¨éƒ¨æ›¿æ¢ï¼Œ6-7 è¡Œä¸ºéƒ¨åˆ†æ›´æ–°ï¼Œ8è¡Œä¸ºåˆ é™¤ï¼Œä¸€ä¸ªæ–‡æ¡£çš„ json ä¸­ä¸èƒ½å«æœ‰æ¢è¡Œï¼Œä¸åŒçš„ json ä¸²å¿…é¡»æ¢è¡Œï¼Œè¿™æ˜¯ä¸ºäº†å­—ç¬¦ä¸²ç›´æŽ¥ä½¿ç”¨æ¢è¡Œè¿›è¡Œåˆ†éš”ï¼Œæ¯ä¸€è¡Œä¸ºä¸€ä¸ª json å¯¹è±¡ï¼Œå¦åˆ™ä»¥ { å’Œ } åšåˆ†éš”éœ€è¦åˆ›å»ºå­—ç¬¦ä¸²æ•°ç»„ï¼Œå½±å“æ•ˆçŽ‡ Document Routing ES å°†æ–‡æ¡£å­˜æ”¾åœ¨ index çš„å“ªä¸ª primary shard çš„è·¯ç”±æœºåˆ¶ï¼š primary shard = hash(routing)%numbe_of_primary_shards å…¶ä¸­ï¼Œrouting é»˜è®¤ä¸º Document çš„ idï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨æŒ‡å®šï¼š PUT /index/type/id?routing=... è¿™æ ·æŸ¥è¯¢çš„æ—¶å€™ä¹Ÿè¦å¸¦ç€ routing å€¼æ‰èƒ½æŸ¥è¯¢åˆ°ï¼Œå¦åˆ™ä¼šæŒ‰é»˜è®¤çš„ routing å€¼ï¼Œå³ id è¿›è¡Œè®¡ç®— å†™æ“ä½œï¼šè®¡ç®— routing åŽå†³å®šå†™åˆ°å“ªä¸ª primary shard ä¸Šï¼Œ Primary shard ä¼šè‡ªåŠ¨åŒæ­¥å¯¹åº”çš„ replica shardï¼›è¯»æ“ä½œï¼šè®¡ç®— routing åŽå†³å®šè¯»å“ªä¸ª primary shard æˆ–è€…å¯¹åº”çš„ replica shardï¼Œä¸€ä¸ª primary shard å¯¹åº”çš„ replica shard è¶Šå¤šï¼Œå¯é€‰æ‹©çš„èŠ‚ç‚¹è¶Šå¤šï¼Œå¹¶å‘æ€§å°±è¶Šå¥½ Document è¯»å†™æµç¨‹ è¯»ï¼šå®¢æˆ·ç«¯å‘é€çš„è¯·æ±‚ä¼šéšæœºçš„å‘é€åˆ°ä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼Œç§°ä¸ºåè°ƒèŠ‚ç‚¹ï¼ˆcoordinate nodeï¼‰ï¼Œåè°ƒèŠ‚ç‚¹é€šè¿‡è·¯ç”±ç®—æ³•æ‰¾åˆ°æœ¬æ¬¡æ“ä½œçš„ Document æ‰€åœ¨çš„ shardï¼Œå°†è¯·æ±‚è½¬å‘ primary shard æˆ–è€…å¯¹åº”çš„ replica shardï¼ˆè½®å›žç­–ç•¥æˆ–è´Ÿè½½å‡è¡¡ï¼‰ï¼Œprimary æˆ– replica shard è¿”å›žåè°ƒèŠ‚ç‚¹ï¼Œåè°ƒèŠ‚ç‚¹å†å°†ç›¸åº”è¿”å›žç»™å®¢æˆ·ç«¯ å†™ï¼šåŒæ ·æ˜¯éšæœºå‘é€è¯·æ±‚åˆ°åè°ƒèŠ‚ç‚¹ï¼Œåè°ƒèŠ‚ç‚¹è®¡ç®—å‡º Document æ‰€åœ¨çš„ shard åŽï¼Œè½¬å‘åˆ° shard æ‰€åœ¨èŠ‚ç‚¹ï¼Œprimary shard å¤„ç†å®Œè¯·æ±‚åŽä¼šåŒæ­¥å¯¹åº”çš„ replica shardï¼ŒåŒæ­¥æ•°æ®å®Œæˆï¼Œè¿”å›žç»“æžœåˆ°åè°ƒèŠ‚ç‚¹å†åˆ°å®¢æˆ·ç«¯]]></content>
      <categories>
        <category>elk</category>
      </categories>
      <tags>
        <tag>kibana</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[python-data-process]]></title>
    <url>%2F2018%2F02%2F26%2Fpython-data-process%2F</url>
    <content type="text"><![CDATA[å‰è¨€ Python ç§‘å­¦è®¡ç®—ä¸­ç”¨åˆ°çš„æ•°æ®å¤„ç†ï¼Œå›¾åƒç»˜åˆ¶çš„æ–¹æ³•è®°å½•ã€‚å¥½å¤šä¸çŸ¥é“å•¥æ„æ€ï¼Œå…ˆèƒŒä½å§ï¼Œç”¨åˆ°çš„æ—¶å€™å†æ‰¾â€¦Python åšç§‘å­¦è®¡ç®—ä¸œè¥¿æŒºå¤šçš„ï¼ŒçŽ°åœ¨è¿˜ä¸èƒ½è‡ªå·±æŽŒæ¡ï¼Œå¾—ä¸æ–­ç§¯ç´¯ éšæœºç”Ÿæˆæ­£æ€åˆ†å¸ƒçš„æ•°æ®123456789101112131415161718192021222324252627282930313233343536373839404142434445464748__author__ = 'ZJM'__time__ = '2018/2/26 15:22'import numpy as npfrom numpy.linalg import choleskyimport matplotlib.pyplot as pltimport matplotlib.mlab as mlabfrom scipy.stats import multivariate_normalfrom sklearn.mixture import GaussianMixturefrom mpl_toolkits.mplot3d import Axes3DsampleNo = 1000# ä¸€ç»´æ­£å¤ªåˆ†å¸ƒmu = 3sigma = 15np.random.seed(0)s = np.random.normal(mu, sigma, sampleNo)plt.subplot(221)n, bins, patches = plt.hist(s, 50, normed=1)# add a best fit lineline = mlab.normpdf(bins, mu, sigma)plt.plot(bins, line, 'r--')plt.xlabel('x')plt.ylabel('y')plt.title(r'$\mu=' + str(mu) + '$, $\sigma=' + str(sigma) + '$')# äºŒç»´æ­£æ€åˆ†å¸ƒmu = np.array([1, 5])sigma = np.array([[1, 0], [0, 1.5]])R = cholesky(sigma)s = np.dot(np.random.randn(sampleNo, 2), R) + muplt.subplot(222)plt.plot(s[:, 0], s[:, 1], '+')# ä¸‰ç»´æ­£å¤ªåˆ†å¸ƒmu = np.array([0] * 3)# sigma = np.array([[1, 1, 3], [1, 2, 1], [0, 0, 1]])sigma = np.diag((1, 1, 1))data = np.random.multivariate_normal(mu, sigma, 500)norm = multivariate_normal(mu, sigma)tau = norm.pdf(data)fig = plt.figure(figsize=(13, 7), facecolor='w')ax = fig.add_subplot(223, projection='3d')ax.scatter(data[:, 0], data[:, 1], data[:, 2], c='b', s=30, marker='o', depthshade=True)ax.set_xlabel('X')ax.set_ylabel('Y')plt.tight_layout()plt.show()]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Scientific Computation</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[math basic]]></title>
    <url>%2F2018%2F02%2F24%2Fmath-basic%2F</url>
    <content type="text"><![CDATA[å‰è¨€ æ•°å­¦åŠŸåº•å¤ªå·®ï¼Œæ¦‚çŽ‡è®ºä¸Žæ•°ç†ç»Ÿè®¡ã€çº¿æ€§ä»£æ•°ï¼Œå¤§é‡æ¦‚å¿µç†è§£ä¸å¤Ÿï¼Œä¹‹å‰çš„å¼ºåŒ–è®°å¿†éƒ½ä¸ºäº†åº”ä»˜è€ƒè¯•ï¼Œè®°é¢˜åž‹ã€èƒŒæ­¥éª¤ï¼ŒçŽ°åœ¨ç”¨åˆ°æ•°æ®å¤„ç†å’Œå…¬å¼æŽ¨å¯¼æ—¶å‘çŽ°éƒ½ä¸ä¼šäº†ã€‚ä¸‹é¢æŠŠä¸€äº›ç”¨åˆ°çš„æ¦‚å¿µè®°å½•ä¸‹ï¼Œä¸»è¦æ˜¯çœ‹åˆ°çš„é€šä¿—çš„è§£é‡Šï¼Œç›´è§‚å½¢è±¡çš„æè¿°ã€‚å°½é‡ä½¿æ¦‚å¿µæ´»èµ·æ¥ã€‚^ - ^ çº¿ä»£æœ€å°äºŒä¹˜æ³•æ­£äº¤é˜µ né˜¶çŸ©é˜µAï¼Œæ»¡è¶³ATA=Eï¼Œåˆ™Aä¸ºæ­£äº¤é˜µ A=(a1,a2,â€¦,an), Aä¸ºæ­£äº¤é˜µï¼Œæœ‰ï¼š aiTai=1, aiTaj=0(iâ‰ j) å³Açš„è¡Œ(åˆ—)å‘é‡éƒ½æ˜¯å•ä½å‘é‡ï¼Œä¸”ä¸¤ä¸¤æ­£äº¤ å•ä½å‘é‡ä¿è¯ATA å¯¹è§’çº¿éƒ½æ˜¯1ï¼Œæ­£äº¤ä½¿å¾—å…¶ä»–å…ƒç´ éƒ½æ˜¯0 A, B éƒ½æ˜¯né˜¶æ­£äº¤é˜µï¼Œåˆ™AÃ—Bæ˜¯æ­£äº¤é˜µ å¯¹ç§°é˜µ åæ–¹å·®çŸ©é˜µï¼ŒäºŒæ¬¡åž‹çŸ©é˜µï¼Œæ— å‘å›¾é‚»æŽ¥çŸ©é˜µéƒ½æ˜¯å¯¹ç§°é˜µ å®žå¯¹ç§°é˜µä¸åŒç‰¹å¾å€¼çš„ç‰¹å¾å‘é‡æ­£äº¤ è®¾Aä¸ºné˜¶å¯¹ç§°é˜µï¼Œåˆ™å¿…æœ‰æ­£äº¤é˜µPï¼Œä½¿å¾—P-1AP = PTAP = Î› å…¶ä¸­Pä¸ºAçš„ç‰¹å¾å‘é‡ç»„æˆçš„çŸ©é˜µï¼ŒÎ›å¯¹è§’çº¿ä¸Šæ˜¯Açš„ç‰¹å¾å€¼ï¼Œå³Aä¸ºå¯¹ç§°é˜µï¼ŒåšåˆåŒå˜æ¢ï¼Œç‰¹å¾å€¼ä¸å˜ï¼ŒAä¸ŽÎ›äº’ä¸ºåˆåŒçŸ©é˜µ æ­£å®šé˜µ ç›´è§‚ä¸Šï¼šæ­£å®šé˜µæ˜¯ä¸€ç§å®žå¯¹ç§°é˜µ å¯¹äºŽné˜¶æ–¹é˜µAï¼Œè‹¥ä»»æ„né˜¶éžé›¶å‘é‡xï¼Œéƒ½æœ‰xTAx&gt;0ï¼Œåˆ™ç§°Aæ˜¯æ­£å®šé˜µã€‚ ç»™å®šä»»æ„mÃ—nçš„çŸ©é˜µAï¼ŒATAä¸€å®šæ˜¯åŠæ­£å®šå¯¹ç§°æ–¹é˜µ å¯¹ç§°é˜µAæ˜¯æ­£å®šé˜µï¼ŒAç‰¹å¾å€¼éƒ½ä¸ºæ­£ï¼ŒAçš„é¡ºåºä¸»å­å¼éƒ½ä¸ºæ­£ å‘é‡çš„å¯¼æ•° é—®é¢˜ï¼šAä¸ºmÃ—nçš„çŸ©é˜µï¼Œxä¸ºnÃ—1çš„åˆ—å‘é‡ï¼Œåˆ™Axä¸ºmÃ—1çš„åˆ—å‘é‡ï¼Œè®°y=Axï¼Œyå¯¹xçš„åå¯¼ä¸ºAT æ¦‚çŽ‡æœŸæœ› å¹³å‡æ•°çš„æ‰©å±• å°å­¦çš„æ—¶å€™ï¼Œè€ƒè¯­æ•°å¤–ï¼Œä¸‰ç§‘ä¸€æ ·é‡è¦ï¼ŒæœŸæœ«æˆç»©ä¸‰ç§‘æ±‚å’Œé™¤ä»¥3å³å¯å¾—åˆ°å¹³å‡åˆ†ã€‚å¤§å­¦äº†ï¼Œæ¯ç§‘éƒ½æœ‰å­¦åˆ†ï¼Œå­¦åˆ†å¤§çš„æ›´é‡è¦ï¼Œåœ¨æ‰€æœ‰ç§‘ç›®ä¸­å çš„æ¯”é‡å°±å¤§ã€‚æ±‚å¹³å‡åˆ†æ—¶å°±è¦å¸¦ç€æƒé‡å•¦ã€‚xk çš„æ¦‚çŽ‡pk å°±ç›¸å½“äºŽå®ƒçš„æƒé‡ã€‚æœŸæœ›ååº”æ•°æ®çš„å¹³å‡æ°´å¹³ã€‚ ç¦»æ•£åž‹ï¼š è¿žç»­åž‹ï¼š æ–¹å·® è¡¡é‡éšæœºå˜é‡æˆ–ä¸€ç»„æ•°æ®æ—¶ç¦»æ•£ç¨‹åº¦ åœ¨ç»Ÿè®¡æè¿°ä¸­ï¼š åœ¨æ¦‚çŽ‡åˆ†å¸ƒä¸­ï¼š ç¦»æ•£åž‹ï¼š â€‹ å±•å¼€åŽï¼š è¿žç»­åž‹ï¼š åæ–¹å·®Cov æè¿°ä¸¤ä¸ªå˜é‡åœ¨å˜åŒ–è¿‡ç¨‹ä¸­åŒå‘è¿˜æ˜¯åå‘ï¼ŒåŠå…¶ç¨‹åº¦ã€‚ ä½ å¤§æˆ‘ä¹Ÿå¤§ï¼ŒåŒå‘ï¼Œåæ–¹å·®ä¸ºæ­£ ä½ å¤§æˆ‘å°ï¼Œåå‘ï¼Œåæ–¹å·®ä¸ºè´Ÿ åæ–¹å·®æ•°å€¼ç»å¯¹å€¼è¶Šå¤§åˆ™ç¨‹åº¦è¶Šå¼º ç›¸å…³ç³»æ•°Ï ä¹Ÿå¯ä»¥åæ˜ ä¸¤ä¸ªå˜é‡å˜åŒ–æ—¶æ˜¯åŒå‘è¿˜æ˜¯åå‘ï¼Œå¦‚æžœåŒå‘å˜åŒ–å°±ä¸ºæ­£ï¼Œåå‘å˜åŒ–å°±ä¸ºè´Ÿã€‚ ç”±äºŽé™¤ä»¥äº†ä¸¤ä¸ªå˜é‡çš„æ ‡å‡†å·®ï¼Œæ¶ˆé™¤äº†å˜åŒ–å¹…åº¦çš„å½±å“ï¼Œåªè€ƒè™‘å˜åŒ–çŽ‡çš„ç›¸ä¼¼ç¨‹åº¦ ä¼¼ç„¶å‡½æ•° Likehood function ä¼¼ç„¶å‡½æ•° æ˜¯å…³äºŽç»Ÿè®¡æ¨¡åž‹ä¸­çš„å‚æ•°çš„å‡½æ•° ç»™å®šè¾“å‡º x æ—¶ï¼Œå…³äºŽå‚æ•°Î¸çš„ä¼¼ç„¶å‡½æ•°L(Î¸|x)=P(X=x|Î¸) æ¦‚çŽ‡æè¿°äº†å·²çŸ¥å‚æ•°æ—¶çš„éšæœºå˜é‡çš„è¾“å‡ºç»“æžœï¼›ä¼¼ç„¶æè¿°å·²çŸ¥éšæœºå˜é‡è¾“å‡ºç»“æžœæ—¶ï¼ŒæœªçŸ¥å‚æ•°çš„å¯èƒ½å–å€¼ ç¦»æ•£åž‹ L(Î¸|x) = P(X=x|Î¸) æˆ– P(X=x;Î¸) è¿žç»­åž‹ L(Î¸|x) = f(x|Î¸) æ±‚æžå¤§ä¼¼ç„¶å‡½æ•° å†™å‡ºä¼¼ç„¶å‡½æ•° å¯¹ä¼¼ç„¶å‡½æ•°å–å¯¹æ•° æ±‚å¯¼æ•° è§£ä¼¼ç„¶æ–¹ç¨‹]]></content>
      <categories>
        <category>mechine learning</category>
      </categories>
      <tags>
        <tag>statistic</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[backtracking questions]]></title>
    <url>%2F2018%2F02%2F23%2Fbacktracking-questions%2F</url>
    <content type="text"><![CDATA[å›žæº¯æ³•æ±‚å¹‚é›†ã€æŽ’åˆ—ç»„åˆã€å›žæ–‡åŒºåˆ†å¹‚é›†æ— é‡å¤å…ƒç´ å‘å¹‚é›† Given a set of distinct integers, nums, return all possible subsets (the power set). Note: The solution set must not contain duplicate subsets. For example,If nums = [1,2,3], a solution is:[[3], [1], [2], [1,2,3], [1,3], [2,3], [1,2], []] 1234567891011121314151617def subsets(self, nums): """ :type nums: List[int] :rtype: List[List[int]] """ ans = [] l = len(nums) def backtrack(tempList, start): ans.append(tempList) for i in range(start, l): tempList.append(nums[i]) backtrack(tempList[:], i+1) tempList.pop() backtrack([], 0) return ans å­˜åœ¨é‡å¤å…ƒç´ çš„å¹‚é›† Given a collection of integers that might contain duplicates, nums, return all possible subsets (the power set). Note: The solution set must not contain duplicate subsets. or example,If nums = [1,2,2], a solution is: [[2], [1], [1,2,2], [2,2], [1,2], []] 123456789101112131415161718192021def subsetWithDup(self, nums): """ :type nums: List[int] :rtype: List[List[int]] """ l = len(nums) ans = [] nums = sorted(nums) tempList = [] def backtrack(start): ans.append(tempList[:]) for i in range(start, l): if i &gt; start and nums[i] == nums[i-1]: # skip duplicates continue tempList.append(nums[i]) backtrack(i+1) tempList.pop() backtrack(0) return ans å…¨æŽ’åˆ—é—®é¢˜æ— é‡å¤å…ƒç´ çš„å…¨æŽ’åˆ— Given a collection of distinct numbers, return all possible permutations. For example,[1,2,3] have the following permutations: [[1,2,3], [1,3,2], [2,1,3], [2,3,1], [3,1,2], [3,2,1]] 12345678910111213141516171819202122def permute(self, nums): """ :type nums: List[int] :rtype: List[List[int]] """ l = len(nums) ans = [] tempList = [] def backtrack(): if len(tempList) == l: ans.append(tempList[:]) else: for i in range(l): if nums[i] in tempList: continue tempList.append(nums[i]) backtrack() tempList.pop() backtrack() return ans å­˜åœ¨é‡å¤å…ƒç´ çš„å…¨æŽ’åˆ— Given a collection of numbers that might contain duplicates, return all possible unique permutations. For example,[1,1,2] have the following unique permutations: [[1,1,2], [1,2,1], [2,1,1]] 1234567891011121314151617181920212223242526def permuteWithUnique(self, nums): """ :type nums: List[int] :rtype: List[List[int]] """ nums = sorted(nums) l = len(nums) ans = [] tempList = [] used = [False] * l def backtrack(): if len(tempList) == l: ans.append(tempList[:]) else: for i in range(l): if used[i] or i &gt; 0 and nums[i] == nums[i-1] and not used[i-1]: continue used[i] = True tempList.append(nums[i]) backtrack() used[i] = False tempList.pop() backtrack() return ans Input: [3, 3, 0, 3] Output: [[0, 3, 3, 3], [3, 0, 3, 3], [3, 3, 0, 3], [3, 3, 3, 0]] ç»„åˆé—®é¢˜å…ƒç´ å¯ä»¥ç”¨å¤šæ¬¡ Given a set of candidate numbers (C) (without duplicates) and a target number (T), find all unique combinations in C where the candidate numbers sums to T. For example, given candidate set [2, 3, 6, 7] and target 7,A solution set is: [ [7], [2, 2, 3] ] 123456789101112131415161718192021222324def combinationSum(self, candidates, target): """ :type candidates: List[int] :type target: int :rtype: List[List[int]] """ ans = [] l = len(candidates) tempList = [] candidates = sorted(candidates) def backtrack(remain, start): if remain &lt; 0: return if remain == 0: ans.append(tempList[:]) else: for i in range(start, l): tempList.append(candidates[i]) backtrack(remain-candidates[i], i) tempList.pop() backtrack(target, 0) return ans å…ƒç´ åªèƒ½ç”¨ä¸€æ¬¡ Given a collection of candidate numbers (C) and a target number (T), find all unique combinations in C where the candidate numbers sums to T. Each number in C may only be used once in the combination. For example, given candidate set [10, 1, 2, 7, 6, 1, 5] and target 8,A solution set is: [[1, 7], [1, 2, 5], [2, 6], [1, 1, 6]] 1234567891011121314151617181920212223242526def combinationSum2(self, candidates, target): """ :type candidates: List[int] :type target: int :rtype: List[List[int]] """ l = len(candidates) ans = [] templist = [] candidates = sorted(candidates) def backtrack(remain, start): if remain &lt; 0: return if remain == 0: ans.append(templist[:]) else: for i in range(start, l): if i &gt; start and candidates[i] == candidates[i-1]: continue templist.append(candidates[i]) backtrack(remain - candidates[i], i+1) templist.pop() backtrack(target, 0) return ans æ‰¾å›žæ–‡å­é›† Given a string s, partition s such that every substring of the partition is a palindrome. Return all possible palindrome partitioning of s. For example, given s = &quot;aab&quot;,Return [[&quot;aa&quot;,&quot;b&quot;], [&quot;a&quot;,&quot;a&quot;,&quot;b&quot;]] 1234567891011121314151617181920212223242526272829def partition(self, s): """ :type s: str :rtype: List[List[str]] """ l = len(s) ans = [] tempList = [] def isPalindrome(low, high): while low &lt; high: if s[low] != s[high]: return False low += 1 high -= 1 return True def backtrack(start): if start == l: ans.append(tempList[:]) else: for i in range(start, l): if isPalindrome(start, i): tempList.append(s[start: i+1]) backtrack(i+1) tempList.pop() backtrack(0) return ans summary: æˆ‘è¿˜æ²¡çœ‹æ‡‚â€¦ ä»¥åŽå†æ›´æ–° -_-||| Copy fromï¼šhttps://leetcode.com/problems/subsets/discuss/27281/A-general-approach-to-backtracking-questions-in-Java-(Subsets-Permutations-Combination-Sum-Palindrome-Partitioning)]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>Algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[java map-reduce]]></title>
    <url>%2F2018%2F02%2F11%2Fjava-map-reduce%2F</url>
    <content type="text"><![CDATA[Javaå¼€å‘Map/Reduceç¨‹åºMRç¨‹åºæ‰§è¡Œæ–¹å¼ï¼š åœ¨æœ¬åœ°è¿è¡Œï¼Œè¾“å…¥è¾“å‡ºéƒ½åœ¨æœ¬åœ°ï¼Œç”¨äºŽè°ƒè¯•ç¨‹åº æŠŠè¿œç¨‹æ•°æ®æ‹‰åˆ°æœ¬åœ°è¿è¡Œï¼Œè¾“å‡ºä¼ å›žè¿œç¨‹ï¼Œåªé€‚åˆæ•°æ®é‡å° åœ¨è¿œç¨‹è¿è¡Œï¼Œè¾“å…¥è¾“å‡ºéƒ½åœ¨è¿œç¨‹ ##Javaç¨‹åºåœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œ é…ç½®ç³»ç»ŸçŽ¯å¢ƒå˜é‡HADOOP_HOMEï¼ŒæŒ‡å‘hadoopå®‰è£…ç›®å½•ï¼ˆå¦‚æžœä½ ä¸æƒ³æ‹›æƒ¹ä¸å¿…è¦çš„éº»çƒ¦ï¼Œä¸è¦åœ¨ç›®å½•ä¸­åŒ…å«ç©ºæ ¼æˆ–è€…ä¸­æ–‡å­—ç¬¦ï¼‰ æŠŠHADOOP_HOME/binåŠ åˆ°PATHçŽ¯å¢ƒå˜é‡ï¼ˆéžå¿…è¦ï¼Œåªæ˜¯ä¸ºäº†æ–¹ä¾¿ï¼‰ å¦‚æžœæ˜¯åœ¨windowsä¸‹å¼€å‘ï¼Œéœ€è¦æ·»åŠ windowsçš„åº“æ–‡ä»¶ æŠŠç›˜ä¸­å…±äº«çš„binç›®å½•è¦†ç›–HADOOP_HOME/bin å¦‚æžœè¿˜æ˜¯ä¸è¡Œï¼ŒæŠŠå…¶ä¸­çš„hadoop.dllå¤åˆ¶åˆ°c:\windows\system32ç›®å½•ä¸‹ï¼Œå¯èƒ½éœ€è¦é‡å¯æœºå™¨ mavenå¼•å…¥ä¾èµ– æ–°å»ºé¡¹ç›®ï¼Œå¼•å…¥hadoop æ‰€éœ€è¦çš„jaræ–‡ä»¶ 1234567891011121314151617181920212223242526&lt;properties&gt; &lt;project.build.sourceencoding&gt;UTF-8&lt;/project.build.sourceencoding&gt; &lt;hadoop.version&gt;2.7.3&lt;/hadoop.version&gt;&lt;/properties&gt;&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.12&lt;/version &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt; &lt;artifactId&gt;hadoop-client&lt;/artifactId&gt; &lt;version&gt;$&#123;hadoop.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt; &lt;artifactId&gt;hadoop-common&lt;/artifactId&gt; &lt;version&gt;$&#123;hadoop.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt; &lt;artifactId&gt;hadoop-hdfs&lt;/artifactId&gt; &lt;version&gt;$&#123;hadoop.version&#125;&lt;/version&gt; &lt;/dependency&gt;&lt;/dependencies&gt; ä»£ç WordMapper.java1234567891011121314151617181920212223package com.zjm;import java.io.IOException;import org.apache.hadoop.io.IntWritable;import org.apache.hadoop.io.LongWritable;import org.apache.hadoop.io.Text;import org.apache.hadoop.mapreduce.Mapper;public class WordMapper extends Mapper&lt;LongWritable, Text, Text, IntWritable&gt;&#123; @Override protected void map(LongWritable key, Text value, Mapper&lt;LongWritable, Text, Text, IntWritable&gt;.Context context) throws IOException, InterruptedException &#123; final IntWritable ONE = new IntWritable(1); String s = value.toString(); String[] words = s.split(" "); for(String word: words) &#123; context.write(new Text(word), ONE); &#125; &#125; &#125; WordReduce.java12345678910111213141516171819202122package com.zjm;import java.io.IOException;import org.apache.hadoop.io.IntWritable;import org.apache.hadoop.io.LongWritable;import org.apache.hadoop.io.Text;import org.apache.hadoop.mapreduce.Reducer;public class WordReducer extends Reducer&lt;Text, IntWritable, Text, LongWritable&gt;&#123; @Override protected void reduce(Text key, Iterable&lt;IntWritable&gt; values, Reducer&lt;Text, IntWritable, Text, LongWritable&gt;.Context context) throws IOException, InterruptedException &#123; long count = 0; for(IntWritable v: values) &#123; count += v.get(); &#125; context.write(key, new LongWritable(count)); &#125;&#125; mainå‡½æ•°1234567891011121314151617181920212223242526272829303132333435363738package com.zjm;import org.apache.hadoop.conf.Configuration;import org.apache.hadoop.fs.Path;import org.apache.hadoop.io.IntWritable;import org.apache.hadoop.io.LongWritable;import org.apache.hadoop.io.Text;import org.apache.hadoop.mapreduce.Job;import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;import org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;public class Test &#123; public static void main(String[] args) throws Exception&#123; Configuration conf = new Configuration(); conf.set("fs.defaultFS", "hdfs://master:9000/"); // å°†é¡¹ç›®æ‰“åŒ…åˆ°é¡¹ç›®è·Ÿç›®å½•ä¸‹ conf.set("mapreduce.job.jar", "wc.jar"); conf.set("mapreduce.framework.name", "yarn"); conf.set("yarn.resourcemanager.hostname", "master"); conf.set("mapreduce.app-submission.cross-platform","true"); Job job = Job.getInstance(conf); job.setMapperClass(WordMapper.class); job.setReducerClass(WordReducer.class); job.setMapOutputKeyClass(Text.class); job.setMapOutputValueClass(IntWritable.class); // Reduce çš„è¾“å‡ºç±»åž‹ job.setOutputKeyClass(Text.class); job.setOutputValueClass(LongWritable.class); FileInputFormat.setInputPaths(job, "/input/"); FileOutputFormat.setOutputPath(job, new Path("/output")); job.waitForCompletion(true); &#125;&#125; æ³¨ï¼š winç³»ç»Ÿçš„hostsæ–‡ä»¶æ·»åŠ è™šæ‹Ÿæœºçš„IPå’Œä¸»æœºå é…ç½®hadoopåœ¨winç³»ç»Ÿçš„çŽ¯å¢ƒå˜é‡ Run as â€”â€” Run Configurations â€”â€” Arguments â€”â€” VM arguments: -DHADOOP_USER_NAME=root]]></content>
      <categories>
        <category>Big Data</category>
      </categories>
      <tags>
        <tag>Hadoop</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Yarn&Map/Reduce]]></title>
    <url>%2F2018%2F02%2F09%2FYarn-Map-Reduce%2F</url>
    <content type="text"><![CDATA[åˆ†å¸ƒå¼è®¡ç®— è®¾è®¡åŽŸåˆ™ï¼šç§»åŠ¨è®¡ç®—ï¼Œä¸ç§»åŠ¨æ•°æ® Yarn Yarn: èµ„æºè°ƒåº¦ ä¸»ä»Žç»“æž„ï¼šResourceManager å’Œ NodeManager ResourceManager å°†ä»»åŠ¡åˆ†é…ç»™ç©ºé—²çš„æœºå™¨(slave)å·¥ä½œï¼ŒNodeManageråœ¨slaveä¸­åšå…·ä½“çš„èµ„æºåˆ©ç”¨ï¼ŒRMç®¡ç†NM yarn-site.xmlçš„é…ç½® ä¿®æ”¹ResourceManagerå’ŒNodeManagerçš„vim hadoop/etc/hadoop/yarn-site.xml 1234567891011121314&lt;property&gt; &lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt; &lt;value&gt;master&lt;/value&gt;&lt;/property&gt; &lt;property&gt; &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt; &lt;value&gt;mapreduce_shuffle&lt;/value&gt; &lt;/property&gt; &lt;property&gt; &lt;name&gt;yarn.nodemanager.auxservices.mapreduce.shuffle.class&lt;/name&gt; &lt;value&gt;org.apache.hadoop.mapred.ShuffleHandler&lt;/value&gt;&lt;/property&gt; ###å¯åŠ¨yarné›†ç¾¤ start-yarn.sh è®¿é—®8088ç«¯å£ Map/Reduce åœ¨ ResourceManagerä¸Šé…ç½®mapred-site.xml 1234&lt;property&gt; &lt;name&gt;mapreduce.framework.name&lt;/name&gt; &lt;value&gt;yarn&lt;/value&gt;&lt;/property&gt; æ‰§è¡Œç¤ºä¾‹ç¨‹åº 1hadoop jar /usr/local/hadoop/share/hadoop/mapreduce/hadoop-mapreduce-examples-2.7.3.jar wordcount /input/input.txt /output æŸ¥çœ‹è¿è¡Œç»“æžœ hadoop fs -text /output/part-r-00000 Map/Reduce æµç¨‹ input split æ‹†åˆ†ï¼ˆä¸€è¡Œä¸€è¡Œï¼‰ map æ˜ å°„ï¼ˆé”®å€¼å¯¹ï¼‰ shuffle æ´¾å‘ï¼ˆé”®å€¼å¯¹æ´¾å‘åˆ°ä¸€ä¸ªnodeManagerï¼‰ reduce ç¼©å‡ï¼ˆæŒ‰é”®ç»Ÿè®¡å€¼çš„å’Œï¼‰ output]]></content>
      <categories>
        <category>Big Data</category>
      </categories>
      <tags>
        <tag>Hadoop</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[java hdfs]]></title>
    <url>%2F2018%2F02%2F08%2Fjava-hdfs%2F</url>
    <content type="text"><![CDATA[Javaç¨‹åºè®¿é—®HDFSå¯¼å…¥æ‰€éœ€çš„jaræ–‡ä»¶ 12345678910111213&lt;!-- https://mvnrepository.com/artifact/org.apache.hadoop/hadoop-common --&gt;&lt;dependency&gt; &lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt; &lt;artifactId&gt;hadoop-common&lt;/artifactId&gt; &lt;version&gt;2.7.3&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt;&lt;/dependency&gt;&lt;!-- https://mvnrepository.com/artifact/org.apache.hadoop/hadoop-hdfs --&gt;&lt;dependency&gt; &lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt; &lt;artifactId&gt;hadoop-hdfs&lt;/artifactId&gt; &lt;version&gt;2.7.3&lt;/version&gt;&lt;/dependency&gt; 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263package dbfs;import java.io.FileInputStream;import java.math.BigDecimal;import org.apache.hadoop.conf.Configuration;import org.apache.hadoop.fs.FSDataOutputStream;import org.apache.hadoop.fs.FileStatus;import org.apache.hadoop.fs.FileSystem;import org.apache.hadoop.fs.Path;import org.apache.hadoop.io.IOUtils;public class HelloHDFS &#123; public static void main(String args[]) throws Exception &#123;// URL.setURLStreamHandlerFactory(new FsUrlStreamHandlerFactory());// URL url = new URL("hdfs://192.168.137.100:9000/hello.txt");// InputStream in = url.openStream();// IOUtils.copyBytes(in, System.out, 4096, true); Configuration conf = new Configuration(); conf.set("fs.defaultFS", "hdfs://192.168.137.100:9000"); // ä¿®æ”¹hdfsé…ç½®å‚æ•°å€¼ conf.set("dfs.replication", "5"); FileSystem fileSystem = FileSystem.get(conf); // åˆ¤æ–­è·¯å¾„æ˜¯å¦å­˜åœ¨ boolean success = fileSystem.exists(new Path("/zjm")); System.out.println(success); // æ–°å»ºè·¯å¾„ï¼Œæ³¨æ„å¦‚æžœå·²ç»å­˜åœ¨åŒåç›®å½•ä¼šè¦†ç›–åŽŸç›®å½•x_x success = fileSystem.mkdirs(new Path("/zjm")); System.out.println(success); // åˆ é™¤ success = fileSystem.delete(new Path("/zjm"), true); System.out.println(success); // ä¸Šä¼ æ–‡ä»¶ FSDataOutputStream out = fileSystem.create(new Path("/test.data")); FileInputStream fis = new FileInputStream("F:learn/mashibing/hadoop/é©¬å£«å…µhadoop2.7å…¥é—¨_03.mp4"); IOUtils.copyBytes(fis, out, 4096, true); fileSystem.delete(new Path("/video"), true); // ä¸Šä¼ æ–‡ä»¶ï¼šIOæµå¯è®¡ç®—ä¸Šä¼ è¿›åº¦ FSDataOutputStream out = fileSystem.create(new Path("/video")); FileInputStream in = new FileInputStream("F:learn/mashibing/hadoop/é©¬å£«å…µhadoop2.7å…¥é—¨_03.mp4"); int total = in.available(); byte[] buf = new byte[4096]; int len = in.read(buf); int now = len; while(len != -1) &#123; // ä¸Šä¼ ç™¾åˆ†æ¯”ï¼Œä¿ç•™å°æ•°ç‚¹åŽä¸¤ä½ System.out.println(new BigDecimal((float)now/total*100).setScale(2, BigDecimal.ROUND_HALF_UP).doubleValue()); out.write(buf, 0, len); len = in.read(buf); now += len; &#125; in.close(); out.close(); // æŸ¥çœ‹æ–‡ä»¶ç»“æž„ FileStatus[] statuses = fileSystem.listStatus(new Path("/")); for(FileStatus status: statuses) &#123; System.out.println(status.getPath()); System.out.println(status.getPermission()); System.out.println(status.getReplication()); &#125; &#125;&#125; æ³¨ï¼šéœ€è¦å…³é—­æƒé™æ£€æŸ¥ï¼Œå‘hdfs-site.xmlä¸­æ·»åŠ å¹¶é‡å¯hdfs 1234&lt;property&gt; &lt;name&gt;dfs.permissions.enabled&lt;/name&gt; &lt;value&gt;false&lt;/value&gt;&lt;/property&gt; description: If â€œtrueâ€, enable permission checking in HDFS. If â€œfalseâ€, permission checking is turned off, but all other behavior is unchanged. Switching from one parameter value to the other does not change the mode, owner or group of files or directories.]]></content>
      <categories>
        <category>Big Data</category>
      </categories>
      <tags>
        <tag>Hadoop</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[hadoop hdfs]]></title>
    <url>%2F2018%2F02%2F06%2Fhadoop-hdfs%2F</url>
    <content type="text"><![CDATA[åœ¨å¤šå°æœåŠ¡å™¨ä¸Šé…ç½®Hadoop å¯åŠ¨namenodeå’Œdatanode hadoop-daemon.sh start namenode(datanode) åœ¨masterä¸Šæ£€æµ‹datanode hdfs dfsadmin -report | more åœ¨webé¡µé¢è§‚å¯Ÿhadoopé›†ç¾¤æƒ…å†µ 192.168.137.100:50070 é›†ä¸­ç®¡ç†Slaves åœ¨/usr/local/hadoop/etc/hadoopä¸‹çš„slavesæ–‡ä»¶ä¸­æ·»åŠ slavesçš„ä¸»æœºåï¼Œåœ¨masterä¸­å°±å¯ä»¥ç®¡ç†å…¶ä¸­çš„æ‰€æœ‰slavesï¼Œå¦‚ï¼š 123slave1slave2slave3 æ‰§è¡Œï¼šstart-dfs.shï¼Œè¾“å…¥master, slave, secondaryNameNodeçš„å¯†ç  ä¸ºäº†é¿å…è¾“å…¥å¤šæ¬¡çš„å¯†ç ï¼Œåœ¨ /.ssh ä¸‹æ‰§è¡Œ ssh-keygen -t rsa å›žè½¦ä¸‰æ¬¡ï¼Œå‘çŽ°.sshä¸‹ç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼šid_ras ï¼ˆç§é’¥ï¼‰å’Œ id_ras.pubï¼ˆå…¬é’¥ï¼‰ ä»Žmasterå‘é€å…¬é’¥åˆ°master, slave1, slave2, slave3ï¼šssh-copy-id master, ssh-copy-id slave1, ssh-copy-id slave2, ssh-copy-id slave3 ä»¥åŽssh IP å°±ä¸ç”¨å†è¾“å…¥å¯†ç äº†ï¼Œå†æ‰§è¡Œstart-dfs.shæ—¶å°±ä¸ç”¨å†æ¬¡è¾“å…¥å¯†ç äº† hdfsæ–‡ä»¶ç³»ç»ŸæŒ‡ä»¤ hadoop fs -lsæˆ–hdfs dfs -ls æ”¾ç½®ä¸€ä¸ªæ–‡ä»¶åˆ°hdfsä¸­ï¼šhadoop fs -put file / é€šè¿‡ç½‘é¡µè§‚å¯ŸçŽ°è±¡ï¼šhttp://192.168.137.100:50070/explorer.html#/ æŒ‡ä»¤ï¼š hadoop fs -mkdir /dirname hadoop fs -text /filename æŸ¥çœ‹æ–‡æœ¬æ–‡ä»¶å†…å®¹ hadoop fs -rm /filename é…ç½®å‚æ•° ç¼–å†™/hadoop/etc/hadoop/hdfs-site.xml eg: ä¿®æ”¹å¤åˆ¶çš„ä¸ªæ•°ä¸º2ä»½ï¼ˆé»˜è®¤ä¸º3ä»½ï¼‰ï¼š 1234&lt;property&gt; &lt;name&gt;dfs.replication&lt;/name&gt; &lt;value&gt;2&lt;/value&gt;&lt;/property&gt;]]></content>
      <categories>
        <category>Big Data</category>
      </categories>
      <tags>
        <tag>Hadoop</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[hadoopé…ç½®çŽ¯å¢ƒåŠå¯åŠ¨]]></title>
    <url>%2F2018%2F02%2F05%2Fhadoop-day1%2F</url>
    <content type="text"><![CDATA[VirtualBoxå¯åŠ¨è™šæ‹Ÿæœº host-onlyæ–¹å¼è¿žæŽ¥è™šæ‹Ÿæœº å®‰è£…Hadoop è¿žæŽ¥è™šæ‹Ÿæœº æŸ¥çœ‹è™šæ‹Ÿç½‘å¡çš„IPåœ°å€(assume:192.168.137.1)ï¼ŒVMè®¾ç½®ç½‘å¡ç±»åž‹ä¸ºhost-only è®¾ç½®ipv4åœ°å€ vim /etc/sysconfig/network-scripts/ifcfg-enp03 IPADDR=192.168.137.100 NETMASK=255.255.255.0 è®¾ç½®ç½‘å…³åœ°å€ vim /etc/sysconfig/network NETWORKING=yes GATEWAY=192.168.137.1 ä¿®æ”¹ä¸»æœºå hostnamectl set-hostname master é‡å¯networkæœåŠ¡ service network restart äº’ç›¸ping è™šæ‹Ÿæœºï¼šping 192.168.137.1 ç”µè„‘ï¼šping 192.168.137.100 å®‰è£…Hadoop æ‰“å¼€Xftpä¸Šä¼ jdkï¼Œhadoopå®‰è£…æ–‡ä»¶è‡³/usr/localç›®å½•ä¸‹ å®‰è£…jdk rpm -ivh jdk-8u91-linux-x64.rpm è§£åŽ‹hadoop cd local tar -xvf hadoop-2.7.3.tar.gz å‘çŽ°localç›®å½•ä¸‹å¤šäº†hadoop-2.7.3çš„ç›®å½•(æ”¹åä¸ºäº†æ–¹ä¾¿ï¼šmv hadoop-2.7.3 haddop) é…ç½®Hadoop JDKè·¯å¾„ cd hadoop/etc/hadoop vim hadoop-env.sh export JAVA_HOME=/usr/java/default å°†hadoopæ‰§è¡Œå‘½ä»¤æ·»åŠ åˆ°pathçŽ¯å¢ƒå˜é‡é‡Œ vim /etc/profile æ·»åŠ ï¼šexport PATH=$PATH:/usr/local/hadoop/bin:/usr/local/hadoop/sbin æ‰§è¡Œï¼š source /etc/profile ä»¥è¿™å°è™šæ‹Ÿæœºåšmasterï¼Œå¤åˆ¶å‡ºä¸‰å°è™šæ‹Ÿæœºåšslaverï¼Œé…ç½®IPå’Œç½‘å…³ï¼Œæ”¹ä¸»æœºååˆ†åˆ«ä¸ºslave1, slave2, slave3 å¯åŠ¨Hadoopé…ç½®æ‰€æœ‰è™šæ‹Ÿæœº1234567cd /usr/local/hadoop/etc/hadoopvim core-site.xml # masterç®¡ç†ç»“ç‚¹ï¼ŒslaveçŸ¥é“master&lt;!-- åœ¨&lt;configuration&gt;å†…æ·»åŠ ï¼š--&gt;&lt;property&gt; &lt;name&gt;fs.defaultFS&lt;/name&gt; &lt;value&gt;hdfs://master:9000&lt;/value&gt;&lt;/property&gt; ä¿®æ”¹æ‰€æœ‰è™šæ‹Ÿæœºçš„hostæ–‡ä»¶ vim /etc/hosts eg 1234192.168.137.100 master192.168.137.101 slave1192.168.137.102 slave2192.168.137.103 slave3 æ ¼å¼åŒ–namenode(ä»…master) hdfs namenode -format å¯åŠ¨namenode(ä»…master) hadoop-daeman.sh start namenode è¾“å…¥jpsï¼Œå‡ºçŽ°NameNodeåˆ™namenodeå¯åŠ¨ å¯åŠ¨datanode(slaver) hadoop-daemon.sh start datanode]]></content>
      <categories>
        <category>Big Data</category>
      </categories>
      <tags>
        <tag>Hadoop</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[laravelåŸºç¡€]]></title>
    <url>%2F2017%2F09%2F13%2Flaravel%E5%9F%BA%E7%A1%80%2F</url>
    <content type="text"><![CDATA[å®‰è£…é”™è¯¯ solution: æ‰“å¼€è¿è¡ŒçŽ¯å¢ƒä¸­çš„php.iniï¼Œç”¨å¿«é€ŸæŸ¥æ‰¾æ‰¾åˆ° extension=php_openssl.dll æ­¤é¡¹ï¼Œç„¶åŽæŠŠè¯¥ä»£ç å‰é¢çš„åˆ†å·åŽ»æŽ‰ï¼Œæœ€åŽé‡å¯è¿è¡ŒçŽ¯å¢ƒï¼Œåˆ·æ–°é¡µé¢ è·¯ç”± ä½œç”¨: å°†è¯·æ±‚æ˜ å°„åˆ°ç¨‹åºï¼ˆå¤„ç†å‡½æ•°ï¼‰ laravel/app/Http/routes.php: åŸºç¡€è·¯ç”± 123Route::get('basic1',function () &#123; return 'Hello World';&#125;); å¤šè¯·æ±‚è·¯ç”± 123Route::match(['get','post'], 'multy', function () &#123; return 'multy';&#125;); æ‰€æœ‰è¯·æ±‚ç§ç±»è·¯ç”± 123Route::any('allRequest',function() &#123; return 'all request';&#125;); è·¯ç”±å‚æ•° 123Route::get('user/&#123;id&#125;/&#123;name?&#125;',function ($id,$name=null) &#123; return 'User-id'.$id.'User-name:'.$name;&#125;)-&gt;where(['id'=&gt;'[0-9]+','name'=&gt;'[A-Za-z]+']); è·¯ç”±åˆ«å 123Route::get('user/center',['as'=&gt;'center', function() &#123; return route('center');&#125;]); è·¯ç”±ç¾¤ç»„ 12345678Route::group(['prefix'=&gt;'member'], function ()&#123; Route::get('basic2',function() &#123; return 'Basic2'; &#125;); Route::get('user/center',['as'=&gt;'center', function() &#123; return route('center'); &#125;]);&#125;); è·¯ç”±è¾“å‡ºè§†å›¾ 123Route::get('view', function ()&#123; return view('welcome');&#125;); æŽ§åˆ¶å™¨ laravel/app/Http/Controllers: è·¯ç”±å°†è¯·æ±‚å‘é€ç»™æŽ§åˆ¶å™¨ï¼ŒæŽ§åˆ¶å™¨å¤„ç†è¯·æ±‚å¹¶è¿”å›žç›¸åº” è·¯ç”±å’ŒæŽ§åˆ¶å™¨ä¸­çš„æ–¹æ³•å…³è”ï¼š 1234567891011Route::get('member/info','MemberController@info');Route::get('member/info',['uses'=&gt;'MemberController@info']);Route::get('member/info',[ 'uses' =&gt; 'MemberController@info', 'as' =&gt; 'member_info']);Route::get('member/find/&#123;id&#125;','MemberController@find')-&gt;where('id','[0-9]+'); æŽ§åˆ¶å™¨ä¸­æœ‰å¯¹åº”è·¯ç”±è¯·æ±‚çš„å‡½æ•°ï¼š 12345678910111213141516171819namespace App\Http\Controllers;class MemberController extends Controller &#123; public function info() &#123; //return 'member-info'; return route('member_info'); &#125; // æŽ¥æ”¶è¯·æ±‚å‚æ•° public function find($id) &#123; return 'member'.$id; &#125; // è¿”å›žä¸€ä¸ªè§†å›¾ï¼Œå‘è§†å›¾ä¸­ä¼ é€’æ•°æ® public function toInfo() &#123; return view('member/info',[ 'name' =&gt; 'shaun', 'age' =&gt; 18 ]); &#125;&#125; è§†å›¾ laravel/resources/views: æŽ§åˆ¶å™¨çš„æ–¹æ³•è¿”å›žä¸€ä¸ªè§†å›¾ï¼Œå¹¶ä¼ é€’å‚æ•°ç»™è§†å›¾ï¼Œè§†å›¾ä½¿ç”¨æ¨¡æ¿è§£æžå±•ç¤ºæ•°æ® laravel é»˜è®¤æ¨¡æ¿æ–‡ä»¶åä¸ºï¼šxxx.blade.php ç”¨ çš„å½¢å¼èŽ·å–å˜é‡å€¼ æ¨¡åž‹ laravel/app: 123456789namespace App;use Illuminate\Database\Eloquent\Model;class Member extends Model &#123; public static function getMember() &#123; return 'member name is shaun'; &#125;&#125; æ•°æ®åº“æ“ä½œDB facade é…ç½®ï¼šlaravel/config/database.php laravel/.env ä½¿ç”¨ DB facade å®žçŽ° CURD 1234567891011121314151617181920212223namespace App\Http\Controllers;use Illuminate\Support\Facades\DB;class UserController extends Controller &#123; public function curd() &#123; // è¿”å›žæ˜¯å¦æ’å…¥æˆåŠŸ $bool = DB::insert('insert into user(name,sex,phone,email) VALUES(?,?,?,?) ', ['zcl','1','1365656556','zcl@163.com']); var_dump($bool); // è¿”å›žæŸ¥è¯¢ç»“æžœçš„æ•°ç»„ $users = DB::select('select* from user'); dd($users); // jsonæ ¼å¼ // è¿”å›žå˜åŠ¨çš„æ•°é‡ $num = DB::update('update user set age=? where name = ?', [18,'zjm']); var_dump($num); // è¿”å›žåˆ é™¤çš„æ¡æ•° $num = DB::delete('delete from user where id=?', [3]); var_dump($num); &#125;&#125; æŸ¥è¯¢æž„é€ å™¨ Laravel æŸ¥è¯¢æž„é€ å™¨ (query builder) æä¾›æŽ¥å£ï¼Œç”¨æ¥å»ºç«‹åŠæ‰§è¡Œæ•°æ®åº“æŸ¥æ‰¾è¯­æ³• ä½¿ç”¨ PDO å‚æ•°ç»‘å®šï¼Œä»¥ä¿æŠ¤åº”ç”¨ç¨‹åºå…äºŽ SQL æ³¨å…¥ï¼Œä¼ å…¥çš„å‚æ•°ä¸éœ€è¦é¢å¤–è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ åŸºæœ¬å¯ä»¥æ»¡è¶³æ‰€æœ‰çš„æ•°æ®åº“æ“ä½œ ä½¿ç”¨æŸ¥è¯¢æž„é€ å™¨æ–°å¢žæ•°æ® 123456789101112131415161718// è¿”å›žboolæ’å…¥æ˜¯å¦æˆåŠŸDB::table('user')-&gt;insert([ 'name' =&gt; 'ms', 'sex' =&gt; '0', 'age' =&gt; '18', 'phone' =&gt; '13666666666', 'email' =&gt; 'maoshuo@gmail.com']);// è¿”å›žæ’å…¥çš„ id$id = DB::table('user')-&gt;insertGetId([ 'name' =&gt; 'shaun', 'age' =&gt; 19]);// æ’å…¥å¤šæ¡è®°å½•ï¼ŒäºŒç»´æ•°ç»„å­˜æ”¾ä¿¡æ¯ï¼Œè¿”å›žboolDB::table('user')-&gt;insert([ ['name' =&gt; 'å¼ ä¸‰', 'age' =&gt; 21], ['name' =&gt; 'æŽå››', 'age' =&gt; 22],]); ä½¿ç”¨æŸ¥è¯¢æž„é€ å™¨æ›´æ–°æ•°æ® æ›´æ–°æ•°æ® è‡ªå¢žè‡ªå‡ 123456789101112// è¿”å›žå—å½±å“çš„è¡Œæ•°$num = DB::table('user') -&gt;where('id',7) -&gt;update([ 'name' =&gt; 'zjm' ]);var_dump($num);// è‡ªå‡åŒæ—¶æ›´æ–°å­æ®µå€¼$num = DB::table('user') -&gt;where(['id'=&gt;7]) // -&gt;where('id',7) -&gt;decrement('age',3, ['name' =&gt; 'zjmhaha']); //increment è‡ªå¢ž decrement è‡ªå‡var_dump($num); ä½¿ç”¨æŸ¥è¯¢æž„é€ å™¨åˆ é™¤æ•°æ® delete trancateâ€”â€”æ¸…ç©ºè¡¨â€¦ 12345678$num = DB::table('user') -&gt;where('id',7) -&gt;delete();var_dump($num);$num = DB::table('user') -&gt;where('id', '&gt;=', 13) -&gt;delete();var_dump($num); ä½¿ç”¨æŸ¥è¯¢æž„é€ å™¨æŸ¥è¯¢æ•°æ® get()â€”â€”èŽ·å–ç»“æžœé›†æ‰€æœ‰æ•°æ® first()â€”â€”èŽ·å–ç»“æžœé›†ä¸­ç¬¬ä¸€æ¡ where()â€”â€”æŸ¥è¯¢æ¡ä»¶ï¼ŒwhereRaw()â€”â€”å¤šæ¡ä»¶æŸ¥è¯¢ pluck()â€”â€”è¿”å›žç»“æžœé›†ä¸­æŒ‡å®šçš„å­—æ®µ lists()â€”â€”ç±»ä¼¼pluck select()â€”â€”æŸ¥è¯¢æŒ‡å®šçš„å­—æ®µ chunk() â€”â€”åˆ†é¡µè¿”å›žæ‰€æœ‰ç»“æžœé›† 1234567891011121314151617181920212223242526272829public function search() &#123; // get() èŽ·å–è¡¨ä¸­æ‰€æœ‰æ•°æ® $users = DB::table('user')-&gt;get(); // first èŽ·å–ç»“æžœé›†ç¬¬ä¸€æ¡ $users = DB::table('user') -&gt;orderBy('id','desc') // å€’åº -&gt;first(); $users = DB::table('user') -&gt;where('age','&gt;=',20) -&gt;get(); // å¤šæ¡ä»¶æŸ¥è¯¢ $users = DB::table('user') -&gt;whereRaw('id &gt;= ? and age &gt; ?', [2, 20]) -&gt;get(); // pluck è¿”å›žç»“æžœé›†ä¸­æŒ‡å®šçš„å­—æ®µ $name = DB::table('user')-&gt;pluck('name'); //$name = DB::table('user')-&gt;lists('name', 'id'); //dd($name); //select æŸ¥è¯¢æŒ‡å®šçš„å­—æ®µ $users = DB::table('user') -&gt;select('id','name','age') -&gt;get(); // chunk echo '&lt;pre&gt;'; $num = DB::table('user')-&gt;chunk(2, function($users) &#123; var_dump($users); &#125;); var_dump($num); &#125; æŸ¥è¯¢æž„é€ å™¨ä¸­çš„èšåˆå‡½æ•° count() max() min() avg() sum() 12345678// èšåˆå‡½æ•°public function aggregate() &#123; $num = DB::table('user')-&gt;count(); $num = DB::table('user')-&gt;max('age'); $num = DB::table('user')-&gt;min('age'); $num = DB::table('user')-&gt;avg('age'); $num = DB::table('user')-&gt;sum('age');&#125; æ•°æ®åº“æ“ä½œ-Eloquent ORM æ•°æ®è¡¨å’Œä¸€ä¸ªç›¸å¯¹åº”çš„æ¨¡åž‹ (Model) ç”¨äºŽå’Œæ•°æ®è¡¨äº¤äº’ æŸ¥è¯¢æž„é€ å™¨åœ¨ORMä¸­ä¾æ—§æœ‰åº”ç”¨ æ¨¡åž‹å»ºç«‹ laravel/app: 12345678910namespace App;use Illuminate\Database\Eloquent\Model;class Student extends Model &#123; // æŒ‡å®šè¡¨åï¼Œé»˜è®¤ä¸º students protected $table = 'student'; // æŒ‡å®šid,é»˜è®¤ä¸ºid protected $id = 'id';&#125; ORM æŸ¥è¯¢123456789101112131415161718192021public function orm() &#123; // æŸ¥è¯¢æ‰€æœ‰ $students = Student::all(); // æŒ‰ä¸»é”®æŸ¥è¯¢ $student = Student::find(1); // æ‰¾ä¸åˆ°idæŠ¥é”™ $student = Student::findOrFail(2); // æŸ¥è¯¢æž„é€ å™¨åœ¨ORMä¸­ä½¿ç”¨ $students = Student::get(); $student = Student::where('age','&gt;',18) -&gt;orderBy('age','desc') -&gt;first(); dd($student); echo '&lt;pre&gt;'; Student::chunk(2, function ($students) &#123; var_dump($students); &#125;); $num = Student::count(); $max = Student::where('age','&gt;',18)-&gt;max('age'); var_dump($max); &#125; ORMä¸­æ–°å¢žï¼Œè‡ªå®šä¹‰æ—¶é—´æˆ³åŠæ‰¹é‡èµ‹å€¼ é€šè¿‡æ¨¡åž‹æ–°å¢žæ•°æ®ï¼ˆè‡ªå®šä¹‰æ—¶é—´æˆ³ï¼‰ ä½¿ç”¨æ¨¡åž‹çš„Createæ–¹æ³•æ–°å¢žæ•°æ®ï¼ˆæ‰¹é‡èµ‹å€¼ï¼‰ æ¨¡åž‹å±žæ€§çš„å®šä¹‰ï¼Œæ–¹æ³•é‡å†™123456789101112131415161718192021222324252627namespace App;use Illuminate\Database\Eloquent\Model;class Student extends Model &#123; // æŒ‡å®šè¡¨åï¼Œé»˜è®¤ä¸º students protected $table = 'student'; // æŒ‡å®šid,é»˜è®¤ä¸ºid protected $id = 'id'; // æŒ‡å®šå…è®¸æ‰¹é‡èµ‹å€¼çš„å­—æ®µ protected $fillable = ['name', 'age']; // æŒ‡å®šä¸å…è®¸æ‰¹é‡èµ‹å€¼çš„å­—æ®µ// protected $guarded = []; // å…³é—­created_at å’Œ updated_at public $timestamps = true; // è‡ªæ„ä¹‰è¿”å›žæ—¶é—´æˆ³ /*protected function getDateFormat() &#123; return time(); &#125;*/ // /*protected function asDateTime( $value ) &#123; return $value; &#125;*/&#125; æ³¨ï¼šç”±äºŽlaravelè‡ªå®šä¹‰æ·»åŠ çš„created_atæ—¶é—´ä¸æ˜¯åŒ—äº¬æ—¶é—´ï¼Œå¯ä»¥å°†æ•°æ®åº“ created_atå­—æ®µç±»åž‹æ”¹ä¸º intï¼Œé‡å†™æ¨¡åž‹çš„ getDateFormat()æ–¹æ³•ï¼Œå¦‚æžœå¸Œæœ›è¿”å›žæ—¶é—´æˆ³(æ•°å­—å½¢å¼)ï¼Œå†é‡å†™asDateTime()å‡½æ•° å››ç§å¸¸ç”¨çš„ORMæ–°å¢ž1234567891011121314151617181920212223242526272829public function orm2() &#123; // ä½¿ç”¨æ¨¡åž‹æ–°å¢žæ•°æ® /*$student = new Student(); $student-&gt;name = 'ms'; $student-&gt;age = 18; $bool = $student-&gt;save(); dd($bool);*/ /*$Student = Student::find(3); echo $Student-&gt;created_at.'&lt;br&gt;'; echo date('Y-m-d H:i:s', 1464509164);// åªå¯¹äºŽæ•°å­—æ—¶é—´æˆ³*/ // ä½¿ç”¨æ¨¡åž‹çš„Createæ–¹æ³•æ–°å¢žæ•°æ®ï¼Œè¿™é‡Œçš„å±žæ€§å¿…é¡»ä¸ºæ¨¡åž‹ä¸­æŒ‡å®šå…è®¸æ‰¹é‡èµ‹å€¼çš„å­—æ®µ /*$student = Student::create([ 'name' =&gt; 'zjm', 'age' =&gt; 18 ]); dd($student);*/ //firstOrCreate() æŒ‰å±žæ€§æŸ¥æ‰¾ï¼Œæ²¡æœ‰æ‰¾åˆ°åˆ™æ–°åŠ  /*$student = Student::firstOrCreate([ 'name' =&gt; 'zjm22333' ]); dd($student);*/ //firstOrNew() æŒ‰å±žæ€§æŸ¥æ‰¾ï¼Œæ²¡æœ‰åˆ™å»ºç«‹æ–°çš„å®žä¾‹ï¼Œè‡ªå·±è°ƒç”¨save()ä¿å­˜ $student = Student::firstOrNew([ 'name' =&gt; 'zjm123123' ]); $student-&gt;save(); dd($student); &#125; æ³¨ï¼š ä½¿ç”¨æ¨¡åž‹çš„Createæ–¹æ³•æ–°å¢žæ•°æ®ï¼Œè¿™é‡Œçš„å±žæ€§å¿…é¡»ä¸ºæ¨¡åž‹ä¸­æŒ‡å®šå…è®¸æ‰¹é‡èµ‹å€¼çš„ ä½¿ç”¨Eloquent ORMä¿®æ”¹æ•°æ® é€šè¿‡æ¨¡åž‹æ›´æ–° ç»“åˆæŸ¥è¯¢è¯­å¥ æ‰¹é‡æ›´æ–° 1234567$student = Student::find(8);$student-&gt;name = 'shaun';$bool = $student-&gt;save();var_dump($bool);Student::where('id','&gt;',7)-&gt;update([ 'age' =&gt; 23]); æ³¨ï¼š ä½¿ç”¨ORMçš„save()æ–¹æ³•æ›´æ–°å­æ®µå¿…é¡»ä½¿æ¨¡åž‹çš„ä¸»é”®å’Œæ•°æ®åº“è¡¨ä¸»é”®ç›¸åŒï¼ŒåŒ…æ‹¬å¤§å°å†™ æ¨¡åž‹ä¸­é»˜è®¤ä¸»é”®åï¼šid é‡å†™æ¨¡åž‹ä¸­ä¸»é”®åï¼šprotected $primaryKey = &#39;Id&#39;; ä½¿ç”¨Eloquent ORMåˆ é™¤æ•°æ® é€šè¿‡æ¨¡åž‹åˆ é™¤ é€šè¿‡ä¸»é”®å€¼åˆ é™¤ æ ¹æ®æŒ‡å®šæ¡ä»¶åˆ é™¤ 123456789// é€šè¿‡æ¨¡åž‹åˆ é™¤ï¼ˆæ²¡æœ‰ä¼šæŠ¥é”™ï¼‰$student = Student::find(9);$bool = $student-&gt;delete();// é€šè¿‡ä¸»é”®åˆ é™¤,è¿”å›žåˆ é™¤ä¸ªæ•°$num = Student::destroy(7);$num = Student::destroy(7,8,9);$num = Student::destroy([7,8,9]);// æ¡ä»¶åˆ é™¤$num = Student::where('id', '&gt;', 6)-&gt;delete(); Bladeæ¨¡æ¿å¼•æ“ŽBladeæ¨¡æ¿å¼•æ“Žç®€ä»‹åŠæ¨¡æ¿ç»§æ‰¿çš„ä½¿ç”¨ é¡µé¢å…¬å…±çš„éƒ¨åˆ†æå–å‡ºæ¥å½¢æˆä¸€ä¸ªçˆ¶ç±»ï¼Œæ–¹ä¾¿å¼€å‘å’Œç»´æŠ¤ @sectionâ€¦@show @yield 12345@extends(&apos;layouts&apos;)&lt;!-- ç»§æ‰¿ viewsä¸‹çš„åŸºç±»è§†å›¾ --&gt;@section(&apos;header&apos;) @parent &lt;!-- çˆ¶æ¨¡æ¿å†…å®¹ --&gt; self_content@stop åŸºç¡€è¯­æ³•åŠincludeçš„ä½¿ç”¨ åœ¨æŽ§åˆ¶å™¨ä¸­è¿”å›žè§†å›¾å¹¶ä¼ å…¥å‚æ•° 123return view('student.section1', [ 'name' =&gt; $name]); åœ¨æ¨¡æ¿ä¸­è¾“å‡ºå‚æ•°å€¼ 1234567891011121314151617&gt; &#123;&#123; $name &#125;&#125;&gt; &lt;!-- è°ƒç”¨phpå‡½æ•°ï¼Œæ‰§è¡Œphpä»£ç  --&gt;&gt; &#123;&#123; time() &#125;&#125;&gt; &#123;&#123; date(&apos;Y-m-d H:i:s&apos;, time()) &#125;&#125;&gt; &#123;&#123; in_array($name, $arr) ? &apos;true&apos; : &apos;false&apos;&#125;&#125;&gt; &#123;&#123; var_dump($arr) &#125;&#125;&gt; &lt;!-- å­˜åœ¨è¾“å‡ºï¼Œä¸å­˜åœ¨è¾“å‡ºé»˜è®¤ --&gt;&gt; &#123;&#123; isset($name) ? $name:&apos;default&apos; &#125;&#125;&gt; &lt;!-- å¯ç®€åŒ–ä¸ºï¼š --&gt;&gt; &#123;&#123; $name or &apos;default&apos; &#125;&#125;&gt; &lt;!-- åŽŸæ ·è¾“å‡º --&gt;&gt; @&#123;&#123; $name &#125;&#125;&gt; &lt;!-- æ¨¡æ¿ä¸­çš„æ³¨é‡Šï¼šä¸åœ¨é¡µé¢æºç ä¸­æ˜¾ç¤º --&gt;&gt; &#123;&#123; -- ä½ çš„æ³¨é‡Š -- &#125;&#125;&gt; &lt;!-- å¼•å…¥å­è§†å›¾ --&gt;&gt; @include(&apos;student.common1&apos;)&gt; æµç¨‹æŽ§åˆ¶123456789101112131415161718192021222324252627282930@if ($name == &apos;zzz&apos;) I&apos;m zzz@elseif($name == &apos;aaa&apos;) I&apos;m aaa@else ...@endif@if(in_array($name, $arr)) true@else false@endif@unless($name == &apos;zjm&apos;) &lt;!--ifçš„å–å--&gt; I&apos;m zjm@endunless@for($i=0; $i &lt; 10; $i++) &#123;&#123; $i &#125;&#125;@endfor @foreach($students as $student) &lt;p&gt;&#123;&#123; $student-&gt;name &#125;&#125;&lt;/p&gt; @endforeach@forelse($students as $student) &lt;p&gt;&#123;&#123; $student-&gt;name &#125;&#125;&lt;/p&gt; @empty &lt;p&gt;æ— æ•°æ®&lt;/p&gt; @endforelse æ¨¡æ¿ä¸­çš„URL url()â€”â€”é€šè¿‡è·¯ç”±åå­— action()â€”â€”é€šè¿‡åˆ¶å®šæŽ§åˆ¶å™¨çš„æ–¹æ³•å route()â€”â€”é€šè¿‡è·¯ç”±åˆ«å 123&lt;a href="&#123;&#123; url('url) &#125;&#125;"&gt;&lt;/a&gt; &lt;a href="&#123;&#123; action('StudentController.urlTest') &#125;&#125;"&gt;&lt;/a&gt; &lt;a href="&#123;&#123; route('url') &#125;&#125;"&gt;&lt;/a&gt; `]]></content>
      <categories>
        <category>webæœåŠ¡</category>
      </categories>
      <tags>
        <tag>phpæ¡†æž¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ±‚æ‰€æœ‰LCSçš„ç®€å•ç®—æ³•åŠçŸ©é˜µæœç´¢ç®—æ³•]]></title>
    <url>%2F2017%2F08%2F21%2FLCS%2F</url>
    <content type="text"><![CDATA[åŠ¨æ€è§„åˆ’â€”â€”æœ€é•¿å…¬å…±å­åºåˆ—ï¼ˆLCSï¼‰èƒŒæ™¯çŸ¥è¯† å­åºåˆ—ï¼š åŽŸåºåˆ— Xï¼Œå°† X ä¸­çš„å…ƒç´ ç»„æˆæ–°åºåˆ— Zï¼Œè¿™äº›å…ƒç´ çš„å…ˆåŽä½ç½®ä¸ŽåŽŸåºåˆ—ç›¸å¯¹ä¸€è‡´ï¼ŒZ æ˜¯ X çš„ä¸€ä¸ªå­åºåˆ— æœ€é•¿å…¬å…±å­åºåˆ—ï¼š è‹¥ Z æ˜¯ X çš„å­åºåˆ— , Z ä¹Ÿæ˜¯ Y çš„å­åºåˆ—ï¼Œä¸”ä¸å­˜åœ¨æ¯” Z æ›´é•¿çš„ X å’Œ Y çš„å…¬å…±å­åºåˆ—ï¼Œåˆ™ç§° Z æ˜¯ X å’Œ Y çš„æœ€é•¿å…¬å…±å­åºåˆ— ï¼Œè®°ä¸º Z âˆˆLCS( X , Y) ã€‚æœ€é•¿å…¬å…±å­åºåˆ—å¾€å¾€ä¸æ­¢ä¸€ä¸ª eg: X = { Aï¼ŒBï¼ŒCï¼ŒBï¼ŒDï¼ŒAï¼ŒB }ï¼ŒY = { Bï¼ŒDï¼ŒCï¼ŒAï¼ŒBï¼ŒA }ï¼Œåˆ™ { Bï¼ŒCï¼ŒBï¼ŒA } æ˜¯ X å’Œ Y çš„ä¸€æ¡å…¬å…±å­åºåˆ—ï¼Œç”±äºŽæ²¡æœ‰æ›´é•¿çš„å…¬å…±å­åºåˆ—ï¼Œæ•…ä¹Ÿæ˜¯ä¸€æ¡æœ€é•¿å…¬å…±å­åºåˆ— æœ€é•¿å…¬å…±å­åºåˆ—çš„ç»“æž„ åœ¨ç©·ä¸¾æ³•ä¸­ï¼Œå°† X ä¸­æ‰€æœ‰å­åºåˆ—ï¼Œæ£€æŸ¥å®ƒæ˜¯å¦ä¹Ÿæ˜¯ Y çš„å­åºåˆ—ï¼Œç¡®å®šæ˜¯å…¬å…±å­åºåˆ—åŽè®°å½•æœ€é•¿çš„å…¬å…±å­åºåˆ—ã€‚è®¾ X æœ‰ m ä¸ªå…ƒç´ ï¼Œåˆ™å®ƒçš„å­åºåˆ—æœ‰ 2mä¸ªï¼Œç©·ä¸¾æ³•éœ€è¦æŒ‡æ•°æ—¶é—´ æœ€é•¿å…¬å…±å­åºåˆ—å…·æœ‰æœ€ä¼˜å­ç»“æž„ è®¾åºåˆ— X = { x1ï¼Œx2ï¼ŒÂ·Â·Â·ï¼Œxm } å’Œ Y = { y1ï¼Œy2ï¼ŒÂ·Â·Â·ï¼Œyn } çš„æœ€é•¿å…¬å…±å­åºåˆ—ä¸º Z = { z1ï¼Œz2ï¼ŒÂ·Â·Â·ï¼Œzk }ï¼Œåˆ™ è‹¥ xm = ynï¼Œåˆ™ zk = xm = ynï¼Œä¸”Zk-1 æ˜¯ Xm-1 å’Œ Yn-1 çš„æœ€é•¿å…¬å…±å­åºåˆ— è‹¥ xm â‰  ynï¼Œä¸” zk â‰  xmï¼Œåˆ™ Z æ˜¯ Xm-1 å’Œ Y çš„æœ€é•¿å…¬å…±å­åºåˆ— è‹¥ xm â‰  ynï¼Œä¸” zk â‰  ynï¼Œåˆ™ Z æ˜¯ X å’Œ Yn-1 çš„æœ€é•¿å…¬å…±å­åºåˆ— å­é—®é¢˜çš„é€’å½’ç»“æž„ å¦‚æžœä»Žé¡¶å‘ä¸‹è®¡ç®—ï¼Œå°†å‡ºçŽ°å¤§é‡çš„å­é—®é¢˜é‡å â€¦åŠ¨æ€è§„åˆ’çš„åŸºæœ¬æ€æƒ³æ˜¯ä»Žä½Žå‘ä¸Šè®¡ç®—ä¸åŒå­é—®é¢˜ï¼Œé€šè¿‡åº•éƒ¨å­é—®é¢˜çš„è§£ï¼Œå¾—å‡ºé¡¶éƒ¨é—®é¢˜çš„è§£ã€‚æœ€ç»ˆç›®çš„æ˜¯å¾—åˆ°æœ€é¡¶ä¸Šé—®é¢˜çš„è§£ã€‚ å»ºç«‹ä¸¤ä¸ªçŸ©é˜µ c å’Œ bï¼ŒçŸ©é˜µ c ç”¨æ¥å­˜æ”¾ i, j ä½ç½®çš„æœ€é•¿å…¬å…±å­åºåˆ—é•¿åº¦(ç®€è®°ä¸ºLCSé•¿åº¦)ï¼ŒçŸ©é˜µ b å­˜æ”¾i, j ä½ç½®æ˜¯ç”±å“ªä¸ªæ–¹å‘æ¥çš„ï¼Œæ–¹ä¾¿å›žæº¯ å»ºç«‹é€’å½’å…³ç³»å¦‚ä¸‹ï¼š c[i,j]={0,i=0 or j=0c[iâˆ’1,jâˆ’1]+1,i,j&gt;0 and xi=yjmax(c[iâˆ’1,j],c[i,jâˆ’1]),i,j&gt;0 and xiâ‰ yjc[i,j]=\begin{cases} 0, &amp; i=0\ or\ j=0\\ c[i-1,j-1]+1,&amp;i,j&gt;0\ and\ x_i=y_j\\ max(c[i-1,j],c[i,j-1]), &amp;i,j&gt;0\ and\ x_i\ne y_j \end{cases} c[i,j]=â€‹âŽ©â€‹âŽªâ€‹âŽ¨â€‹âŽªâ€‹âŽ§â€‹â€‹â€‹0,â€‹c[iâˆ’1,jâˆ’1]+1,â€‹max(c[iâˆ’1,j],c[i,jâˆ’1]),â€‹â€‹â€‹i=0 or j=0â€‹i,j&gt;0 and xâ€‹iâ€‹â€‹=yâ€‹jâ€‹â€‹â€‹i,j&gt;0 and xâ€‹iâ€‹â€‹â‰ yâ€‹jâ€‹â€‹â€‹â€‹ b[i,j]={1,i,j&gt;0 and xi=yj2,i,j&gt;0 and xiâ‰ yj and c[iâˆ’1,j]&gt;c[i,jâˆ’1]3,i,j&gt;0 and xiâ‰ yj and c[iâˆ’1,j]â‰¤c[i,jâˆ’1] b[i,j]=\begin{cases} 1,&amp;i,j&gt;0\ and\ x_i=y_j\\ 2, &amp;i,j&gt;0\ and\ x_i\ne y_j\ and\ c[i-1,j]&gt;c[i,j-1]\\ 3, &amp;i,j&gt;0\ and\ x_i\ne y_j\ and\ c[i-1,j]\leq c[i,j-1] \end{cases} b[i,j]=â€‹âŽ©â€‹âŽªâ€‹âŽ¨â€‹âŽªâ€‹âŽ§â€‹â€‹â€‹1,â€‹2,â€‹3,â€‹â€‹â€‹i,j&gt;0 and xâ€‹iâ€‹â€‹=yâ€‹jâ€‹â€‹â€‹i,j&gt;0 and xâ€‹iâ€‹â€‹â‰ yâ€‹jâ€‹â€‹ and c[iâˆ’1,j]&gt;c[i,jâˆ’1]â€‹i,j&gt;0 and xâ€‹iâ€‹â€‹â‰ yâ€‹jâ€‹â€‹ and c[iâˆ’1,j]â‰¤c[i,jâˆ’1]â€‹â€‹ å›¾ä¸­å³ä¸‹è§’ 5(2) è¡¨ç¤º (8, 8) ä½ç½®çš„LCSé•¿åº¦ä¸º5ï¼Œç”±ä¸Šé¢çš„ä½ç½® (7, 8) å¾—åˆ° å³ä¸‹è§’çš„å€¼å°±æ˜¯LCSé•¿åº¦ï¼Œä»Žè¯¥ç‚¹é€šè¿‡çŸ©é˜µ b å›žæº¯ï¼Œé‡åˆ° 2 å‘ä¸Šèµ°ï¼Œé‡åˆ° 3 å‘å·¦èµ°ï¼Œé‡åˆ° 1 æ–œä¸Šèµ°ï¼Œå½“é‡åˆ°è¾¹ç¼˜æ—¶(i=0 æˆ– j=0)åœæ­¢ï¼Œæ—¢å¯ä»¥å¾—åˆ°ä¸€æ¡æœ€é•¿å…¬å…±å­åºåˆ— è¿™æ ·åšåªèƒ½å¾—åˆ°ä¸¤ä¸²çš„ä¸€æ¡æœ€é•¿å…¬å…±å­åºåˆ—ï¼Œå› ä¸ºå½“ c[iâˆ’1,j]=c[i,jâˆ’1] æ—¶å¯ä»¥å‘ä¸Šä¹Ÿå¯ä»¥å‘å·¦ï¼Œä½†æ˜¯æˆ‘ä»¬æŒ‡å®šå®ƒå‘å·¦äº†ï¼Œè¿™æ ·å°±ä¸ä¼šå‡ºçŽ°ä¸åŒçš„æƒ…å†µã€‚äºŽæ˜¯ï¼Œå¯ä»¥æ·»åŠ ä¸€ç§ b çš„å€¼ï¼š b[i,j]=4, i,j&gt;0 and xiâ‰ yj and c[iâˆ’1,j]=c[i,jâˆ’1]b[i,j]=4,\ \ \ \ i,j&gt;0\ and\ x_i\ne y_j\ and\ c[i-1,j]=c[i,j-1]b[i,j]=4, i,j&gt;0 and xâ€‹iâ€‹â€‹â‰ yâ€‹jâ€‹â€‹ and c[iâˆ’1,j]=c[i,jâˆ’1] å½“ b[i][j] = 4 æ—¶(ä¸‹æ–‡ç§°ä¸ºåˆ†å‰ç‚¹)ï¼Œå‘ä¸Šèµ°ä¹Ÿå‘å·¦èµ°ï¼Œè¿™æ ·å¯ä»¥éåŽ†åˆ°æ‰€æœ‰çš„è·¯å¾„ å¦‚å›¾ï¼Œå½“é‡åˆ°åˆ†å‰ç‚¹çš„æ—¶å€™å°†åˆ†å‡ºä¸¤ä¸ªè·¯å¾„ï¼Œå°†æ‰€æœ‰åˆ†å‰ç‚¹ä½œä¸ºéžå¶å­ç»“ç‚¹ç»„æˆä¸€æ£µäºŒå‰æ ‘ï¼š æœ€ä¸‹é¢çš„å¶å­ç»“ç‚¹ä¸ªæ•°å°±æ˜¯æ‰€æœ‰è·¯å¾„ä¸ªæ•° ä»£ç å®žçŽ°123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106#include &lt;iostream&gt;#include &lt;string.h&gt;#include &lt;set&gt;using namespace std;int num = 0; // è®°å½•éåŽ†è·¯å¾„æ•°int** getArr(int,int); // åŠ¨æ€åˆ›å»ºäºŒç»´æ•°ç»„void LCS(int**,int**,string,string,int,int); // ç»™ c,b æ•°ç»„èµ‹å€¼void TraceBack(string,string,int**,int,int); // å›žæº¯è·¯å¾„set&lt;string&gt; setOfLCS; // setä¿å­˜æ‰€æœ‰çš„LCSï¼Œseté›†åˆä¸­å…ƒç´ ä¸é‡å¤int main() &#123; string s1,s2; cin&gt;&gt;s1&gt;&gt;s2; int len1 = s1.size() + 1; int len2 = s2.size() + 1; int** c = getArr(len1,len2); int** b = getArr(len1,len2); // ä½¿ s1,s2 ä¸Ž c,b åæ ‡ä¸€è‡´ s1 = " " + s1; s2 = " " + s2; // è‡ªåº•å‘ä¸Šç»™ c,b æ•°ç»„èµ‹å€¼ LCS(c,b,s1,s2,len1,len2); // æ˜¾ç¤º c,b æ•°ç»„ for(int i=0;i&lt;len1;i++) &#123; for(int j=0;j&lt;len2;j++) &#123; cout&lt;&lt;c[i][j]&lt;&lt;" "; if(j == len2-1) cout&lt;&lt;endl; &#125; &#125; cout&lt;&lt;"===============================\n"; for(int i=0;i&lt;len1;i++) &#123; for(int j=0;j&lt;len2;j++) &#123; cout&lt;&lt;b[i][j]&lt;&lt;" "; if(j == len2-1) cout&lt;&lt;endl; &#125; &#125; // ä»Žå³ä¸‹è§’æ ¹æ® b æ•°ç»„æŒ‡å‘å›žæº¯åˆ°è¾¹ç•Œ TraceBack(s1,"",b,len1-1,len2-1); cout&lt;&lt;"All route number: "&lt;&lt;num&lt;&lt;endl; cout&lt;&lt;"Remove duplicate elements: "&lt;&lt;endl; // éåŽ†setï¼Œè¾“å‡ºæ‰€æœ‰LCS set&lt;string&gt;::iterator iter=setOfLCS.begin(); while(iter != setOfLCS.end()) &#123; cout&lt;&lt;*iter&lt;&lt;endl; iter++; &#125; cout&lt;&lt;"LCS length: "&lt;&lt;c[len1-1][len2-1]&lt;&lt;endl; cout&lt;&lt;"LCS number: "&lt;&lt;setOfLCS.size()&lt;&lt;endl; return 0;&#125;void LCS(int** c,int** b,string s1,string s2,int m,int n) &#123; for(int i=1;i&lt;m;i++) &#123; for(int j=1;j&lt;n;j++) &#123; if(s1[i] == s2[j]) &#123; c[i][j] = c[i-1][j-1] + 1; b[i][j] = 1; // æ–œä¸Š &#125; else if(c[i-1][j] &gt; c[i][j-1]) &#123; c[i][j] = c[i-1][j]; b[i][j] = 2; // ä¸Š &#125; else if(c[i-1][j] &lt; c[i][j-1]) &#123; c[i][j] = c[i][j-1]; b[i][j] = 3; // å·¦ &#125; else &#123; c[i][j] = c[i-1][j]; b[i][j] = 4; // ä¸Š æˆ– å·¦ &#125; &#125; &#125;&#125;// è¿”å›žåŠ¨æ€åˆ›å»ºçš„äºŒç»´æ•°ç»„çš„æŒ‡é’ˆint** getArr(int M,int N) &#123; int** arr = new int*[M]; for(int i=0;i&lt;M;i++) &#123; arr[i] = new int[N]; memset(arr[i],0,sizeof(int)*N); &#125; return arr;&#125;void TraceBack(string s1,string temp,int** b,int i,int j) &#123; while(i&gt;0 &amp;&amp; j&gt;0) &#123; if(b[i][j] == 1) &#123; temp = s1[i] + temp; i--; j--; &#125; else if(b[i][j] == 2) &#123; i--; &#125; else if(b[i][j] == 3) &#123; j--; &#125; else &#123; // é€’å½’å›žæº¯ TraceBack(s1,temp,b,i-1,j); TraceBack(s1,temp,b,i,j-1); return; &#125; &#125; num ++; // æ‰“å°ä¸€æ¬¡éåŽ†å¾—åˆ°çš„å­—ç¬¦ä¸²ï¼Œå¯èƒ½æ˜¯é‡å¤çš„ cout&lt;&lt;"###"&lt;&lt;temp&lt;&lt;endl; // äº¤ç»™ set æ¥ç§»é™¤é‡å¤å­—ç¬¦ä¸² setOfLCS.insert(temp);&#125; è¾“å…¥ 12badcdcbaabcdcdab å¾—åˆ°çš„ç»“æžœä¸ºï¼šLCSé•¿åº¦=5ï¼Œæ€»è·¯å¾„æ•°=18ï¼Œé™¤åŽ»é‡å¤çš„å­ä¸²åŽï¼Œæ‰€æœ‰LCSä¸ªæ•°ä¸º8 å¯ä»¥å‘çŽ°ï¼šå›žæº¯è¿‡ç¨‹ä¸­ä¸åŒè·¯å¾„å‡ºçŽ°å¤§é‡äº¤å‰ï¼Œç”±äºŽæ€»è·¯å¾„æ•°æ˜¯äºŒå‰æ ‘çš„å¶å­ç»“ç‚¹æ•°ï¼Œæœ€åæƒ…å†µä¸‹ï¼ŒäºŒå‰æ ‘é«˜åº¦ä¸ºmax(m,n)ï¼Œå³ä¸¤ä¸²é•¿åº¦æœ€å¤§å€¼ï¼Œå¶å­ç»“ç‚¹ä¸ªæ•°ä¸º2max(m,n)ï¼Œè¿™äº›æƒ…å†µä¸­è¿˜å­˜åœ¨å¤§é‡é‡å¤ï¼Œç­›é€‰å¾ˆéº»çƒ¦ï¼Œæœ€åŽç»“æžœå¯èƒ½å¾—åˆ°å¾ˆå°‘çš„å‡ ç»„æ•°æ®è€Œå·²ã€‚ ä¼˜åŒ–ï¼šçŸ©é˜µæœç´¢æ±‚æ‰€æœ‰çš„æœ€é•¿å…¬å…±å­åºåˆ— é‰´äºŽä¸Šè¿°æ–¹æ³•çš„ç¼ºç‚¹ï¼Œæ ¹æ®ã€Šåˆ©ç”¨çŸ©é˜µæœç´¢æ±‚æ‰€æœ‰æœ€é•¿å…¬å…±å­åºåˆ—çš„ç®—æ³•ã€‹ï¼Œå®«æ´å¿ï¼Œå®‰å¾½å·¥ç¨‹ç§‘æŠ€å­¦é™¢å­¦æŠ¥ï¼Œvol23,No.4,Dec.,2008 æå‡ºçš„æ€æƒ³ï¼Œè¿™é‡Œè¿›è¡Œç®€è¦é˜è¿°ï¼š å°† b[i][j] = 1 çš„ç‚¹ç§°ä¸ºè·³è·ƒç‚¹ï¼Œè·³è·ƒç‚¹ä½¿LCSä»Žnâ†’n-1(n=1,2,â€¦,LCSé•¿åº¦)ï¼ŒLCSæ˜¯ç”±ä¸€æ¡è·¯å¾„ä¸Šçš„è·³è·ƒç‚¹å¯¹åº”çš„å­—ç¬¦ç»„æˆã€‚å°†nâ†’n-1çš„æ¯ä¸ªè·³è·ƒç‚¹ä¾æ¬¡æ‰¾åˆ°è¿™ä¸ªç‚¹çš„æ‰€æœ‰ä¸‹ä¸€è·³è·ƒç‚¹ï¼Œç›´åˆ°æ²¡æœ‰ä¸‹ä¸€ä¸ªè·³è·ƒç‚¹ä¸ºæ­¢ã€‚ çŸ©é˜µæœç´¢ç®—æ³•çš„åŸºæœ¬æ€è·¯å’Œæ­¥éª¤ ä¸¤ä¸ªæ ˆï¼šç¬¬ä¸€ä¸ªæ ˆ store ç”¨äºŽå­˜æ”¾æ‰€æœ‰æœç´¢åˆ°çš„å…ƒç´ ï¼Œå½“è¯¥æ ˆä¸ºç©ºæ—¶ï¼Œè¿ç®—ç»“æŸï¼›ç¬¬äºŒä¸ªæ ˆ print ç”¨äºŽå­˜æ”¾å‡†å¤‡æ‰“å°çš„å…ƒç´ ã€‚å…ˆè®¡ç®—å‡ºäºŒç»´æ•°ç»„ Cï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½çºªå½•æœ¬èŠ‚ç‚¹æ‰€åœ¨çš„åæ ‡ï¼ŒLCS é•¿åº¦å’ŒæŒ‡å‘çš„æ–¹å‘ã€‚å‡è®¾è¯¥ LCS ä¸²æœ€é•¿ä¸º nï¼Œé‚£ä¹ˆè™šæ‹Ÿä¸€ä¸ª( n + 1) â†’nçš„èŠ‚ç‚¹ï¼Œè¯¥èŠ‚ç‚¹çš„åæ ‡ä½äºŽæ•°ç»„ C æœ€å³ä¸‹è§’çš„èŠ‚ç‚¹ C[ i , j ] çš„å³ä¸‹æ–¹ï¼Œä¸º C[ i + 1 , j + 1 ]ã€‚å°†è¯¥èŠ‚ç‚¹åŽ‹å…¥æ ˆ store æ£€æµ‹æ ˆ store æ˜¯å¦ä¸ºç©ºï¼Œå¦‚æžœä¸ºç©ºï¼Œåˆ™æœ¬ç®—æ³•ç»“æŸ ä»Ž store æ ˆé¡¶å–å‡ºä¸€ä¸ªèŠ‚ç‚¹åŽ‹å…¥ print æ ˆ å¦‚æžœå½“å‰çš„å…ƒç´ æ˜¯è¾¹ç•Œå…ƒç´ 1 â†’0 æ—¶ï¼Œæ‰“å°æ ˆ print é‡Œé¢é™¤äº†æ ˆåº•çš„æ‰€æœ‰å…ƒç´ (æ— é¡»æ‰“å°åŽŸæœ¬ä¸å­˜åœ¨çš„è™šæ‹Ÿç»“ç‚¹) ã€‚æŸ¥çœ‹ store æ ˆé‡Œæœ€ä¸Šé¢ä¸€ä¸ªå…ƒç´ çš„ LCS é•¿åº¦ï¼Œå¼¹å‡ºæ ˆ print é‡Œé¢æ‰€æœ‰LCS é•¿åº¦æ¯” store æ ˆæœ€ä¸Šé¢çš„ LCS é•¿åº¦å¤§æˆ–ç›¸ç­‰çš„å…ƒç´ ï¼Œè·³è½¬åˆ°ç¬¬ 2 æ­¥ è®¾è¯¥ç»“ç‚¹çš„ LCS é•¿åº¦ä¸º n +1ï¼Œä»Žè¯¥èŠ‚ç‚¹å‡ºå‘ï¼ŒæŸ¥çœ‹è¯¥èŠ‚ç‚¹çš„æ–¹å‘ç®­å¤´ï¼ŒæŒ‰ç…§æ–œæ–¹å‘è·¯çº¿ã€å‘ä¸Šçš„è·¯çº¿ï¼ˆå¦‚æžœæ˜¯åŒå‘çš„è·¯çº¿åˆ™èµ°å‘ä¸Šçš„è·¯çº¿ï¼‰ã€å‘å·¦çš„è·¯çº¿ä¸ºä¼˜å…ˆçº§æ‰¾åˆ°ä¸€ä¸ª n â†’ ( n - 1) çš„èŠ‚ç‚¹ï¼Œå‡è®¾ä¸ºC[ X1 , Y1 ] å†æ¬¡ä»Žè¯¥èŠ‚ç‚¹å‡ºå‘ï¼ŒæŸ¥çœ‹è¯¥èŠ‚ç‚¹çš„æ–¹å‘ç®­å¤´ ,æŒ‰ç…§æ–œæ–¹å‘è·¯çº¿ã€å‘å·¦çš„è·¯çº¿ï¼ˆå¦‚æžœæ˜¯åŒå‘çš„è·¯çº¿åˆ™èµ°å‘å·¦çš„è·¯çº¿ï¼‰ ã€å‘ä¸Šçš„è·¯çº¿ä¸ºä¼˜å…ˆçº§æ‰¾åˆ°ä¸€ä¸ª n â†’( n - 1) çš„èŠ‚ç‚¹ ,å‡è®¾ä¸º C[ X2 , Y2 ] æ¯”è¾ƒ C[ X1 , Y1 ] å’Œ C[ X2 , Y2 ] è¿™ä¸¤ä¸ªèŠ‚ç‚¹ã€‚å¦‚æžœè¿™ä¸¤ä¸ªç»“ç‚¹æ˜¯åŒä¸€ä¸ªç»“ç‚¹ï¼Œåˆ™å°†è¯¥ç»“ç‚¹åŽ‹å…¥æ ˆ storeï¼Œè·³è½¬åˆ°ç¬¬ 2 æ­¥ ä»Žåˆšæ‰å¾—åˆ°çš„ä¸¤ä¸ªç»“ç‚¹ C[ X1 , Y1 ] å’Œ C[ X2 , Y2 ]ï¼Œåœ¨äºŒç»´æ•°ç»„ C ä¸­ï¼Œä»¥ ( X1 , Y1 ) ( X2 , Y1 ) ( X1 ,Y2 ) ( X2 , Y2 ) è¿™å››ä¸ªç‚¹ä¸ºåæ ‡æ‰€æž„æˆçš„çŸ©é˜µï¼Œåœ¨è¯¥çŸ©é˜µä¸­æœç´¢æ‰€æœ‰çš„å…ƒç´ ï¼Œå°†æ‰€æœ‰æ»¡è¶³ n â†’( n - 1) çš„èŠ‚ç‚¹åŽ‹å…¥æ ˆ storeã€‚è·³è½¬åˆ°ç¬¬ 2 æ­¥ ä»£ç å®žçŽ°123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186#include &lt;iostream&gt;#include &lt;string.h&gt;#include &lt;stack&gt;using namespace std;int** getArr(int,int);void LCS(int**,int**,string,string,int,int);void TraceBack(int,int,int**,int**,string);struct node &#123; int x; int y; int lcsLen; node()&#123;&#125; node(int x,int y,int z):x(x),y(y),lcsLen(z)&#123;&#125; node(int x,int y,int** c):x(x),y(y),lcsLen(c[x][y])&#123;&#125; bool operator ==(const node &amp;n) &#123; if(this-&gt;x == n.x &amp;&amp; this-&gt;y == n.y) return true; return false; &#125;&#125;;void printStack(stack&lt;node&gt;,string);void popPrint(stack&lt;node&gt;&amp;,int);node findJump(int,int,int**,int**,int);void searchMatrix(node,node,int**,int**,stack&lt;node&gt;&amp;);int main()&#123; string s1,s2; cout&lt;&lt;"Input the first Sequence:"; cin&gt;&gt;s1; cout&lt;&lt;"Input the second Sequence:"; cin&gt;&gt;s2; int len1 = s1.length()+1; int len2 = s2.length()+1; int** c = getArr(len1,len2); int** b = getArr(len1,len2); s1 = " " + s1; s2 = " " + s2; LCS(c,b,s1,s2,len1,len2); for(int i=0;i&lt;len1;i++) &#123; for(int j=0;j&lt;len2;j++) &#123; cout&lt;&lt;c[i][j]&lt;&lt;" "; if(j == len2-1) cout&lt;&lt;endl; &#125; &#125; cout&lt;&lt;"===============================\n"; for(int i=0;i&lt;len1;i++) &#123; for(int j=0;j&lt;len2;j++) &#123; cout&lt;&lt;b[i][j]&lt;&lt;" "; if(j == len2-1) cout&lt;&lt;endl; &#125; &#125; if(c[len1-1][len2-1] == 0) &#123; cout&lt;&lt;"0 0"&lt;&lt;endl; return 0; &#125; TraceBack(len1,len2,c,b,s1); return 0;&#125;int** getArr(int M,int N) &#123; int** arr = new int*[M]; for(int i=0;i&lt;M;i++) &#123; arr[i] = new int[N]; memset(arr[i],0,sizeof(int)*N); &#125; return arr;&#125;void LCS(int** c,int** b,string s1,string s2,int m,int n) &#123; for(int i=1;i&lt;m;i++) &#123; for(int j=1;j&lt;n;j++) &#123; if(s1[i] == s2[j]) &#123; c[i][j] = c[i-1][j-1] + 1; b[i][j] = 1; &#125; else if(c[i-1][j] &gt; c[i][j-1]) &#123; c[i][j] = c[i-1][j]; b[i][j] = 2; &#125; else if(c[i-1][j] &lt; c[i][j-1]) &#123; c[i][j] = c[i][j-1]; b[i][j] = 3; &#125; else &#123; c[i][j] = c[i-1][j]; b[i][j] = 4; &#125; &#125; &#125;&#125;void TraceBack(int m,int n,int** c,int** b,string str) &#123; stack&lt;node&gt; store, print; node virtualNode = node(m,n,c[m-1][n-1]+1); //ç”±è™šæ‹Ÿç»“ç‚¹å¼•å‘å¾ªçŽ¯ store.push(virtualNode); node storeTop; int topLen,number=0; while(!store.empty()) &#123; storeTop = store.top(); store.pop(); print.push(storeTop); // åˆ¤æ–­å¼¹å‡ºçš„å…ƒç´ æ˜¯å¦æ˜¯è¾¹ç•Œå…ƒç´  if(storeTop.x == 1 || storeTop.y == 1 || print.size() == c[m-1][n-1]+1) &#123; number++; printStack(print,str); // æ˜¯è¾¹ç•Œå°†printæ ˆé™¤è™šæ‹Ÿç»“ç‚¹çš„æ‰€æœ‰ç‚¹æ‰“å° cout&lt;&lt;endl; // æ•°é‡å¤ªå¤šä¸è¦è¾“å‡ºè¿™ä¸¤è¡Œäº† if(!store.empty()) &#123; topLen = store.top().lcsLen; popPrint(print,topLen); // å¼¹å‡ºå°äºŽç­‰äºŽstoreæ ˆé¡¶é•¿åº¦çš„printæ ˆä¸­çš„ç‚¹ &#125; &#125; else &#123; //ä¸æ˜¯è¾¹ç•Œè¯´æ˜Žè¿˜æœ‰ä¸‹ä¸€è·³ int x = storeTop.x; int y = storeTop.y; node e1 = findJump(x-1,y-1,b,c,0); node e2 = findJump(x-1,y-1,b,c,1); if(e1 == e2) &#123; store.push(e1); &#125; else &#123; searchMatrix(e1,e2,c,b,store); &#125; &#125; &#125; cout&lt;&lt;number&lt;&lt;endl;&#125;// è¾“å‡ºprintæ ˆä¸­æ‰€æœ‰å…ƒç´ void printStack(stack&lt;node&gt; s,string str) &#123; while(!s.empty()) &#123; cout&lt;&lt;str[s.top().x]; s.pop(); &#125;&#125;// å¼¹å‡ºprintæ ˆä¸­é•¿åº¦å°äºŽç­‰äºŽnçš„å…ƒç´ ï¼Œç›¸å½“äºŽå›žåˆ°å‰ä¸€è·³çš„çŠ¶æ€void popPrint(stack&lt;node&gt; &amp;s,int n) &#123; // ç”±äºŽè¿›å…¥printæ ˆç‚¹çš„lcsLenå€¼æ˜¯å•è°ƒå‡ï¼Œç›´æŽ¥å‡ºæ ˆç›´åˆ°lcsLenå¤§äºŽnï¼Œæœ€åº•ä¸‹çš„è™šæ‹Ÿç»“ç‚¹ä¸èƒ½å‡ºæ ˆ while(s.top().lcsLen &lt;= n &amp;&amp; s.size() != 1) &#123; s.pop(); &#125;&#125;// å¯»æ‰¾æ‰€æœ‰ä¸‹ä¸€è·³ï¼Œtypeä¸ºçœŸï¼šé‡åˆ°è·³è·ƒç‚¹å‘å·¦èµ°ï¼Œtypeä¸ºå‡ï¼šé‡åˆ°è·³è·ƒç‚¹å‘ä¸Šèµ°ï¼Œç›´åˆ°æ‰¾åˆ°ç¬¬ä¸€ä¸ªè·³è·ƒç‚¹node findJump(int x,int y,int** b,int** c,int type) &#123; if(type) &#123; while(b[x][y] != 1)&#123; // è¿™é‡Œä¸€å®šæœ‰ä¸‹ä¸€ä¸ªè·³è·ƒç‚¹ï¼Œä¸ç”¨æ‹…å¿ƒä¼šæ‰¾ä¸åˆ°è€Œè¶Šç•Œ if(b[x][y] == 2) x--; else y--; &#125; &#125; else &#123; while(b[x][y] != 1)&#123; if(b[x][y] == 3) y--; else x--; &#125; &#125; return node(x,y,c);&#125;// å¦‚æžœfindJumpæ‰¾åˆ°çš„ä¸¤ä¸ªä¸‹ä¸€è·³è·ƒç‚¹ä¸æ˜¯ä¸€ä¸ªç‚¹ï¼Œåˆ™ä»¥è¿™ä¸¤ä¸ªç‚¹ä¸ºçŸ©å½¢æœç´¢é‡Œé¢çš„è·³è·ƒç‚¹ï¼Œè§†ä¸ºä¸‹ä¸€è·³è·ƒç‚¹åŠ å…¥storeæ ˆä¸­void searchMatrix(node e1,node e2,int** c,int** b,stack&lt;node&gt;&amp; store) &#123; int x1 = e1.x; int y1 = e1.y; int x2 = e2.x; int y2 = e2.y; int temp; if(x1 &gt; x2) &#123; temp = x1; x1 = x2; x2 = temp; &#125; if(y1 &gt; y2) &#123; temp = y1; y1 = y2; y2 = temp; &#125; for(int i=x2;i&gt;=x1;i--) &#123; for(int j=y2;j&gt;=y1;j--) &#123; if(b[i][j] == 1) store.push(node(i,j,c)); &#125; &#125;&#125; æ ¹æ®ç®—æ³•çš„æ€æƒ³å®žçŽ°äº†ä»£ç ï¼Œç»è¿‡ä»¥ä¸‹æ•°æ®å¯¹ç›´æŽ¥éåŽ†å’ŒçŸ©é˜µæœç´¢è¿›è¡Œå¯¹æ¯”ï¼š ABCDCDABCDBADCDCBADC ABCDCDABCDABCDCDABCDBADCDCBADCBADCDCBADC ABCDCDABCDABCDCDABCDABCDCDABCDBADCDCBADCBADCDCBADCBADCDCBADC ABCDCDABCDABCDCDABCDABCDCDABCDABCDCDABCDBADCDCBADCBADCDCBADCBADCDCBADCBADCDCBADC æµ‹è¯•ç”¨ä¾‹ç¼–å· LCSé•¿åº¦ æ‰€æœ‰LCSä¸ªæ•° ç›´æŽ¥éåŽ†å¾ªçŽ¯æ¬¡æ•° 1 6 20 60 2 12 700 7560 3 18 25460 970200 4 24 936540 æ²¡æµ‹å‡ºæ¥ å½“å­—ç¬¦ä¸²é•¿åº¦40æ—¶ï¼Œç®€å•çš„éåŽ†æ‰€æœ‰è·¯å¾„å°±æ— æ³•çŸ­æ—¶é—´æ˜¾ç¤ºç»“æžœäº†]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>Algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Prim-Kruscal]]></title>
    <url>%2F2017%2F08%2F13%2FPrim-Kruscal%2F</url>
    <content type="text"><![CDATA[è´ªå¿ƒç®—æ³•â€”â€”æœ€å°ç”Ÿæˆæ ‘ G=(V,E) æ˜¯è¿žé€šå¸¦æƒå›¾ï¼ŒE ä¸­æ¯æ¡è¾¹ (v,w) çš„æƒä¸º c[v][w]ï¼ŒG çš„ä¸€ä¸ªå­å›¾ Gâ€™ æ˜¯ä¸€é¢—åŒ…å« G çš„æ‰€æœ‰é¡¶ç‚¹çš„æ ‘ï¼Œåˆ™ç§° Gâ€™ ä¸º G çš„ç”Ÿæˆæ ‘ï¼Œæ‰€æœ‰ç”Ÿæˆæ ‘ä¸­æƒå€¼å’Œæœ€å°çš„ç§°ä¸º G çš„æœ€å°ç”Ÿæˆæ ‘ MST æ€§è´¨ï¼šè®¾ G=(V,E) æ˜¯è¿žé€šå¸¦æƒå›¾ï¼ŒU æ˜¯ V ä¸­çš„ä¸€ä¸ªçœŸå­é›†ï¼Œè‹¥å­˜åœ¨é¡¶ç‚¹ uâˆˆU å’Œé¡¶ç‚¹ vâˆˆV-U çš„è¾¹ï¼ˆuï¼Œvï¼‰æ˜¯ä¸€æ¡å…·æœ‰æœ€å°æƒå€¼çš„è¾¹ï¼Œåˆ™å¿…å­˜åœ¨ G çš„ä¸€æ£µæœ€å°ç”Ÿæˆæ ‘åŒ…æ‹¬è¿™æ¡è¾¹ï¼ˆuï¼Œvï¼‰ Prim å’Œ Kruscal éƒ½åº”ç”¨æœ€å°ç”Ÿæˆæ ‘çš„ MST æ€§è´¨è¿›è¡Œè´ªå¿ƒé€‰æ‹© å®žä¾‹ä¸­è¿žé€šå¸¦æƒå›¾ä¸º å›¾çš„è¡¨ç¤ºï¼šé‚»æŽ¥çŸ©é˜µâ€”â€”ä½¿ç”¨äºŒç»´æ•°ç»„å­˜æ”¾ä¸¤ç‚¹ä¹‹é—´çš„ä¿¡æ¯ Prim ç®—æ³• è®¾ G=(V,E) æ˜¯è¿žé€šå¸¦æƒå›¾ï¼ŒV = {1,2,â€¦,n} æž„é€  G çš„æœ€å°ç”Ÿæˆæ ‘çš„ Primç®—æ³•çš„åŸºæœ¬æ€æƒ³æ˜¯ï¼šé¦–å…ˆç½® S={1}ï¼Œç„¶åŽåªè¦ S æ˜¯ V çš„çœŸå­é›†ï¼Œå°±åšå¦‚ä¸‹è´ªå¿ƒé€‰æ‹©ï¼šé€‰å–æ»¡è¶³æ¡ä»¶ iâˆˆSï¼ŒjâˆˆV-Sï¼Œä¸” c[i][j] æœ€å°çš„è¾¹ï¼Œå¹¶å°†é¡¶ç‚¹ j æ·»åŠ åˆ° S ä¸­ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸€ç›´è¿›è¡Œåˆ° S=Vä¸ºæ­¢ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­é€‰å–çš„æ‰€æœ‰è¾¹æž„æˆ G çš„ä¸€é¢—æœ€å°ç”Ÿæˆæ ‘ Question: å¦‚ä½•æœ‰æ•ˆåœ°æ‰¾å‡ºæ»¡è¶³ iâˆˆS, jâˆˆV-Sï¼Œä¸”æƒ c[i][j] æœ€å°çš„è¾¹ (i,j) ? ä»£ç è¯´æ˜Žï¼š å¯¹äºŽæ¯ä¸ª jâˆˆV-Sï¼Œclosest[j] æ˜¯ j åœ¨ S ä¸­çš„ä¸´ç•Œé¡¶ç‚¹ï¼Œå®ƒä¸Ž j åœ¨ S ä¸­çš„å…¶ä»–ä¸´æŽ¥é¡¶ç‚¹ k ç›¸æ¯”è¾ƒæœ‰ï¼š c[j][closest[j]]â‰¤c[j][k] lowest[j] çš„å€¼å°±æ˜¯ c[j][closest[j]] 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162#include&lt;stdio.h&gt;#define MIN 100001int Prim(int[100][100],int);int main() &#123; int N; int arr[100][100]; // å­˜æ”¾ä¸¤ç‚¹ä¹‹é—´è¿žçº¿çš„æƒå€¼ while(~scanf("%d",&amp;N)) &#123; // è¾“å…¥ for(int i=0;i&lt;N;i++) &#123; for(int j=0;j&lt;N;j++) &#123; scanf("%d",&amp;arr[i][j]); &#125; &#125; // Prim printf("æœ€å°ç”Ÿæˆæ ‘æƒå€¼å’Œï¼š%d\n",Prim(arr,N)); &#125; return 0;&#125;// lowcost[i]:V-Sä¸­ç‚¹iåˆ°Sä¸­çš„ç‚¹è¿žçº¿æœ€å°æƒå€¼// closet[i]:V-Sä¸­ç‚¹iåˆ°sä¸­æƒå€¼æœ€å°è¿žçº¿åº”è¯¥è¿žçš„ç‚¹åæ ‡int Prim(int c[100][100],int N) &#123; int lowcost[N],closest[N], res=0; bool s[N]; // S é›†åˆæœ€å¼€å§‹åªæœ‰0å·å…ƒç´ æ—¶ï¼Œå¯¹lowcost, closteståˆå§‹åŒ– s[0] = true; for(int i=1;i&lt;N;i++) &#123; lowcost[i] = c[i][0]; // æœ€å¼€å§‹ S ä¸­åªæœ‰ 0 closest[i] = 0; s[i] = false; &#125; // å°† V-S é›†åˆä¸­çš„å…ƒç´ æ”¾åˆ° S ä¸­ for(int i=1;i&lt;N;i++) &#123; int k, imin = MIN; for(int j=1;j&lt;N;j++) &#123; if(!s[j] &amp;&amp; lowcost[j] &lt; imin) &#123; imin = lowcost[j]; k = j; &#125; &#125; s[k] = true; printf("%d--%d \n",k,closest[k]); res += imin; // ç”±äºŽ S ä¸­æœ‰äº†ä¸€ä¸ªæ–°çš„å…ƒç´ ï¼ŒV-S ä¸­å„ç‚¹ lowcost å€¼å¯èƒ½å‘ç”Ÿå˜åŒ– for(int j=1;j&lt;N;j++) &#123; if(!s[j] &amp;&amp; lowcost[j] &gt; c[j][k]) &#123; lowcost[j] = c[j][k]; closest[j] = k; &#125; &#125; &#125; return res;&#125;/*Input:40 4 9 214 0 8 179 8 0 1621 17 16 0*/ Kruscal ç®—æ³• å…ˆæž„é€ ä¸€ä¸ªåªå« n ä¸ªé¡¶ç‚¹ã€è€Œè¾¹é›†ä¸ºç©ºçš„å­å›¾ï¼ŒæŠŠå­å›¾ä¸­å„ä¸ªé¡¶ç‚¹çœ‹æˆå„æ£µæ ‘ä¸Šçš„æ ¹ç»“ç‚¹ï¼Œä¹‹åŽï¼Œä»Žç½‘çš„è¾¹é›† E ä¸­é€‰å–ä¸€æ¡æƒå€¼æœ€å°çš„è¾¹ï¼Œè‹¥è¯¥æ¡è¾¹çš„ä¸¤ä¸ªé¡¶ç‚¹åˆ†å±žä¸åŒçš„æ ‘ï¼Œåˆ™å°†å…¶åŠ å…¥å­å›¾ï¼Œå³æŠŠä¸¤æ£µæ ‘åˆæˆä¸€æ£µæ ‘ï¼Œåä¹‹ï¼Œè‹¥è¯¥æ¡è¾¹çš„ä¸¤ä¸ªé¡¶ç‚¹å·²è½åœ¨åŒä¸€æ£µæ ‘ä¸Šï¼Œåˆ™ä¸å¯å–ï¼Œè€Œåº”è¯¥å–ä¸‹ä¸€æ¡æƒå€¼æœ€å°çš„è¾¹å†è¯•ä¹‹ã€‚ä¾æ¬¡ç±»æŽ¨ï¼Œç›´åˆ°æ£®æž—ä¸­åªæœ‰ä¸€æ£µæ ‘ï¼Œä¹Ÿå³å­å›¾ä¸­å«æœ‰ n-1 æ¡è¾¹ä¸ºæ­¢ ç®€å•çš„è¯´ï¼š Kruscal ç®—æ³•å…ˆæ‰¾æƒå€¼æœ€å°çš„è¾¹ï¼Œæ£€æŸ¥è¿™æ¡è¾¹ä¸¤ä¸ªç«¯ç‚¹æ˜¯å¦åœ¨ä¸€ä¸ªé›†åˆä¸­ï¼Œå¦‚æžœä¸åœ¨ä¸€ä¸ªé›†åˆä¸­ï¼Œè¿žæŽ¥ä¸¤ç‚¹(åˆå¹¶ç‚¹æ‰€åœ¨é›†åˆ)åŽæ‰¾ä¸‹ä¸€æ¡æƒå€¼æœ€å°çš„è¾¹ï¼›å¦‚æžœåœ¨ä¸€ä¸ªé›†åˆï¼Œä¸è¿žæŽ¥ä¸¤ç‚¹ç›´æŽ¥æ‰¾ä¸‹ä¸€æ¡æƒå€¼æœ€å°çš„è¾¹ï¼Œç›´åˆ°è¿žæŽ¥çš„è¾¹æ•°ä¸ºn-1ä¸ºæ­¢ Question: æ€Žæ ·æŒ‰æƒé€’å¢žçš„é¡ºåºæŸ¥çœ‹å„è¾¹ï¼Ÿ æ€Žæ ·åˆ¤æ–­ä¸¤ç‚¹æ˜¯å¦åœ¨ä¸€ä¸ªé›†åˆä¸­ï¼Ÿ ä¼˜å…ˆé˜Ÿåˆ—å’Œå¹¶æŸ¥é›† ä¼˜å…ˆé˜Ÿåˆ—è¯·è§ priority-queue å¹¶æŸ¥é›†ï¼ˆUnion-find Setsï¼‰ä¸»è¦ç”¨äºŽå¤„ç†ä¸€äº›ä¸ç›¸äº¤é›†åˆ çš„åˆå¹¶é—®é¢˜ï¼Œä½¿ç”¨æ ‘å½¢ç»“æž„è¡¨ç¤ºä¸€ä¸ªé›†åˆï¼Œæ ‘çš„æ¯ä¸ªèŠ‚ç‚¹å°±è¡¨ç¤ºé›†åˆä¸­çš„ä¸€ä¸ªå…ƒç´ ï¼Œæ ‘æ ¹ä½œä¸ºé›†åˆçš„ä»£è¡¨ã€‚ å¹¶æŸ¥é›†çš„åŸºæœ¬æ“ä½œæœ‰ä¸‰ä¸ªï¼š makeSet(s)ï¼šå»ºç«‹ä¸€ä¸ªæ–°çš„å¹¶æŸ¥é›†ï¼Œå…¶ä¸­åŒ…å« s ä¸ªå•å…ƒç´ é›†åˆã€‚ unionSet(x, y)ï¼šæŠŠå…ƒç´  x å’Œå…ƒç´  y æ‰€åœ¨çš„é›†åˆåˆå¹¶ï¼Œè¦æ±‚ x å’Œ y æ‰€åœ¨çš„é›†åˆä¸ç›¸äº¤ï¼Œå¦‚æžœç›¸äº¤åˆ™ä¸åˆå¹¶ã€‚ find(x)ï¼šæ‰¾åˆ°å…ƒç´  x æ‰€åœ¨çš„é›†åˆçš„ä»£è¡¨ï¼Œè¯¥æ“ä½œä¹Ÿå¯ä»¥ç”¨äºŽåˆ¤æ–­ä¸¤ä¸ªå…ƒç´ æ˜¯å¦ä½äºŽåŒä¸€ä¸ªé›†åˆï¼Œåªè¦å°†å®ƒä»¬å„è‡ªçš„ä»£è¡¨æ¯”è¾ƒä¸€ä¸‹å°±å¯ä»¥äº†ã€‚åœ¨findæ–¹æ³•ä¸­ï¼Œå¦‚æžœæ¯æ¬¡éƒ½æ²¿ç€çˆ¶èŠ‚ç‚¹å‘ä¸ŠæŸ¥æ‰¾ï¼Œå½“æ ‘å¾ˆé«˜æ—¶ï¼Œä¼šé™ä½ŽæŸ¥æ‰¾æ•ˆçŽ‡ï¼ˆæ—¶é—´å¤æ‚åº¦å°±æ˜¯æ ‘çš„é«˜åº¦ï¼‰æœ‰ä¸€ç§éžå¸¸ç®€å•è€Œæœ‰æ•ˆçš„ç­–ç•¥â€”â€”è·¯å¾„åŽ‹ç¼©ï¼š è·¯å¾„åŽ‹ç¼©ï¼Œå°±æ˜¯åœ¨æ¯æ¬¡æŸ¥æ‰¾æ—¶ï¼Œä»¤æŸ¥æ‰¾è·¯å¾„ä¸Šçš„æ¯ä¸ªèŠ‚ç‚¹éƒ½ç›´æŽ¥æŒ‡å‘æ ¹èŠ‚ç‚¹ è¿™æ ·æŸ¥çœ‹æ¯ä¸ªå…ƒç´ æ‰€åœ¨æ ‘çš„æ ¹èŠ‚ç‚¹åªéœ€è¦ä¸€æ­¥ å¹¶æŸ¥é›†çš„åˆå¹¶ï¼šå°†ä¸€ä¸ªé›†åˆçš„æ ‘æ ¹æŒ‡å‘å¦ä¸€ä¸ªé›†åˆçš„æ ‘æ ¹ â€‹åˆå¹¶ç­–ç•¥â€”â€”æŒ‰ç§©åˆå¹¶ï¼šç”¨ç§©è¡¨ç¤ºæ ‘çš„é«˜åº¦ï¼Œåœ¨åˆå¹¶æ—¶ï¼Œæ€»æ˜¯å°†å…·æœ‰è¾ƒå°ç§©çš„æ ‘æ ¹æŒ‡å‘å…·æœ‰è¾ƒå¤§ç§©çš„æ ‘æ ¹ã€‚ç®€å•çš„è¯´ï¼Œå°±æ˜¯æ€»æ˜¯å°†æ¯”è¾ƒçŸ®çš„æ ‘ä½œä¸ºå­æ ‘ï¼Œæ·»åŠ åˆ°è¾ƒé«˜çš„æ ‘ä¸­ã€‚ä»£ç ä¸­ urank[x] è¡¨ç¤º x ä¸ºæ ¹çš„æ ‘çš„é«˜åº¦ ä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—å°†è¾¹å‡åºæŽ’åˆ—ï¼ˆæ³¨æ„å¯¹è‡ªå®šä¹‰ç±»åž‹è¦é‡å†™ â€˜&lt;â€™ è¿ç®—ç¬¦ï¼‰ ä½¿ç”¨å¹¶æŸ¥é›†åˆ¤æ–­ä¸¤ç‚¹æ˜¯å¦åœ¨ä¸€ä¸ªé›†åˆä¸Šï¼ˆæ ¹èŠ‚ç‚¹æ˜¯å¦ç›¸ç­‰ï¼‰ï¼Œåˆå¹¶ä¸¤é›†åˆ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116#include&lt;stdio.h&gt;#include&lt;queue&gt;#define MAXSIZE 100using namespace std;int arr[MAXSIZE][MAXSIZE];int uset[MAXSIZE]; // uset[i] :å…ƒç´ iæ‰€å±žé›†åˆçš„æ ¹èŠ‚ç‚¹int urank[MAXSIZE]; // urank[i] :å…ƒç´ iä¸ºæ ¹èŠ‚ç‚¹é›†åˆçš„é«˜åº¦int Kruscal(int);int res = 0;struct Edge &#123; int x; int y; int weight; Edge(int x,int y,int weight) &#123; this-&gt;x = x; this-&gt;y = y; this-&gt;weight = weight; &#125; friend bool operator &lt; (Edge edge1, Edge edge2) &#123; return edge1.weight &gt; edge2.weight; &#125;&#125;;priority_queue&lt;Edge&gt; q;int main() &#123; int N; while(~scanf("%d",&amp;N)) &#123; res = 0; // è¾“å…¥ for(int i=0;i&lt;N;i++) &#123; for(int j=0;j&lt;N;j++) &#123; scanf("%d",&amp;arr[i][j]); &#125; &#125; // å°†è¾¹æ”¾å…¥ä¼˜å…ˆé˜Ÿåˆ—ä¸­ for(int i=0;i&lt;N-1;i++) &#123; for(int j=i+1;j&lt;N;j++) &#123; q.push(Edge(i,j,arr[i][j])); &#125; &#125; Kruscal(N); printf("%d\n",res); &#125; return 0;&#125;void makeSet(int N) &#123; // åˆå§‹æ—¶æ¯ä¸ªå…ƒç´ ç‹¬ç«‹æˆä¸ºä¸€ä¸ªé›†åˆï¼Œæ ¹èŠ‚ç‚¹æ˜¯æœ¬èº«ï¼Œé›†åˆï¼ˆæ ‘ï¼‰é«˜åº¦ä¸º0 for(int i=0;i&lt;N;i++) &#123; uset[i] = i; urank[i] = 0; &#125;&#125;int findRoot(int x) &#123; // åªæœ‰æ ¹èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹æ˜¯æœ¬èº« if(uset[x] == x) &#123; return x; &#125; // ä¸æ˜¯æ ¹èŠ‚ç‚¹é€’å½’å¯»æ‰¾æ ¹èŠ‚ç‚¹ï¼Œæ‰¾åˆ°åŽèµ‹å€¼ç»™uset[x]å‡å°‘ä¸‹æ¬¡é€’å½’çš„æ¬¡æ•°ï¼Œç›¸å½“äºŽåŽ‹ç¼©äº†åˆ°æ ¹èŠ‚ç‚¹çš„è·¯å¾„ return uset[x] = findRoot(uset[x]);&#125;bool unionSet(int x,int y) &#123; // å– x,y æ‰€åœ¨é›†åˆçš„æ ¹èŠ‚ç‚¹ x=findRoot(x); y=findRoot(y); // x,y å±žäºŽä¸€ä¸ªé›†åˆï¼Œä¸å¯åˆå¹¶ if(x == y) &#123; return false; &#125; // x,y ä¸åœ¨åŒä¸€é›†åˆï¼Œå°†é«˜åº¦å°çš„é›†åˆåŠ åˆ°é«˜åº¦å¤§çš„é›†åˆæ ¹èŠ‚ç‚¹ else if(urank[x] &gt; urank[y]) &#123; // y é›†åˆçš„æ ¹èŠ‚ç‚¹çš„çˆ¶äº²æ˜¯ x é›†åˆçš„æ ¹èŠ‚ç‚¹ uset[y] = x; &#125; else &#123; uset[x] = y; // é«˜åº¦ç›¸ç­‰ï¼Œxæ‰€åœ¨é›†åˆæ ¹èŠ‚ç‚¹æŽ¥åˆ°yé›†åˆæ ¹èŠ‚ç‚¹ï¼Œyé›†åˆé«˜åº¦åŠ ä¸€ if(urank[x] == urank[y]) &#123; urank[y]++; &#125; &#125; return true;&#125;int Kruscal(int N) &#123; makeSet(N); int qsize = q.size(); int lineNum = 0; for(int i=0;i&lt;qsize;i++) &#123; // eä¸ºå½“å‰æœ€å°æƒå€¼è¾¹ Edge e = q.top(); // æŒ‰æƒå€¼é™åºå¤„ç†æ¯ä¸€æ¡è¾¹ï¼Œå¦‚æžœä¸¤ç‚¹ä¸åœ¨ä¸€ä¸ªé›†åˆä¸­ï¼Œåˆå¹¶ä¸¤ç‚¹æ‰€åœ¨çš„é›†åˆè¿”å›žtrueï¼Œè¯´æ˜Žç”Ÿæˆäº†ä¸€æ¡è¿žçº¿ if(unionSet(e.x, e.y)) &#123; lineNum ++; res += arr[e.x][e.y]; printf("%d--%d\n",e.x,e.y); // è¿žçº¿æ•° = ç‚¹æ•° - 1 æ—¶ä¸ºæœ€å°ç”Ÿæˆæ ‘ï¼Œç»“æŸå¾ªçŽ¯ if(lineNum == N - 1) &#123; break; &#125; &#125; q.pop(); &#125;&#125;/*Input:40 4 9 214 0 8 179 8 0 1621 17 16 0*/]]></content>
      <categories>
        <category>ç®—æ³•</category>
        <category>OJ åšé¢˜çŸ¥è¯†ç‚¹ç§¯ç´¯</category>
      </categories>
      <tags>
        <tag>Algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[springboot-mybatiså°ç¨‹åº]]></title>
    <url>%2F2017%2F04%2F09%2Fspringboot-mybatis%2F</url>
    <content type="text"><![CDATA[IntelliJå¼€å‘SpringBoot-Mybatisåº”ç”¨ç¨‹åºæ–°å»ºå·¥ç¨‹ new Projectâ€”â€”Spring Initializr å¡«å¥½å·¥ç¨‹Nameï¼ŒåŒ…è·¯å¾„Group,Package Dependenciesé¡µé¢å‹¾é€‰Webï¼ŒMybatisï¼ŒMysqlä¼šè‡ªåŠ¨å¸®ä½ ç”Ÿäº§mavençš„pomæ–‡ä»¶ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥è‡ªå·±åŽå¾€é‡Œæ·»åŠ ï¼Œmavenä¼šè‡ªåŠ¨çš„å¸®ä½ ä¸‹è½½éœ€è¦çš„ä¾èµ– Finish æ³¨ï¼š mavené»˜è®¤ä¸­å¤®ä»“åº“åœ¨å›½å¤–å¯èƒ½ä½¿ä¸‹è½½ä¾èµ–å¾ˆæ…¢ï¼Œå¯ä»¥ä¿®æ”¹mavençš„conf/settings.xmlæ›´æ¢é•œåƒåœ°å€ï¼š 123456&lt;mirror&gt; &lt;id&gt;alimaven&lt;/id&gt; &lt;name&gt;aliyun maven&lt;/name&gt; &lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public/&lt;/url&gt; &lt;mirrorOf&gt;central&lt;/mirrorOf&gt; &lt;/mirror&gt; å·¥ç¨‹ç»“æž„è¯´æ˜Ž main-java ç›®å½•ä¸‹çš„ *Application ç±»æ˜¯é¡¹ç›®çš„å¯åŠ¨ç±» main ä¸‹çš„ application.yml æ˜¯é…ç½®æ–‡ä»¶ test æ˜¯æµ‹è¯•ç±»çš„ç›®å½• pom.xml æ˜¯ maven çš„ä¾èµ–ç®¡ç†æ–‡ä»¶ é…ç½®æ–‡ä»¶é…ç½®æ–‡ä»¶æœ‰ .properties å’Œ .yml ä¸¤ç§ï¼Œæ ¼å¼ä¸åŒè€Œå·²ï¼Œä¸‹é¢çš„æ˜¯ .yml 1234567891011121314151617181920212223242526272829303132333435363738#serverserver: port: 80#spring configspring: aop: auto: true datasource: name: * url: jdbc:mysql://localhost:3306/* driverClassName: com.mysql.jdbc.Driver username: * password: * type: com.alibaba.druid.pool.DruidDataSource maxActive: 1000 initialSize: 5 maxWait: 60000 minIdle: 1 timeBetweenEvictionRunsMillis: 60000 minEvictableIdleTimeMillis: 300000 testWhileIdle: true testOnBorrow: false testOnReturn: false poolPreparedStatements: true maxOpenPreparedStatements: 20# MyBatismybatis: type-aliases-package: com.zjm.model mapper-locations: classpath:/mapper/*.xml configuration: log-impl: org.apache.ibatis.logging.stdout.StdOutImpl#PageHelperpagehelper: offsetAsPageNum: true rowBoundsWithCount: true reasonable: true ç¼–å†™Mybatis å°ç¨‹åºå‡†å¤‡ åœ¨ä¸Šé¢çš„é…ç½®æ–‡ä»¶ä¸­ Mybatis çš„é…ç½®é¡¹é‡Œ type-aliases-packageï¼šæ˜¯å¯¹è±¡ç±»çš„è·¯å¾„ (main.java.com.*.modelä¸‹) mapper-locationsï¼šæ˜¯å¯¹è±¡daoç±»å¯¹åº”çš„ .xml çš„è·¯å¾„ (main.resource.mapperä¸‹) å»ºç«‹ä»¥ä¸Šè·¯å¾„åŠcom.*.dao åœ¨pom.xmlä¸­åŠ å…¥ä¾èµ–ï¼š(åœ¨æ ‡ç­¾ä¸­) 12345&lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid&lt;/artifactId&gt; &lt;version&gt;1.0.20&lt;/version&gt;&lt;/dependency&gt; åœ¨*Application.javaæ–‡ä»¶çš„ç±»ä¸ŠåŠ å…¥ @MapperScan(basePackages = â€œcom.zjm.daoâ€) @SpringBootApplication è¿™ä¸¤ä¸ªæ³¨è§£ 12345678@MapperScan(basePackages = "com.zjm.dao")@SpringBootApplicationpublic class IshopApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(IshopApplication.class, args); &#125;&#125; ä»£ç User123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899package com.zjm.model;import java.util.Date;public class User &#123; private Integer id; private String nickname; private String password; private String phone; private String email; private Date regdate; private Integer sex; private String head; public Integer getId() &#123; return id; &#125; public void setId(Integer id) &#123; this.id = id; &#125; public String getNickname() &#123; return nickname; &#125; public void setNickname(String nickname) &#123; this.nickname = nickname == null ? null : nickname.trim(); &#125; public String getPassword() &#123; return password; &#125; public void setPassword(String password) &#123; this.password = password == null ? null : password.trim(); &#125; public String getPhone() &#123; return phone; &#125; public void setPhone(String phone) &#123; this.phone = phone == null ? null : phone.trim(); &#125; public String getEmail() &#123; return email; &#125; public void setEmail(String email) &#123; this.email = email == null ? null : email.trim(); &#125; public Date getRegdate() &#123; return regdate; &#125; public void setRegdate(Date regdate) &#123; this.regdate = regdate; &#125; public Integer getSex() &#123; return sex; &#125; public void setSex(Integer sex) &#123; this.sex = sex; &#125; public String getHead() &#123; return head; &#125; public void setHead(String head) &#123; this.head = head == null ? null : head.trim(); &#125; @Override public String toString() &#123; return "User&#123;" + "id=" + id + ", nickname='" + nickname + '\'' + ", password='" + password + '\'' + ", phone='" + phone + '\'' + ", email='" + email + '\'' + ", regdate=" + regdate + ", sex=" + sex + ", head='" + head + '\'' + '&#125;'; &#125;&#125; UserMapper12345678910111213141516171819package com.zjm.dao;import com.zjm.model.User;public interface UserMapper &#123; int deleteByPrimaryKey(Integer id); int insert(User record); int insertSelective(User record); User selectByPrimaryKey(Integer id); int updateByPrimaryKeySelective(User record); int updateByPrimaryKey(User record);&#125; UserMapper.xml123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;&lt;mapper namespace="com.zjm.dao.UserMapper"&gt; &lt;resultMap id="BaseResultMap" type="com.zjm.model.User"&gt; &lt;id column="Id" jdbcType="INTEGER" property="id" /&gt; &lt;result column="nickName" jdbcType="VARCHAR" property="nickname" /&gt; &lt;result column="password" jdbcType="VARCHAR" property="password" /&gt; &lt;result column="phone" jdbcType="VARCHAR" property="phone" /&gt; &lt;result column="email" jdbcType="VARCHAR" property="email" /&gt; &lt;result column="regDate" jdbcType="DATE" property="regdate" /&gt; &lt;result column="sex" jdbcType="INTEGER" property="sex" /&gt; &lt;result column="head" jdbcType="VARCHAR" property="head" /&gt; &lt;/resultMap&gt; &lt;sql id="Base_Column_List"&gt; Id, nickName, password, phone, email, regDate, sex, head &lt;/sql&gt; &lt;select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap"&gt; select &lt;include refid="Base_Column_List" /&gt; from user where Id = #&#123;id,jdbcType=INTEGER&#125; &lt;/select&gt; &lt;select id="selectUserByExample" parameterType="User" resultMap="BaseResultMap"&gt; SELECT &lt;include refid="Base_Column_List" /&gt; FROM USER &lt;where&gt; &lt;if test="id != null"&gt; Id = #&#123;id&#125; &lt;/if&gt; &lt;if test="nickname != null"&gt; nickName = #&#123;nickname&#125; &lt;/if&gt; &lt;if test="password != null"&gt; password = #&#123;password&#125; &lt;/if&gt; &lt;if test="phone != null"&gt; phone = #&#123;phone&#125; &lt;/if&gt; &lt;if test="email != null"&gt; email = #&#123;email&#125; &lt;/if&gt; &lt;/where&gt; &lt;/select&gt; &lt;delete id="deleteByPrimaryKey" parameterType="java.lang.Integer"&gt; delete from user where Id = #&#123;id,jdbcType=INTEGER&#125; &lt;/delete&gt; &lt;insert id="insert" parameterType="com.zjm.model.User"&gt; insert into user (Id, nickName, password, phone, email, regDate, sex, head) values (#&#123;id,jdbcType=INTEGER&#125;, #&#123;nickname,jdbcType=VARCHAR&#125;, #&#123;password,jdbcType=VARCHAR&#125;, #&#123;phone,jdbcType=VARCHAR&#125;, #&#123;email,jdbcType=VARCHAR&#125;, #&#123;regdate,jdbcType=DATE&#125;, #&#123;sex,jdbcType=INTEGER&#125;, #&#123;head,jdbcType=VARCHAR&#125;) &lt;/insert&gt; &lt;insert id="insertSelective" parameterType="com.zjm.model.User"&gt; insert into user &lt;trim prefix="(" suffix=")" suffixOverrides=","&gt; &lt;if test="id != null"&gt; Id, &lt;/if&gt; &lt;if test="nickname != null"&gt; nickName, &lt;/if&gt; &lt;if test="password != null"&gt; password, &lt;/if&gt; &lt;if test="phone != null"&gt; phone, &lt;/if&gt; &lt;if test="email != null"&gt; email, &lt;/if&gt; &lt;if test="regdate != null"&gt; regDate, &lt;/if&gt; &lt;if test="sex != null"&gt; sex, &lt;/if&gt; &lt;if test="head != null"&gt; head, &lt;/if&gt; &lt;/trim&gt; &lt;trim prefix="values (" suffix=")" suffixOverrides=","&gt; &lt;if test="id != null"&gt; #&#123;id,jdbcType=INTEGER&#125;, &lt;/if&gt; &lt;if test="nickname != null"&gt; #&#123;nickname,jdbcType=VARCHAR&#125;, &lt;/if&gt; &lt;if test="password != null"&gt; #&#123;password,jdbcType=VARCHAR&#125;, &lt;/if&gt; &lt;if test="phone != null"&gt; #&#123;phone,jdbcType=VARCHAR&#125;, &lt;/if&gt; &lt;if test="email != null"&gt; #&#123;email,jdbcType=VARCHAR&#125;, &lt;/if&gt; &lt;if test="regdate != null"&gt; #&#123;regdate,jdbcType=DATE&#125;, &lt;/if&gt; &lt;if test="sex != null"&gt; #&#123;sex,jdbcType=INTEGER&#125;, &lt;/if&gt; &lt;if test="head != null"&gt; #&#123;head,jdbcType=VARCHAR&#125;, &lt;/if&gt; &lt;/trim&gt; &lt;/insert&gt; &lt;update id="updateByPrimaryKeySelective" parameterType="com.zjm.model.User"&gt; update user &lt;set&gt; &lt;if test="nickname != null"&gt; nickName = #&#123;nickname,jdbcType=VARCHAR&#125;, &lt;/if&gt; &lt;if test="password != null"&gt; password = #&#123;password,jdbcType=VARCHAR&#125;, &lt;/if&gt; &lt;if test="phone != null"&gt; phone = #&#123;phone,jdbcType=VARCHAR&#125;, &lt;/if&gt; &lt;if test="email != null"&gt; email = #&#123;email,jdbcType=VARCHAR&#125;, &lt;/if&gt; &lt;if test="regdate != null"&gt; regDate = #&#123;regdate,jdbcType=DATE&#125;, &lt;/if&gt; &lt;if test="sex != null"&gt; sex = #&#123;sex,jdbcType=INTEGER&#125;, &lt;/if&gt; &lt;if test="head != null"&gt; head = #&#123;head,jdbcType=VARCHAR&#125;, &lt;/if&gt; &lt;/set&gt; where Id = #&#123;id,jdbcType=INTEGER&#125; &lt;/update&gt; &lt;update id="updateByPrimaryKey" parameterType="com.zjm.model.User"&gt; update user set nickName = #&#123;nickname,jdbcType=VARCHAR&#125;, password = #&#123;password,jdbcType=VARCHAR&#125;, phone = #&#123;phone,jdbcType=VARCHAR&#125;, email = #&#123;email,jdbcType=VARCHAR&#125;, regDate = #&#123;regdate,jdbcType=DATE&#125;, sex = #&#123;sex,jdbcType=INTEGER&#125;, head = #&#123;head,jdbcType=VARCHAR&#125; where Id = #&#123;id,jdbcType=INTEGER&#125; &lt;/update&gt;&lt;/mapper&gt; æµ‹è¯•ç±»è¿›å…¥UserMapper.javaï¼Œå³é”®â€”â€”Go toâ€”â€” Testâ€”â€”Create new test 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172package com.zjm.dao;import com.zjm.model.User;import com.zjm.util.MD5;import org.junit.Test;import org.junit.runner.RunWith;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.boot.test.context.SpringBootTest;import org.springframework.test.context.junit4.SpringRunner;import java.util.Date;import static org.junit.Assert.*;/** * Created by ZJM on 2017/4/5. */@SpringBootTest@RunWith(SpringJUnit4ClassRunner.class)public class UserMapperTest &#123; @Autowired private UserMapper userMapper; @Test public void deleteByPrimaryKey() throws Exception &#123; userMapper.deleteByPrimaryKey(2); &#125; @Test public void insert() throws Exception &#123; User user = new User(); user.setPhone("13636662259"); user.setSex(0); user.setEmail("7788521@qq.com"); user.setNickname("zjm"); user.setPassword("123456"); user.setRegdate(new Date()); userMapper.insert(user); &#125; @Test public void insertSelective() throws Exception &#123; &#125; @Test public void selectByPrimaryKey() throws Exception &#123; User user = userMapper.selectByPrimaryKey(1); System.out.println(user); &#125; @Test public void updateByPrimaryKeySelective() throws Exception &#123; User user = new User(); user.setId(1); user.setNickname("shaunHaHaHa"); userMapper.updateByPrimaryKeySelective(user); &#125; @Test public void updateByPrimaryKey() throws Exception &#123; &#125; @Test public void selectUserByExample() throws Exception &#123; User user = new User(); user.setPassword("123456"); System.out.println(userMapper.selectUserByExample(user)); &#125;&#125; ç‚¹å‡»æ–¹æ³•æ—è¾¹çš„ç»¿è‰²æŒ‰é’®è¿è¡Œå°±è¡Œäº† å‘è¯·æ±‚æµ‹è¯•ä¸Šé¢çš„æ˜¯ JUnit çš„å•å…ƒæµ‹è¯•ï¼ŒçŽ°åœ¨ç”¨å‘è¯·æ±‚çš„æ–¹å¼ä»ŽæœåŠ¡å™¨èŽ·å–å“åº” æ­£å¸¸éœ€è¦åœ¨controllerå’Œmapperä¸­é—´å»ºç«‹serviceå±‚ï¼Œè¿™é‡Œç¤ºä¾‹ä¸šåŠ¡ç®€å•ï¼Œç®€åŒ–çœåŽ»äº†serviceå±‚ï¼Œæ­£å¼çš„é¡¹ç›®ä¸­å†åŠ ä¸Š æ–°å»ºcontroller åœ¨com.*.controllerä¸‹æ–°å»ºUserMS.java 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960package com.zjm.controller;import com.sun.javafx.collections.MappingChange;import com.zjm.dao.UserMapper;import com.zjm.model.User;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RestController;import javax.servlet.http.HttpServletResponse;import java.util.HashMap;import java.util.List;import java.util.Map;/** * Created by ZJM on 2017/4/8. */@RestController@RequestMapping("/user")public class UserMS &#123; @Autowired private UserMapper userMapper; @RequestMapping("add") public User add(User user) &#123; userMapper.insert(user); return user; &#125; @RequestMapping("delete") public Map&lt;String,Object&gt; delete(int id) &#123; Map&lt;String,Object&gt; map = new HashMap&lt;String,Object&gt;(); boolean isOk = true; try &#123; userMapper.deleteByPrimaryKey(id); &#125; catch (Exception e) &#123; e.printStackTrace(); isOk = false; &#125; map.put("status",isOk); return map; &#125; @RequestMapping("update") public User update(User user) &#123; userMapper.updateByPrimaryKeySelective(user); return user; &#125; @RequestMapping("findUserById") public User findUserById(int id) &#123; return userMapper.selectByPrimaryKey(id); &#125; @RequestMapping("findUserByExample") public List&lt;User&gt; findUserByExample(User user) &#123; return userMapper.selectUserByExample(user); &#125;&#125; è¿è¡Œ*Application.javaæ–‡ä»¶ç‚¹å‡»ç»¿è‰²ä¸‰è§’ï¼Œå³å¯å¯åŠ¨ IntelliJ è‡ªå¸¦çš„ tomcatï¼ŒæŒ‰ç…§é…ç½®çš„æœåŠ¡ååŠç«¯å£è®¿é—®å§ å‘è¯·æ±‚å®‰è£…postmanæˆ–è€…æµè§ˆå™¨å‘é€è¯·æ±‚ eg 1234http://localhost:8080/user/findUserById?id=1http://localhost:8080/user/findUserByExample?sex=1http://localhost:8080/user/delete?id=5http://localhost:8080/user/update?id=6&amp;nickname=å°çŽ‹ è¦æ˜¯ç”¨æµè§ˆå™¨å‘postè¯·æ±‚è¿˜å¾—å†™è¡¨å•ï¼Œpostè¯·æ±‚å°±ç”¨ postman å‘å§ åˆ°æ­¤ä¸€ä¸ªç®€å•çš„ä¾‹å­å°±å¯ä»¥è¿è¡Œäº†]]></content>
      <categories>
        <category>Project</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>IntelliJ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Centosä¸‹å®‰è£…jdkå’ŒTomcat]]></title>
    <url>%2F2017%2F03%2F05%2Finstall-jdk-tomcat%2F</url>
    <content type="text"><![CDATA[ç”¨yumå®‰è£…jdkæŸ¥çœ‹ yum åº“ä¸­éƒ½æœ‰å“ªäº› jdk ç‰ˆæœ¬ï¼ˆæš‚æ—¶åªå‘çŽ°äº† openjdkï¼‰yum search java|grep jdk å®‰è£…yum install java-1.7.0-openjdk è®¾ç½®çŽ¯å¢ƒå˜é‡åœ¨profileæ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š 1234567#set java environmentJAVA_HOME=/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.131#å¤åˆ¶è·¯å¾„ä»¥é˜²è·¯å¾„æ— æ³•æ‰¾åˆ°JRE_HOME=$JAVA_HOME/jreCLASS_PATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:$JRE_HOME/libPATH=$PATH:$JAVA_HOME/bin:$JRE_HOME/binexport JAVA_HOME JRE_HOME CLASS_PATH PATH è®©ä¿®æ”¹ç”Ÿæ•ˆ source /etc/profile éªŒè¯java -version å®‰è£…Tomcatä½¿ç”¨wgetå‘½ä»¤ï¼šwget -c http://apache.fayea.com/tomcat/tomcat-8/v8.5.11/bin/apache-tomcat-8.5.11.tar.gz è§£åŽ‹tar -zxvf apache-tomcat-8.5.11.tar.gz å¯åŠ¨è¿›å…¥è§£åŽ‹åŽçš„apache-tomcat-8.5.11 -- binç›®å½•ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š ./startup.sh æ£€æŸ¥èƒ½å¦è®¿é—®å¦‚æžœä¸èƒ½è®¿é—®ï¼Œå¯èƒ½æ˜¯é˜²ç«å¢™é—®é¢˜ï¼š å…³é—­é˜²ç«å¢™ï¼š service firewalld stop åœ¨iptablesé‡Œæ·»åŠ å¼€æ”¾ 8080 ç«¯å£ï¼š -A RH-Firewall-1-INPUT -m state --state NEW -m tcp -p tcp --dport 8080 -j ACCEPT å°†iptablesæœåŠ¡é‡å¯ï¼š service iptables restart]]></content>
      <categories>
        <category>è¿ç»´</category>
      </categories>
      <tags>
        <tag>è¿ç»´</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Centosä¸‹å®‰è£…mysql]]></title>
    <url>%2F2017%2F03%2F05%2Finstall-mysql%2F</url>
    <content type="text"><![CDATA[yum å®‰è£…yum install -y mysql-server mysql mysql-devel å¯åŠ¨æœåŠ¡service mysqld start ç»™rootç”¨æˆ·è®¾ç½®å¯†ç mysqladmin -u root password &#39;your password&#39; ç™»å½•mysql -u root -p æŸ¥çœ‹å¹¶æ›´æ”¹å­—ç¬¦é›†show variables like &#39;character%&#39;; å…³é—­mysqlæœåŠ¡ service mysqld stop ä¿®æ”¹my.cnfæ–‡ä»¶ 12345678910111213141516171819202122[mysqld]default-character-set = utf8 #è¿™ä¸ªæ˜¯æˆ‘æ·»åŠ çš„character_set_server=utf8 #è¿™ä¸ªæ˜¯æˆ‘æ·»åŠ çš„init_connect='SET NAMES utf8'datadir=/var/lib/mysqlsocket=/var/lib/mysql/mysql.sockuser=mysqlsymbolic-links=0 [mysqld_safe]default-character-set = utf8 #è¿™ä¸ªæ˜¯æˆ‘æ·»åŠ çš„log-error=/var/log/mysqld.logpid-file=/var/run/mysqld/mysqld.pid [client]default-character-set = utf8 #è¿™ä¸ªæ˜¯æˆ‘æ·»åŠ çš„ [mysql.server]default-character-set = utf8 #è¿™ä¸ªæ˜¯æˆ‘æ·»åŠ çš„ [mysql]default-character-set = utf8 #è¿™ä¸ªæ˜¯æˆ‘æ·»åŠ çš„ é‡å¯æœåŠ¡service mysqld restart æŸ¥çœ‹ç›‘å¬ç«¯å£netstat -anp mysqlæ•°æ®åº“ç»‘å®šçš„é»˜è®¤ç«¯å£å·æ˜¯ 3306 ç”¨æœ¬åœ°å¯è§†åŒ–å·¥å…·è¿žæŽ¥æœåŠ¡å™¨æ•°æ®åº“åœ¨æœåŠ¡å™¨ç«¯è¿›å…¥mysqlæœåŠ¡ï¼Œæ‰§è¡Œï¼š 12grant all privileges on *.* to &apos;root&apos;@&apos;%&apos; identified by &apos;your password by root&apos;;flush privileges; åœ¨æœ¬åœ°å³å¯ç™»å½•è®¿é—®]]></content>
      <categories>
        <category>è¿ç»´</category>
      </categories>
      <tags>
        <tag>è¿ç»´</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[priority_queue]]></title>
    <url>%2F2017%2F02%2F06%2Fpriority-queue%2F</url>
    <content type="text"><![CDATA[STL priority_queue ä¼˜å…ˆé˜Ÿåˆ—åœ¨ä¼˜å…ˆé˜Ÿåˆ—ä¸­ï¼Œä¼˜å…ˆçº§é«˜çš„å…ƒç´ å…ˆå‡ºé˜Ÿåˆ— class template std::priority_queue1234template &lt;class T, class Container = vector&lt;T&gt;, class Compare = less&lt;typename Container::value_type&gt; &gt; class priority_queue; Priority queuePriority queues are a type of container adaptors, specifically designed such that its first element is always the greatest of the elements it contains, according to some strict weak ordering criterion.This context is similar to a heap, where elements can be inserted at any moment, and only the max heapelement can be retrieved (the one at the top in the priority queue).Priority queues are implemented as container adaptors, which are classes that use an encapsulated object of a specific container class as its underlying container, providing a specific set of member functions to access its elements. Elements are popped from the â€œbackâ€ of the specific container, which is known as the top of the priority queue. The standard container classes vector and deque fulfill these requirements. By default, if no container class is specified for a particular priority_queue class instantiation, the standard container vector is used.Support of random access iterators is required to keep a heap structure internally at all times. This is done automatically by the container adaptor by automatically calling the algorithm functions make_heap, push_heap and pop_heap when needed. Template parameters T Type of the elements.Aliased as member type priority_queue::value_type. Container Type of the internal underlying container object where the elements are stored.Its value_type shall be T.Aliased as member type priority_queue::container_type. Compare A binary predicate that takes two elements (of type T) as arguments and returns a bool.The expression comp(a,b), where comp is an object of this type and a and b are elements in the container, shall return true if a is considered to go before b in the strict weak ordering the function defines.The priority_queue uses this function to maintain the elements sorted in a way that preserves heap properties (i.e., that the element popped is the last according to this strict weak ordering).This can be a function pointer or a function object, and defaults to less, which returns the same as applying the less-than operator (`a). å°ç»“ï¼š priority_queue å°†å…¶ä¸­çš„å…ƒç´ é»˜è®¤æŒ‰ç…§ä»Žå¤§åˆ°å°æŽ’åˆ— é»˜è®¤å£°æ˜Žï¼špriority_queue&lt; T , vector , less &gt; q; é»˜è®¤å£°æ˜Žå¯çœç•¥ä¸ºï¼špriority_queue q; å£°æ˜Žä¸ºä»Žå°åˆ°å¤§ï¼špriority_queue&lt; T , vector , greater &gt; q; å¦‚æžœTæ˜¯è‡ªå®šä¹‰ç±»åž‹ï¼Œåˆ™å¿…é¡»é‡è½½operator&lt; eg123456789101112131415161718192021222324252627282930313233#include&lt;iostream&gt;#include&lt;queue&gt;using namespace std;struct Student &#123; string name; int score; Student(string name,int score) &#123; this-&gt;name = name; this-&gt;score = score; &#125; friend bool operator &lt; (Student stu1,Student stu2) &#123; return stu1.score &lt; stu2.score; &#125;&#125;;int main()&#123; Student stu[3] = &#123; Student("Tom",80), Student("Jerry",100), Student("Marry",90) &#125;; priority_queue&lt;Student&gt; q; for(int i=0;i&lt;3;i++) &#123; q.push(stu[i]); &#125; cout&lt;&lt;q.size()&lt;&lt;endl; for(int i=0;i&lt;3;i++) &#123; Student s = q.top(); cout&lt;&lt;s.name&lt;&lt;", "&lt;&lt;s.score&lt;&lt;endl; q.pop(); &#125; return 0;&#125;]]></content>
      <categories>
        <category>OJ åšé¢˜</category>
      </categories>
      <tags>
        <tag>C/C++</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Share~]]></title>
    <url>%2F2017%2F01%2F24%2Fky%2F</url>
    <content type="text"><![CDATA[åˆ†äº«ç»™æœ‹å‹çš„Dear Mao Shuo: ä½ çœ‹åŽ†å¹´åˆ†æ•°çº¿å…ˆç»™è‡ªå·±å„ç§‘å®šä¸ªå°ç›®æ ‡ï¼Œ100+100+50+50å•Šï¼Œå…³æ³¨å‡ ä¸ªè€å¸ˆçš„å¾®åšï¼Œå¾®ä¿¡å…¬ä¼—å·ï¼šè’‹ä¸­æŒºï¼Œä½•å‡¯æ–‡ï¼Œå¼ å®‡ï¼Œåˆ˜ä¸€ç”·â€¦â€¦éƒ½ä¼šæœ‰å…è´¹çš„ç›´æ’­ï¼Œä½•å‡¯æ–‡è¿˜æœ‰æ¯æ—¥ä¸€å¥ï¼Œæœ‰æ—¶é—´å°±çœ‹ï¼Œæ²¡æ—¶é—´å°±ç®—äº†åˆ«å½“è´Ÿæ‹…ï¼Œæˆ‘æ¯æ—¥ä¸€å¥å°±è·Ÿäº†ä¸€é˜µã€‚ç›´æ’­è¯¾æ„Ÿè§‰è’‹ä¸­æŒºçš„æŒºå¥½çš„ï¼Œè¿˜æœ‰å›žæ”¾ï¼Œè‹±è¯­æ•°å­¦æˆ‘éƒ½æ²¡å’‹å¬ï¼Œä¸è¿‡æˆ‘è¿˜æ˜¯æŽ¨èå¬ã€‚æˆ‘å­¦çš„æ—¶é—´é‡Œæœ‰æ•ˆçš„éƒ¨åˆ†å¤ªå°‘äº†ï¼šæ—©ä¸Šä¹ç‚¹å¼€å§‹ï¼Œä¸¤ä¸ªåŠå°æ—¶åŽ»åƒé¥­ï¼Œä¸­åˆZZZï¼Œä¸‹åˆä¸¤ç‚¹å¼€å§‹ï¼Œä¸‰ä¸ªå°æ—¶åˆåƒé¥­ï¼Œæ™šä¸Šå…­ç‚¹å¼€å§‹ï¼Œå››ä¸ªå°æ—¶å›žå¯ï¼Œä¸€å¤©æœ€å¤šåä¸ªå°æ—¶çš„å­¦ä¹ æ—¶é—´ï¼ŒçœŸæ­£æœ‰æ”¶èŽ·çš„æ²¡å¤šå°‘ã€‚ã€‚ã€‚æˆ‘ä¹æœˆä»½è¿˜æŠ¥äº†æ–‡éƒ½çš„ç§‹å­£ç­ï¼ˆè¡¥æš‘å‡è¯¾ç¨‹çš„ç­ï¼‰ï¼Œå› ä¸ºæˆ‘æš‘å‡æœ‰å®žè®­ã€‚æ–‡éƒ½çš„è¯¾å¥½ä¹Ÿä¸å¥½ï¼Œä¸ºäº†èµ¶è¿›åº¦ï¼Œæœ‰æ—¶ä¸€å¤©çœ‹åä¸ªå¤šå°æ—¶çš„è§†é¢‘ã€‚å¾€å¾€ä¸€å¤©ä¸‹æ¥å¾ˆç´¯äº†ï¼Œå›žæ¥å°±æ²¡æœ‰æŠŠä¸€å¤©çš„è¯¾è¿›è¡Œæ€»ç»“æ•´ç†ç¬”è®°ã€‚æˆ‘æœ‰ä¸€æ¬¡æ•´ç†äº†ä¸€æ¬¡ï¼ŒèŠ±äº†å¾ˆå¤šæ—¶é—´ï¼Œå› ä¸ºè¯¾ä¸Šçš„å†…å®¹å¤ªå¤šï¼Œè€å¸ˆè¯´çš„å¾ˆå¿«ï¼Œå¥½å¤šå¬ä¸æ‡‚çš„éœ€è¦è¯¾åŽè‡ªå·±æ•´ç†å¤ä¹ ï¼Œå¦‚æžœæ²¡æœ‰æ€»ç»“å¤ä¹ ï¼Œé‚£è¯¾ä¹…äº†å›žçœ‹ç¬”è®°å°±çœ‹ä¸æ‡‚äº†ï¼Œè¿˜ä¼šè¶Šå †è¶Šå¤šã€‚æ‰€ä»¥ï¼Œä¸åŠæ—¶æ€»ç»“å¤ä¹ ï¼Œè¯¾å°±ç­‰äºŽç™½ä¸Šï¼Œè¿˜æµªè´¹å¤§é‡çš„æ—¶é—´å’Œç²¾åŠ›ã€‚ å…¶å®žè¿˜æ˜¯è‡ªå·±æ€»ç»“æœ€é‡è¦äº†ï¼Œçœ‹è§†é¢‘ï¼Œåšé¢˜ï¼Œå†å¤šï¼Œè‡ªå·±ä¸ç†è§£å½’çº³æ€»ç»“çŸ¥è¯†ç‚¹ï¼Œæ„ä¹‰éƒ½ä¸å¤§ã€‚åšé¢˜æˆ‘æœ‰ä¸€æ‹›ç‰¹åˆ«å¥½ä½¿ï¼Œå¦‚æžœä½ çŸ¥é“è¿™é“é¢˜è€ƒçš„è€ƒç‚¹æ˜¯ä»€ä¹ˆï¼Œä½ ä¸€å®šèƒ½åšå¯¹ã€‚æ‰€ä»¥ï¼Œæ•°å­¦èƒŒç¬”è®°æ—¶ä¸€å®šè¦èƒŒè€ƒç‚¹ï¼Œ12345â€¦ å¤ä¹ è®¡åˆ’æ—©åˆ¶å®šï¼Œä¸“ä¸šè¯¾æ—©å¼€å§‹ï¼Œæ”¿æ²»é€‰æ‹©æ—©å¼€å§‹ï¼ŒçœŸçš„ä¸æ˜¯å¾ˆéš¾ï¼Œåˆ«å®³æ€•ï¼Œå°±æ˜¯è·¯æ¼«æ¼«ä¿®è¿œï¼ŒåšæŒä¸‹æ¥ä¸å®¹æ˜“ã€‚ å¦‚æžœæˆ‘è°ƒå‰‚ä¸åˆ°å¥½çš„å­¦æ ¡ï¼Œå°±åšç ”å‹ï¼›å¤è¯•é€šè¿‡ï¼Œå°±ç»™ä½ ä¹¦â€¦ Good luck Shaun]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>life</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æŽ’åºç®—æ³•å°ç»“]]></title>
    <url>%2F2017%2F01%2F23%2Fsort%2F</url>
    <content type="text"><![CDATA[æ•°æ®ç»“æž„æŽ’åºç®—æ³•æ—¶ç©ºç¨³ åˆ†ç±» æŽ’åºæ–¹æ³• å¹³å‡æƒ…å†µ(æ—¶) æœ€å(æ—¶) æœ€å¥½(æ—¶) ç©ºé—´å¤æ‚åº¦ ç¨³å®šæ€§ æ’å…¥ ç›´æŽ¥æ’å…¥ O(n*n) O(n*n) O(n) O(1) ç¨³ æŠ˜åŠæ’å…¥ O(n*n) O(1) ç¨³ å¸Œå°” O(nlogn) O(nlogn) O(1) ä¸ç¨³ äº¤æ¢ å†’æ³¡ O(n*n) O(n*n) O(n) O(1) ç¨³ å¿«é€Ÿ O(nlogn) O(n*n) O(nlogn) O(logn) ä¸ç¨³ é€‰æ‹© ç®€å•é€‰æ‹© O(n*n) O(n*n) O(n*n) O(1) ä¸ç¨³ å †æŽ’ O(nlogn) O(nlogn) O(nlogn) O(1) ä¸ç¨³ å…¶ä»– å½’å¹¶ O(nlogn) O(nlogn) O(nlogn) O(n) ç¨³ åŸºæ•° O(d(n+r)) O(d(n+r)) O(d(n+r)) O(r) ç¨³ å°å£è¯€ åŸºäºŽåŸºæœ¬æŽ’åºç®—æ³• æ—¶é—´å¤æ‚åº¦æŒ‰å¹³å‡ç®— @é©¬å£«å…µè€å¸ˆ å†’æ³¡é€‰æ‹©æ’å…¥å †ï¼Œå¿«é€Ÿå¸Œå°”è®¡åŸºå †å½’å¹¶O(n)å¿«lognï¼Œå…¶ä»–ç©ºé—´éƒ½æ˜¯1å¿«å †å½’å¹¶nlognï¼Œæ’æŠ˜å†’é€‰æ…¢næ–¹ï¼ˆå¹³å‡æ—¶é—´ï¼‰å¸Œå°”ç‰¹æ®Š1.3ï¼ŒåŸºæ•°dæŠŠä¸¤æ•°åŠ ï¼ˆå¹³å‡æ—¶é—´ï¼‰å¸Œå°”å¿«é€‰å †ä¸ç¨³ï¼Œå…¶ä»–æŽ’åºç¨³ç¨³å“’ æ³¨ï¼š log çš„ g ä¸å‘éŸ³ ç¬¬äºŒå¥ç©ºé—´å¤æ‚åº¦ï¼Œä¸‰å››å¥æ—¶é—´ â€‹ â€‹ â€‹]]></content>
      <categories>
        <category>æ•°æ®ç»“æž„</category>
      </categories>
      <tags>
        <tag>æŽ’åº</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[GitåŸºæœ¬æ“ä½œ]]></title>
    <url>%2F2017%2F01%2F15%2FGit%2F</url>
    <content type="text"><![CDATA[Git æ˜¯ç›®å‰æœ€æµè¡Œçš„ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿ Windowsç³»ç»Ÿå®‰è£…å’Œä½¿ç”¨å®‰è£…åŽä¼šå‡ºçŽ°ä¸‰ä¸ªå·¥å…·-Bash,-CMD,-GUIï¼Œåªç”¨-Bashå°±è¡Œ åœ¨ä½ æƒ³ä½œä¸ºæœ¬åœ°ä»“åº“çš„æ–‡ä»¶å¤¹ä¸Šï¼ˆæˆ–è¿›å…¥æ–‡ä»¶å¤¹ç©ºç™½å¤„ï¼‰é¼ æ ‡å³é”®ï¼Œé€‰æ‹©Git Bash here å¸¸ç”¨å‘½ä»¤git cloneâ€‹ ä»Žè¿œç¨‹ä¸»æœºå¤åˆ¶æ–‡ä»¶åˆ°æœ¬åœ°æ–‡ä»¶å¤¹ 1$ git clone &lt;é“¾æŽ¥&gt; &lt;æœ¬åœ°è·¯å¾„&gt; â€‹ &lt;æœ¬åœ°è·¯å¾„&gt;çœç•¥å³-Bashå½“å‰è·¯å¾„ git remote ç®¡ç†è¿œç¨‹ä¸»æœºåï¼šGitè¦æ±‚æ¯ä¸ªè¿œç¨‹ä¸»æœºéƒ½å¿…é¡»æŒ‡å®šä¸€ä¸ªä¸»æœºå æ·»åŠ è¿œç¨‹ä¸»æœº+å‘½å 1$ git remote add &lt;ä¸»æœºå&gt; &lt;ç½‘å€&gt; åˆ—å‡ºæ‰€æœ‰è¿œç¨‹ä¸»æœº 12$ git remoteorigin æŸ¥çœ‹è¿œç¨‹ä¸»æœºåå¯¹åº”çš„ç½‘å€ 123$ git remote -vorigin https://... (fetch)origin https://...(push) åˆ é™¤ä¸»æœº 1$ git remote rm &lt;ä¸»æœºå&gt; æ”¹ä¸»æœºå 1$ git remote rename &lt;åŽŸä¸»æœºå&gt; &lt;æ–°ä¸»æœºå&gt; git fetch è¿œç¨‹ä¸»æœºæœ‰æ›´æ–°ï¼ˆcommitï¼‰ï¼Œå°†æ›´æ–°çš„å–å›žæœ¬åœ°ã€‚é»˜è®¤æƒ…å†µä¸‹git fetch å–å›žæ‰€æœ‰åˆ†æ”¯ï¼ˆbranchï¼‰çš„æ›´æ–°ã€‚å¦‚æžœåªæƒ³å–å›žç‰¹å®šåˆ†æ”¯çš„æ›´æ–°ï¼Œå¯ä»¥æŒ‡å®šåˆ†æ”¯åã€‚ 1$ git fetch &lt;è¿œç¨‹ä¸»æœºå&gt; &lt;åˆ†æ”¯å&gt; eg 1$ git fetch origin master æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯ 123456$ git branch -rorigin/master #æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯$ git branch -a #æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯ï¼ˆåŒ…æ‹¬æœ¬åœ°ï¼‰* master remotes/origin/master åœ¨æœ¬åœ°åˆ†æ”¯ä¸Šåˆå¹¶è¿œç¨‹åˆ†æ”¯ 1$ git merge origin/master git pull å–å›žè¿œç¨‹ä¸»æœºæŸåˆ†æ”¯çš„æ›´æ–°ï¼Œå¹¶ä¸Žæœ¬åœ°çš„åˆ¶å®šåˆ†æ”¯åˆå¹¶ 1$ git pull &lt;è¿œç¨‹ä¸»æœºå&gt; &lt;è¿œç¨‹åˆ†æ”¯å&gt;:&lt;æœ¬åœ°åˆ†æ”¯å&gt; ä¸Žå½“å‰åˆ†æ”¯åˆå¹¶å†’å·åŽå¯çœç•¥ eg 1$ git pull origin master ç›¸å½“äºŽ 12$ git fetch origin$ git merge origin/master git push å°†æœ¬åœ°åˆ†æ”¯çš„æ›´æ–°ï¼ŒæŽ¨é€åˆ°è¿œç¨‹ä¸»æœº 1$ git push &lt;è¿œç¨‹ä¸»æœºå&gt; &lt;æœ¬åœ°åˆ†æ”¯å&gt;:&lt;è¿œç¨‹åˆ†æ”¯å&gt; eg 123$ git push origin master:master#ç­‰åŒäºŽ$ git push origin master å¦‚æžœçœç•¥è¿œç¨‹åˆ†æ”¯åï¼Œåˆ™è¡¨ç¤ºå°†æœ¬åœ°åˆ†æ”¯æŽ¨é€ä¸Žä¹‹å­˜åœ¨â€è¿½è¸ªå…³ç³»â€çš„è¿œç¨‹åˆ†æ”¯ï¼ˆé€šå¸¸ä¸¤è€…åŒåï¼‰ï¼Œå¦‚æžœè¯¥è¿œç¨‹åˆ†æ”¯ä¸å­˜åœ¨ï¼Œåˆ™ä¼šè¢«æ–°å»ºã€‚ ä¸Šé¢å‘½ä»¤è¡¨ç¤ºï¼Œå°†æœ¬åœ°çš„masteråˆ†æ”¯æŽ¨é€åˆ°originä¸»æœºçš„masteråˆ†æ”¯ã€‚ çœç•¥æœ¬åœ°åˆ†æ”¯åï¼Œåˆ™è¡¨ç¤ºåˆ é™¤æŒ‡å®šçš„è¿œç¨‹åˆ†æ”¯ï¼Œå› ä¸ºè¿™ç­‰åŒäºŽæŽ¨é€ä¸€ä¸ªç©ºçš„æœ¬åœ°åˆ†æ”¯åˆ°è¿œç¨‹åˆ†æ”¯ 123$ git push origin :master# ç­‰åŒäºŽ$ git push origin --delete master ä¸Šé¢å‘½ä»¤è¡¨ç¤ºåˆ é™¤originä¸»æœºçš„masteråˆ†æ”¯ æ›´è¯¦ç»†èµ„æ–™è¯·å‚ç…§ï¼šhttps://www.git-scm.com/book/en/v2]]></content>
      <categories>
        <category>ç‰ˆæœ¬æŽ§åˆ¶</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¼€ç¯‡]]></title>
    <url>%2F2017%2F01%2F13%2FBegin%2F</url>
    <content type="text"><![CDATA[è‡ªåºâ€‹ å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ä¸€ä¸ªæ™®é€šçš„å¤§å­¦ç”Ÿï¼Œ2013å¹´è€ƒå…¥å“ˆå°”æ»¨å·¥ç¨‹å¤§å­¦è½¯ä»¶å·¥ç¨‹ä¸“ä¸šï¼Œ2017å¹´æƒ³å†™åšå®¢ï¼Œå·²ç»24å²ã€‚äººç”Ÿæ­£åœ¨ç´§è¦å…³å£ï¼Œå¤§çš„å†³ç­–å‘¼ä¹‹æ¬²å‡ºã€‚ â€‹ çŽ°åœ¨çš„æˆ‘ï¼Œæ”¾å‡åœ¨å®¶ï¼Œæ„Ÿåˆ°æœ‰å±žäºŽè‡ªå·±çš„æ—¶é—´æ— æ¯”å®è´µï¼Œæ²¡æœ‰å¤–äº‹æ‰“æ‰°ï¼Œæƒ³å¹²ä»€ä¹ˆå°±å¹²ä»€ä¹ˆï¼Œä»¥åŽæ€•æ˜¯å°‘æœ‰äº†ï¼Œæ— æ¯”çæƒœã€‚æ¯å¤©èƒ½åšè‡ªå·±å–œæ¬¢åšçš„äº‹ï¼ŒçŽ©ä¹Ÿå¥½ï¼Œå­¦ä¹Ÿå¥½ï¼Œä¸å¿…æ‹…å¿ƒè¡£é£Ÿä½è¡Œï¼ŒçœŸæ˜¯æœ€åŽçš„å¤©å ‚äº†ã€‚ â€‹ æƒ³æŠŠè‡ªå·±çš„æ”¶èŽ·ã€ä¹è¶£ã€å¿ƒå¾—ï¼Œæƒ³æ³•é€šè¿‡ç½‘ç«™å‘æœ‰ç¼˜æ¥è®¿çš„æœ‹å‹åˆ†äº«ï¼Œç•™ä½ç”Ÿå‘½ä¸­çš„ç‚¹æ»´ã€‚ â€‹ è¿™ä¸¤å¤©ä¸ºäº†å»ºä¸€ä¸ªåšå®¢ç«™ï¼Œå¿™æ¥å¿™åŽ»æ‰¾äº†å¾ˆå¤šèµ„æ–™ï¼Œé—®äº†å¾ˆå¤šæœ‹å‹ã€‚æ€»ç®—æœ‰äº†ç‚¹æˆæžœï¼Œè™½ç„¶å°±æ˜¯è¯»è¯´æ˜Žä¹¦ï¼Œè¿˜æ˜¯å¾ˆè´¹åŠ²ï¼Œé‡åˆ°çš„é—®é¢˜å±‚å‡ºä¸ç©·â€¦â€¦æˆ‘è§‰çš„ç¨‹åºå‘˜æœ€å®è´µçš„èƒ½åŠ›å°±æ˜¯è‡ªå­¦èƒ½åŠ›ï¼Œæ•¢äºŽæŽ¥è§¦æ–°é²œäº‹ç‰©ï¼Œè¯»æ‡‚åˆ«äººçš„æ–‡ç« ï¼Œè‹±æ–‡å¼€å‘æ–‡æ¡£ï¼Œè‡ªå·±æŠŠæ–°æŠ€æœ¯æŽŒæ¡äº†ï¼Œå¹¶æœ‰è‡ªå·±çš„ç†è§£ã€‚ â€‹ çŽ°åœ¨çš„æˆ‘è¿˜å·®å¾ˆå¤šï¼Œå¸Œæœ›åœ¨æœ‹å‹çš„å¸®åŠ©ä¸‹ï¼Œå¸ˆé•¿çš„æŒ‡å¯¼ä¸‹ï¼Œä¸€ç‚¹ä¸€ç‚¹çš„ï¼Œä¸æ–­è¿›æ­¥ã€‚]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>life</tag>
      </tags>
  </entry>
</search>
